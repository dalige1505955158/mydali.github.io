<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="面试," />





  <link rel="alternate" href="/atom.xml" title="DaliBlogs" type="application/atom+xml" />






<meta name="description" content="参考：https:&#x2F;&#x2F;mp.weixin.qq.com&#x2F;s&#x2F;QX0HL1tCAGU70zEb-HJQlQ 手写函数合集 https:&#x2F;&#x2F;mp.weixin.qq.com&#x2F;s&#x2F;5mlf4yo6v4gRJnePAluqgg proxy代理简介 https:&#x2F;&#x2F;mp.weixin.qq.com&#x2F;s&#x2F;Nvp_N4Sj0PlBqXjTis7UCQ 输入URL到渲染全面梳理 https:&#x2F;&#x2F;blog.csdn">
<meta property="og:type" content="article">
<meta property="og:title" content="前端面试复习">
<meta property="og:url" content="http://yoursite.com/2020/09/15/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E5%A4%8D%E4%B9%A0/index.html">
<meta property="og:site_name" content="DaliBlogs">
<meta property="og:description" content="参考：https:&#x2F;&#x2F;mp.weixin.qq.com&#x2F;s&#x2F;QX0HL1tCAGU70zEb-HJQlQ 手写函数合集 https:&#x2F;&#x2F;mp.weixin.qq.com&#x2F;s&#x2F;5mlf4yo6v4gRJnePAluqgg proxy代理简介 https:&#x2F;&#x2F;mp.weixin.qq.com&#x2F;s&#x2F;Nvp_N4Sj0PlBqXjTis7UCQ 输入URL到渲染全面梳理 https:&#x2F;&#x2F;blog.csdn">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20190304095123770.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dvcXV0ZWNodGVhbQ==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://static.vue-js.com/4fafe900-3acc-11eb-85f6-6fac77c0c9b3.png">
<meta property="og:image" content="http://yoursite.com/2020/09/15/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E5%A4%8D%E4%B9%A0/image-20220221155711739.png">
<meta property="og:image" content="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/866902be3c894edebc9a70446ed664df~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp">
<meta property="article:published_time" content="2020-09-15T06:10:37.000Z">
<meta property="article:modified_time" content="2022-12-27T10:02:24.554Z">
<meta property="article:author" content="Dali">
<meta property="article:tag" content="面试">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img-blog.csdnimg.cn/20190304095123770.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dvcXV0ZWNodGVhbQ==,size_16,color_FFFFFF,t_70">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2020/09/15/前端面试复习/"/>





  <title>前端面试复习 | DaliBlogs</title>
  








<meta name="generator" content="Hexo 4.2.1"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">DaliBlogs</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/09/15/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E5%A4%8D%E4%B9%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dali">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DaliBlogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">前端面试复习</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-09-15T14:10:37+08:00">
                2020-09-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9D%A2%E8%AF%95/" itemprop="url" rel="index">
                    <span itemprop="name">面试</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>参考：<a href="https://mp.weixin.qq.com/s/QX0HL1tCAGU70zEb-HJQlQ" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/QX0HL1tCAGU70zEb-HJQlQ</a></p>
<p>手写函数合集</p>
<p><a href="https://mp.weixin.qq.com/s/5mlf4yo6v4gRJnePAluqgg" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/5mlf4yo6v4gRJnePAluqgg</a></p>
<p>proxy代理简介</p>
<p><a href="https://mp.weixin.qq.com/s/Nvp_N4Sj0PlBqXjTis7UCQ" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/Nvp_N4Sj0PlBqXjTis7UCQ</a></p>
<p>输入URL到渲染全面梳理</p>
<p><a href="https://blog.csdn.net/qq_43430453/article/details/107421120" target="_blank" rel="noopener">https://blog.csdn.net/qq_43430453/article/details/107421120</a></p>
<p>常用的前端JavaScript方法封装</p>
<p><a href="https://mp.weixin.qq.com/s/faO3jszPOezv-XVuV11SXQ" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/faO3jszPOezv-XVuV11SXQ</a></p>
<a id="more"></a>

<p>遍历A节点的父节点下的所有子节点</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    var b&#x3D;document.getElementById(&quot;a&quot;).parentNode.children;</span><br><span class="line">    console.log(b)</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<p>target、currentTarget的区别？</p>
<p>currentTarget当前所绑定事件的元素（指向出发事件的函数，始终不变）</p>
<p>target当前被点击的元素</p>
<p>在浏览器地址栏中输入URL后发生了什么</p>
<p>基本流程：</p>
<p>①查询ip地址</p>
<p>②建立tcp连接，接入服务器</p>
<p>③浏览器发起http请求</p>
<p>④服务器后台操作并做出http响应</p>
<p>⑤网页的解析与渲染</p>
<p>优化：</p>
<p>从此可以得出网站的一些优化的方法:</p>
<p>①减少DNS查询:将服务器域名的ip信息加入本地host文件。</p>
<p>②减少http请求数量，对于图片使用雪碧图,对于html文件和css文件，js文件分别进行合并操作。</p>
<p>③减少下载时间：压缩图片，使用压缩应用压缩文档中的空格，删除文件多余的语句和注释，创造自己的js精简库和精简框架,使用本地浏览器缓存。</p>
<p>④提前渲染开始时间：将css链接放在html头部。</p>
<p>⑤减轻解析器的阻塞：将js链接放在body尾部。</p>
<p>参考：<a href="https://www.cnblogs.com/yanruizhe/p/11462462.html" target="_blank" rel="noopener">https://www.cnblogs.com/yanruizhe/p/11462462.html</a></p>
<p>页面渲染html的过程？</p>
<blockquote>
<p>不需要死记硬背，理解整个过程即可</p>
</blockquote>
<p>浏览器渲染页面的一般过程：</p>
<p>1.浏览器解析html源码，然后创建一个 DOM树。并行请求 css/image/js在DOM树中，每一个HTML标签都有一个对应的节点，并且每一个文本也都会有一个对应的文本节点。DOM树的根节点就是 documentElement，对应的是html标签。</p>
<p>2.浏览器解析CSS代码，计算出最终的样式数据。构建CSSOM树。对CSS代码中非法的语法它会直接忽略掉。解析CSS的时候会按照如下顺序来定义优先级：浏览器默认设置 &lt; 用户设置 &lt; 外链样式 &lt; 内联样式 &lt; html中的style。</p>
<p>3.DOM Tree + CSSOM –&gt; 渲染树（rendering tree）。渲染树和DOM树有点像，但是是有区别的。</p>
<p>DOM树完全和html标签一一对应，但是渲染树会忽略掉不需要渲染的元素，比如head、display:none的元素等。而且一大段文本中的每一个行在渲染树中都是独立的一个节点。渲染树中的每一个节点都存储有对应的css属性。</p>
<p>4.一旦渲染树创建好了，浏览器就可以根据渲染树直接把页面绘制到屏幕上。</p>
<p>以上四个步骤并不是一次性顺序完成的。如果DOM或者CSSOM被修改，以上过程会被重复执行。实际上，CSS和JavaScript往往会多次修改DOM或者CSSOM。</p>
<p>说一下CORS？</p>
<p>CORS是一种新标准，支持同源通信，也支持跨域通信。fetch是实现CORS通信的</p>
<p>如何中断ajax请求？</p>
<p>一种是设置超时时间让ajax自动断开，另一种是手动停止ajax请求，其核心是调用XML对象的abort方法，ajax.abort()</p>
<p>用js递归的方式写1到100求和？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function num(n)&#123;</span><br><span class="line">    if(n&#x3D;&#x3D;1) return 1;</span><br><span class="line">    return num(n-1)+n;</span><br><span class="line">&#125;</span><br><span class="line">num(100);    </span><br><span class="line">延申：</span><br><span class="line">var sum &#x3D; 0;</span><br><span class="line">for(var i &#x3D; 1 ; i &lt;&#x3D; 100; i++)&#123;</span><br><span class="line">    sum +&#x3D; i;</span><br><span class="line">&#125;</span><br><span class="line">document.writeln(&quot;1~100以内的和为：&quot;+ sum);</span><br></pre></td></tr></table></figure>



<p>数组去重</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">第一种：</span><br><span class="line">var arr&#x3D;[&#39;12&#39;,&#39;32&#39;,&#39;89&#39;,&#39;12&#39;,&#39;12&#39;,&#39;78&#39;,&#39;12&#39;,&#39;32&#39;];</span><br><span class="line">    &#x2F;&#x2F; 最简单数组去重法</span><br><span class="line">    function unique1(array)&#123;</span><br><span class="line">        var n &#x3D; []; &#x2F;&#x2F;一个新的临时数组</span><br><span class="line">        for(var i &#x3D; 0; i &lt; array.length; i++)&#123; &#x2F;&#x2F;遍历当前数组</span><br><span class="line">            if (n.indexOf(array[i]) &#x3D;&#x3D; -1)</span><br><span class="line">                n.push(array[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        return n;</span><br><span class="line">    &#125;</span><br><span class="line">arr&#x3D;unique1(arr);</span><br><span class="line"></span><br><span class="line">第二种</span><br><span class="line">es6方法数组去重</span><br><span class="line">arr&#x3D;[...new Set(arr)];</span><br><span class="line"></span><br><span class="line">第三种</span><br><span class="line">es6方法数组去重，第二种方法</span><br><span class="line">function dedupe(array) &#123;</span><br><span class="line">  return Array.from(new Set(array));       &#x2F;&#x2F;Array.from()能把set结构转换为数组</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>变量提升</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">console.log(a);  &#x2F;&#x2F;undefined</span><br><span class="line">var a &#x3D; 123;</span><br><span class="line"></span><br><span class="line">经典案例</span><br><span class="line">console.log(v1);</span><br><span class="line">var v1 &#x3D; 100;</span><br><span class="line">function foo() &#123;</span><br><span class="line">    console.log(v1);</span><br><span class="line">    var v1 &#x3D; 200;</span><br><span class="line">    console.log(v1);</span><br><span class="line">&#125;</span><br><span class="line">foo();</span><br><span class="line">console.log(v1);</span><br><span class="line">&#x2F;&#x2F; undefined  undefined 200  100</span><br></pre></td></tr></table></figure>

<p>函数提升</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">函数字面量式</span><br><span class="line">bar()</span><br><span class="line">var bar &#x3D; function() &#123;</span><br><span class="line">  console.log(1);</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; 报错：TypeError: bar is not a function</span><br><span class="line"></span><br><span class="line">函数声明式</span><br><span class="line">bar()</span><br><span class="line">function bar() &#123;</span><br><span class="line">  console.log(1);</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;输出结果1</span><br></pre></td></tr></table></figure>



<p>虚拟dom的产生</p>
<p>改变页面展示的内容只能通过遍历查询 dom 树的方式找到需要修改的 dom 然后修改样式行为或者结构，来达到更新 ui 的目的。这种方式相当消耗计算资源，因为每次查询 dom 几乎都需要遍历整颗 dom 树。</p>
<p>如果建立一个与 dom 树对应的虚拟 dom 对象（ js 对象），以对象嵌套的方式来表示 dom 树，那么每次 dom 的更改就变成了 js 对象的属性的更改，这样一来就能查找 js 对象的属性变化要比查询 dom 树的性能开销小</p>
<p>vue </p>
<p>采用的是虚拟 dom 通过重写 setter ， getter 实现观察者监听 data 属性的变化生成新的虚拟 dom 通过 h 函数创建真实 dom 替换掉dom树上对应的旧 dom。</p>
<p>react</p>
<p>react 也是通过虚拟 dom 和 setState 更改 data 生成新的虚拟 dom 以及 diff 算法来计算和生成需要替换的 dom 做到局部更新的。</p>
<p>编程范式 (<a href="https://mp.weixin.qq.com/s/NmWPziVRnCvBsd-_hOG84Q" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/NmWPziVRnCvBsd-_hOG84Q</a>)</p>
<p><strong>编程范式</strong>（Programming paradigm）是一类典型的编程风格，是指从事软件工程的一类典型的风格（可以对照方法学）。如：函数式编程、过程式编程、面向对象编程、指令式编程等等为不同的编程范式。</p>
<p><img src="https://img-blog.csdnimg.cn/20190304095123770.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dvcXV0ZWNodGVhbQ==,size_16,color_FFFFFF,t_70" alt="img"></p>
<p><strong>命令式编程</strong></p>
<p>命令式编程是一种描述计算机所需作出的行为的编程典范，即一步一步告诉计算机先做什么再做什么。举个简单的🌰：找出所有人中年龄大于 35 岁的，你就需要这样告诉计算机：</p>
<ol>
<li>创建一个新的数组 newArry 存储结果；</li>
<li>循环遍历所有人的集合 people；</li>
<li>如果当前人的年龄大于 35，就把这个人的名字存到新的数组中；</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">const people &#x3D; [</span><br><span class="line">    &#123; name: &#39;Lily&#39;, age: 33 &#125;,</span><br><span class="line">    &#123; name: &#39;Abby&#39;, age: 36 &#125;,</span><br><span class="line">    &#123; name: &#39;Mary&#39;, age: 32 &#125;,</span><br><span class="line">    &#123; name: &#39;Joyce&#39;, age: 35 &#125;,</span><br><span class="line">    &#123; name: &#39;Bella&#39;, age: 38 &#125;,</span><br><span class="line">    &#123; name: &#39;Stella&#39;, age: 40 &#125;,</span><br><span class="line">  ];</span><br><span class="line">  const newArry &#x3D; [];</span><br><span class="line">  for (let i &#x3D; 0; i &lt; people.length; i++) &#123;</span><br><span class="line">    if (people[i].age &gt; 35) &#123;</span><br><span class="line">      newArry.push(people[i].name);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>



<p><strong>声明式编程</strong></p>
<p>声明式编程与命令式编程是相对立的，只需要告诉计算机要做什么而不必告诉他怎么做。声明式语言包括数据库查询语（SQL），正则表达式，逻辑编程，函数式编程和组态管理系统。上边的例子用声明式编程是这样的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const peopleAgeFilter &#x3D; (people) &#x3D;&gt; &#123;</span><br><span class="line">return people.filter((item) &#x3D;&gt; item.age &gt; 35)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>函数式编程</strong></p>
<p>函数式编程这里的函数并不是我们所知道的 Function，而是数学中的函数，即变量之间的映射，输入通过函数都会返回<strong>有且只有一个</strong>输出值。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; js 中的 function</span><br><span class="line">function fun(data, value, type) &#123;</span><br><span class="line">  &#x2F;&#x2F; 逻辑代码</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; 函数</span><br><span class="line">y&#x3D;f(x)</span><br></pre></td></tr></table></figure>

<ul>
<li>柯里化</li>
</ul>
<p>柯里化 (<a href="https://zh.wikipedia.org/wiki/%E6%9F%AF%E9%87%8C%E5%8C%96)是把接受多个参数的函数变换成接受一个单一参数（最初函数的第一个参数）的函数，并且返回接受余下的参数而且返回结果的新函数的技术。简单来说，就是只传递给函数一个参数来调用它，让它返回一个函数去处理剩下的参数。" target="_blank" rel="noopener">https://zh.wikipedia.org/wiki/%E6%9F%AF%E9%87%8C%E5%8C%96)是把接受多个参数的函数变换成接受一个单一参数（最初函数的第一个参数）的函数，并且返回接受余下的参数而且返回结果的新函数的技术。简单来说，就是只传递给函数一个参数来调用它，让它返回一个函数去处理剩下的参数。</a></p>
<p>如下例，求两个数的平方和：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 原始版本</span><br><span class="line">const squares &#x3D; function(x, y) &#123;</span><br><span class="line">  return x * x + y * y;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; 柯里化版本</span><br><span class="line">const currySquares &#x3D; function(x) &#123;</span><br><span class="line">    return function(y)&#123;</span><br><span class="line">    return x * x + y * y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">console.log(squares(1,2));</span><br><span class="line">console.log(currySquares(1)(2));</span><br></pre></td></tr></table></figure>

<p>在柯里化版本中，实际的执行如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">currySquares(1) &#x3D; function(y)&#123;</span><br><span class="line">  return 1 + y * y;</span><br><span class="line">&#125;</span><br><span class="line">currySquares(1)(2) &#x3D; 1 + 4 &#x3D; 5;</span><br></pre></td></tr></table></figure>



<p><strong>面向对象编程</strong></p>
<p>面向对象的程序设计把计算机程序视为一组对象的集合，而每个对象都可以接收其他对象发过来的消息，并处理这些消息，计算机程序的执行就是一系列消息在各个对象之间传递。</p>
<p>面向对象的两个基本概念：</p>
<ol>
<li>类：类是对象的类型模板；例如：政采云前端 ZooTeam 是一个类；</li>
<li>实例：实例是根据类创建的对象；例如：ZooTeam 可以创建出刘静这个实例；面向对象的三个基本特征：封装、继承、多态</li>
</ol>
<ul>
<li><p>封装：封装即隐藏对象的属性和实现细节，仅对外公开接口，控制在程序中属性的读和修改的访问级别；将抽象得到的数据和行为（或功能）相结合，形成一个有机的整体。根据我的理解，其实就是把子类的属性以及公共的方法抽离出来作为公共方法放在父类中。</p>
</li>
<li><p>继承：继承就是子类继承父类的特征和行为，使得子类对象（实例）具有父类的属性和方法，或子类从父类继承方法，使得子类具有父类相同的行为。子类继承父类后，子类就会拥有父类的属性和方法，但是同时子类还可以声明自己的属性和方法，所以子类的功能会大于等于父类而不会小于父类。</p>
</li>
<li><p>多态：多态按字面的意思就是“多种状态”，允许将子类类型的指针赋值给父类类型的指针。即同一操作作用于不同的对象，可以有不同的解释，产生不同的执行结果。多态的表现方式有重写，重载和接口，原生 JS 能够实现的多态只有重写。</p>
</li>
<li><p>重写：重写是子类可继承父类中的方法，而不需要重新编写相同的方法。但有时子类并不想原封不动地继承父类的方法，而是想作一定的修改，这就需要采用方法的重写。方法重写又称方法覆盖。</p>
</li>
</ul>
<h4 id="HTTP-中如何处理表单数据的提交？"><a href="#HTTP-中如何处理表单数据的提交？" class="headerlink" title="HTTP 中如何处理表单数据的提交？"></a>HTTP 中如何处理表单数据的提交？</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">在 http 中，有两种主要的表单提交的方式，体现在两种不同的Content-Type取值:</span><br><span class="line"></span><br><span class="line">application&#x2F;x-www-form-urlencoded</span><br><span class="line">multipart&#x2F;form-data</span><br><span class="line">由于表单提交一般是POST请求，很少考虑GET，因此这里我们将默认提交的数据放在请求体中。</span><br><span class="line"></span><br><span class="line">application&#x2F;x-www-form-urlencoded</span><br><span class="line">对于application&#x2F;x-www-form-urlencoded格式的表单内容，有以下特点:</span><br><span class="line"></span><br><span class="line">其中的数据会被编码成以&amp;分隔的键值对</span><br><span class="line">字符以URL编码方式编码。</span><br><span class="line">如：</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 转换过程: &#123;a: 1, b: 2&#125; -&gt; a&#x3D;1&amp;b&#x3D;2 -&gt; 如下(最终形式)</span><br><span class="line">&quot;a%3D1%26b%3D2&quot;</span><br><span class="line">multipart&#x2F;form-data</span><br><span class="line">对于 multipart&#x2F;form-data 而言:</span><br><span class="line"></span><br><span class="line">请求头中的 Content-Type 字段会包含 boundary ，且 boundary 的值有浏览器默认指定。例: Content-Type: multipart&#x2F;form-data;boundary&#x3D;----WebkitFormBoundaryRRJKeWfHPGrS4LKe。</span><br><span class="line">数据会分为多个部分，每两个部分之间通过分隔符来分隔，每部分表述均有 HTTP 头部描述子包体，如Content-Type，在最后的分隔符会加上--表示结束。</span><br><span class="line">相应的请求体是下面这样:</span><br><span class="line"></span><br><span class="line">Content-Disposition: form-data;name&#x3D;&quot;data1&quot;;</span><br><span class="line">Content-Type: text&#x2F;plain</span><br><span class="line">data1</span><br><span class="line">----WebkitFormBoundaryRRJKeWfHPGrS4LKe</span><br><span class="line">Content-Disposition: form-data;name&#x3D;&quot;data2&quot;;</span><br><span class="line">Content-Type: text&#x2F;plain</span><br><span class="line">data2</span><br><span class="line">----WebkitFormBoundaryRRJKeWfHPGrS4LKe--</span><br><span class="line">小结</span><br><span class="line">值得一提的是，multipart&#x2F;form-data 格式最大的特点在于:每一个表单元素都是独立的资源表述。另外，你可能在写业务的过程中，并没有注意到其中还有boundary的存在，如果你打开抓包工具，确实可以看到不同的表单元素被拆分开了，之所以在平时感觉不到，是以为浏览器和 HTTP 给你封装了这一系列操作。</span><br><span class="line"></span><br><span class="line">而且，在实际的场景中，对于图片等文件的上传，基本采用multipart&#x2F;form-data而不用application&#x2F;x-www-form-urlencoded，因为没有必要做 URL 编码，带来巨大耗时的同时，也占用了更多的空间。</span><br></pre></td></tr></table></figure>

<h4 id="SPA（单页应用）首屏加载速度慢怎么解决？"><a href="#SPA（单页应用）首屏加载速度慢怎么解决？" class="headerlink" title="SPA（单页应用）首屏加载速度慢怎么解决？"></a>SPA（单页应用）首屏加载速度慢怎么解决？</h4><p><img src="https://static.vue-js.com/4fafe900-3acc-11eb-85f6-6fac77c0c9b3.png" alt="image.png"></p>
<h4 id="为什么Vue中的data属性是一个函数而不是一个对象"><a href="#为什么Vue中的data属性是一个函数而不是一个对象" class="headerlink" title="为什么Vue中的data属性是一个函数而不是一个对象"></a>为什么Vue中的data属性是一个函数而不是一个对象</h4><p><code>vue</code>实例的时候定义<code>data</code>属性既可以是一个对象，也可以是一个函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">const app &#x3D; new Vue(&#123;</span><br><span class="line">    el:&quot;#app&quot;,</span><br><span class="line">    &#x2F;&#x2F; 对象格式</span><br><span class="line">    data:&#123;</span><br><span class="line">        foo:&quot;foo&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x2F;&#x2F; 函数格式</span><br><span class="line">    data()&#123;</span><br><span class="line">        return &#123;</span><br><span class="line">             foo:&quot;foo&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>结论</p>
<ul>
<li>根实例对象<code>data</code>可以是对象也可以是函数（根实例是单例），不会产生数据污染情况</li>
<li>组件实例对象<code>data</code>必须为函数，目的是为了防止多个组件实例对象之间共用一个<code>data</code>，产生数据污染。采用函数的形式，<code>initData</code>时会将其作为工厂函数都会返回全新<code>data</code>对象</li>
</ul>
<h4 id="Vue-observable是什么？"><a href="#Vue-observable是什么？" class="headerlink" title="Vue.observable是什么？"></a>Vue.observable是什么？</h4><p>使用场景</p>
<p>在非父子组件通信时，可以使用通常的<code>bus</code>或者使用<code>vuex</code>，但是实现的功能不是太复杂，而使用上面两个又有点繁琐。这时，<code>observable</code>就是一个很好的选择</p>
<p>创建一个<code>js</code>文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">1&#x2F;&#x2F; 引入vue</span><br><span class="line">2import Vue from &#39;vue</span><br><span class="line">3&#x2F;&#x2F; 创建state对象，使用observable让state对象可响应</span><br><span class="line">4export let state &#x3D; Vue.observable(&#123;</span><br><span class="line">5  name: &#39;张三&#39;,</span><br><span class="line">6  &#39;age&#39;: 38</span><br><span class="line">7&#125;)</span><br><span class="line">8&#x2F;&#x2F; 创建对应的方法</span><br><span class="line">9export let mutations &#x3D; &#123;</span><br><span class="line">10  changeName(name) &#123;</span><br><span class="line">11    state.name &#x3D; name</span><br><span class="line">12  &#125;,</span><br><span class="line">13  setAge(age) &#123;</span><br><span class="line">14    state.age &#x3D; age</span><br><span class="line">15  &#125;</span><br><span class="line">16&#125;</span><br></pre></td></tr></table></figure>

<p>在<code>.vueA，.vueB</code>页面文件中直接使用即可，触发一个会同步更新，相当于简易的<code>vuex</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">1&lt;template&gt;</span><br><span class="line">2  &lt;div&gt;</span><br><span class="line">3    姓名：&#123;&#123; name &#125;&#125;</span><br><span class="line">4    年龄：&#123;&#123; age &#125;&#125;</span><br><span class="line">5    &lt;button @click&#x3D;&quot;changeName(&#39;李四&#39;)&quot;&gt;改变姓名&lt;&#x2F;button&gt;</span><br><span class="line">6    &lt;button @click&#x3D;&quot;setAge(18)&quot;&gt;改变年龄&lt;&#x2F;button&gt;</span><br><span class="line">7  &lt;&#x2F;div&gt;</span><br><span class="line">8&lt;&#x2F;template&gt;</span><br><span class="line">9import &#123; state, mutations &#125; from &#39;@&#x2F;store</span><br><span class="line">10export default &#123;</span><br><span class="line">11  &#x2F;&#x2F; 在计算属性中拿到值</span><br><span class="line">12  computed: &#123;</span><br><span class="line">13    name() &#123;</span><br><span class="line">14      return state.name</span><br><span class="line">15    &#125;,</span><br><span class="line">16    age() &#123;</span><br><span class="line">17      return state.age</span><br><span class="line">18    &#125;</span><br><span class="line">19  &#125;,</span><br><span class="line">20  &#x2F;&#x2F; 调用mutations里面的方法，更新数据</span><br><span class="line">21  methods: &#123;</span><br><span class="line">22    changeName: mutations.changeName,</span><br><span class="line">23    setAge: mutations.setAge</span><br><span class="line">24  &#125;</span><br><span class="line">25&#125;</span><br></pre></td></tr></table></figure>

<h4 id="正则面试题集锦"><a href="#正则面试题集锦" class="headerlink" title="正则面试题集锦"></a>正则面试题集锦</h4><h5 id="1-提取连续重复的字符"><a href="#1-提取连续重复的字符" class="headerlink" title="1.提取连续重复的字符"></a>1.提取连续重复的字符</h5><p>将有重复的字符提取出来，例如12323454545666，提取[ ‘23’, ‘45’, ‘6’ ]</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">const collectRepeatStr &#x3D; (str) &#x3D;&gt; &#123;</span><br><span class="line">  let repeatStrs &#x3D; []</span><br><span class="line">  const repeatRe &#x3D; &#x2F;(.+)\1+&#x2F;g</span><br><span class="line">  </span><br><span class="line">  str.replace(repeatRe, ($0, $1) &#x3D;&gt; &#123;</span><br><span class="line">    $1 &amp;&amp; repeatStrs.push($1)</span><br><span class="line">  &#125;)</span><br><span class="line">  </span><br><span class="line">  return repeatStrs</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="2-实现一个trim函数"><a href="#2-实现一个trim函数" class="headerlink" title="2. 实现一个trim函数"></a>2. 实现一个trim函数</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 去除空格法</span><br><span class="line">const trim &#x3D; (str) &#x3D;&gt; &#123;</span><br><span class="line">  return str.replace(&#x2F;^\s*|\s*$&#x2F;g, &#39;&#39;)    </span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; 提取非空格法</span><br><span class="line">const trim &#x3D; (str) &#x3D;&gt; &#123;</span><br><span class="line">  return str.replace(&#x2F;^\s*(.*?)\s*$&#x2F;g, &#39;$1&#39;)    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="3-数字价格千分位分割"><a href="#3-数字价格千分位分割" class="headerlink" title="3. 数字价格千分位分割"></a>3. 数字价格千分位分割</h5><p>将123456789变成123,456,789</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#39;123456789&#39;.replace(&#x2F;(?!^)(?&#x3D;(\d&#123;3&#125;)+$)&#x2F;g, &#39;,&#39;)</span><br></pre></td></tr></table></figure>

<p><img src="/2020/09/15/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E5%A4%8D%E4%B9%A0/image-20220221155711739.png" alt="image-20220221155711739"></p>
<h5 id="4-手机号3-4-4分割"><a href="#4-手机号3-4-4分割" class="headerlink" title="4. 手机号3-4-4分割"></a>4. 手机号3-4-4分割</h5><p>将手机号18379836654转化为183-7983-6654</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let mobile &#x3D; &#39;18379836654&#39; </span><br><span class="line">let mobileReg &#x3D; &#x2F;(?&#x3D;(\d&#123;4&#125;)+$)&#x2F;g </span><br><span class="line"></span><br><span class="line">console.log(mobile.replace(mobileReg, &#39;-&#39;)) &#x2F;&#x2F; 183-7983-6654</span><br></pre></td></tr></table></figure>

<h5 id="5-将字符串驼峰化"><a href="#5-将字符串驼峰化" class="headerlink" title="5. 将字符串驼峰化"></a>5. 将字符串驼峰化</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">foo Bar &#x3D;&gt; fooBar</span><br><span class="line">foo-bar---- &#x3D;&gt; fooBar</span><br><span class="line">foo_bar__ &#x3D;&gt; fooBar</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const camelCase &#x3D; (string) &#x3D;&gt; &#123;</span><br><span class="line">  const camelCaseRegex &#x3D; &#x2F;[-_\s]+(.)?&#x2F;g</span><br><span class="line"></span><br><span class="line">  return string.replace(camelCaseRegex, (match, char) &#x3D;&gt; &#123;</span><br><span class="line">    return char ? char.toUpperCase() : &#39;&#39;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="6-将字符串首字母转化为大写，剩下为小写"><a href="#6-将字符串首字母转化为大写，剩下为小写" class="headerlink" title="6. 将字符串首字母转化为大写，剩下为小写"></a>6. 将字符串首字母转化为大写，剩下为小写</h5><p>例如 hello world 转为为Hello World</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const capitalize &#x3D; (string) &#x3D;&gt; &#123;</span><br><span class="line">  const capitalizeRegex &#x3D; &#x2F;(?:^|\s+)\w&#x2F;g</span><br><span class="line"></span><br><span class="line">  return string.toLowerCase().replace(capitalizeRegex, (match) &#x3D;&gt; match.toUpperCase())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="7-通过name获取url-query参数"><a href="#7-通过name获取url-query参数" class="headerlink" title="7.通过name获取url query参数"></a>7.通过name获取url query参数</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const getQueryByName &#x3D; (name) &#x3D;&gt; &#123;</span><br><span class="line">  const queryNameRegex &#x3D; new RegExp(&#96;[?&amp;]$&#123;name&#125;&#x3D;([^&amp;]*)(&amp;|$)&#96;)</span><br><span class="line">  const queryNameMatch &#x3D; window.location.search.match(queryNameRegex)</span><br><span class="line">  &#x2F;&#x2F; 一般都会通过decodeURIComponent解码处理</span><br><span class="line">  return queryNameMatch ? decodeURIComponent(queryNameMatch[1]) : &#39;&#39;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="为什么-Vue2-this-能够直接获取到-data-和-methods"><a href="#为什么-Vue2-this-能够直接获取到-data-和-methods" class="headerlink" title="为什么 Vue2 this 能够直接获取到 data 和 methods"></a>为什么 Vue2 this 能够直接获取到 data 和 methods</h1><p>通过<code>this</code>直接访问到<code>methods</code>里面的函数的原因是：因为<code>methods</code>里的方法通过 <code>bind</code> 指定了<code>this</code>为 <code>new Vue</code>的实例(<code>vm</code>)。</p>
<p>通过 <code>this</code> 直接访问到 <code>data</code> 里面的数据的原因是：data里的属性最终会存储到<code>new Vue</code>的实例（<code>vm</code>）上的 <code>_data</code>对象中，访问 <code>this.xxx</code>，是访问<code>Object.defineProperty</code>代理后的 <code>this._data.xxx</code>。</p>
<p>链接：<a href="https://juejin.cn/post/7112255428452417549" target="_blank" rel="noopener">https://juejin.cn/post/7112255428452417549</a></p>
<h1 id="熬夜整理56个JavaScript高级的手写知识点！！专业扫盲"><a href="#熬夜整理56个JavaScript高级的手写知识点！！专业扫盲" class="headerlink" title="熬夜整理56个JavaScript高级的手写知识点！！专业扫盲"></a>熬夜整理56个JavaScript高级的手写知识点！！专业扫盲</h1><p>链接：<a href="https://juejin.cn/post/7023906112843808804" target="_blank" rel="noopener">https://juejin.cn/post/7023906112843808804</a></p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>大家好，我是林三心，<strong>基础是进阶的前提</strong>，前面我给大家分享了本菜鸟这一年来笔记中的<strong>50个JS基础知识点</strong>和<strong>50个JS高级知识点</strong></p>
<ul>
<li><a href="https://juejin.cn/post/7020940475133591566" target="_blank" rel="noopener">工作中遇到的50个JavaScript的基础知识点，满分找我拿奖品！</a>【阅读：7.8k，点赞：285】</li>
<li><a href="https://juejin.cn/post/7022795467821940773" target="_blank" rel="noopener">万字总结」熬夜总结50个JS的高级知识点，全都会你就是神！！！</a>【阅读：1.5w，点赞：812】</li>
</ul>
<p>今天就给大家分享一下我笔记中的<strong>56个JavaScript手写知识点</strong></p>
<blockquote>
<p>注明：此文章不含<strong>算法题</strong></p>
</blockquote>
<h2 id="面试常考"><a href="#面试常考" class="headerlink" title="面试常考"></a>面试常考</h2><h3 id="1、实现原生的AJAX请求"><a href="#1、实现原生的AJAX请求" class="headerlink" title="1、实现原生的AJAX请求"></a>1、实现原生的AJAX请求</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ajax = &#123;</span><br><span class="line">    <span class="keyword">get</span>(url, fn) &#123;</span><br><span class="line">        <span class="keyword">const</span> xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line">        xhr.open(<span class="string">'GET'</span>, url, <span class="literal">true</span>)<span class="comment">// 第三个参数异步与否</span></span><br><span class="line">        xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (xhr.readyState === <span class="number">4</span>) &#123;</span><br><span class="line">                fn(xhr.responeText)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        xhr.send()</span><br><span class="line">    &#125;,</span><br><span class="line">    post(url, data, fn) &#123;</span><br><span class="line">        <span class="keyword">const</span> xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line">        xhr.open(<span class="string">'POST'</span>, url, <span class="literal">true</span>)</span><br><span class="line">        xhr.setRequestHeader(<span class="string">'Content-type'</span>,<span class="string">'application/x-www-form-urlencoded'</span>)</span><br><span class="line">        xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (xhr.readyState === <span class="number">4</span>) &#123;</span><br><span class="line">                fn(xhr.responeText)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        xhr.send(data)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="2、手写-new-的过程"><a href="#2、手写-new-的过程" class="headerlink" title="2、手写 new 的过程"></a>2、手写 new 的过程</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myNew</span>(<span class="params">fn, ...args</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> obj = &#123;&#125;</span><br><span class="line"></span><br><span class="line">    obj.__proto__ = fn.prototype</span><br><span class="line"></span><br><span class="line">    fn.apply(obj, args)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> obj</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="3、instanceof关键字"><a href="#3、instanceof关键字" class="headerlink" title="3、instanceof关键字"></a>3、instanceof关键字</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">instanceOf</span>(<span class="params">father, child</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> fp = father.prototype</span><br><span class="line">    <span class="keyword">var</span> cp = child.__proto__</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (cp) &#123;</span><br><span class="line">        <span class="keyword">if</span> (cp === fp) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">        cp = cp.__proto__</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="4、实现防抖函数"><a href="#4、实现防抖函数" class="headerlink" title="4、实现防抖函数"></a>4、实现防抖函数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">fn, delay = <span class="number">500</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> timer;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (timer) &#123;</span><br><span class="line">            clearTimeout(timer)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">const</span> args = <span class="built_in">arguments</span>        </span><br><span class="line">        timer = setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            fn.apply(<span class="keyword">this</span>, args) <span class="comment">// 改变this指向为调用debounce所指的对象</span></span><br><span class="line">        &#125;, delay)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="5、实现节流函数"><a href="#5、实现节流函数" class="headerlink" title="5、实现节流函数"></a>5、实现节流函数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">fn, delay = <span class="number">200</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> flag = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!flag) <span class="keyword">return</span></span><br><span class="line">        flag = <span class="literal">false</span></span><br><span class="line">        <span class="keyword">const</span> args = <span class="built_in">arguments</span></span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            fn.apply(<span class="keyword">this</span>, args)</span><br><span class="line">            flag = <span class="literal">true</span></span><br><span class="line">        &#125;, delay)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="6、实现数组去重"><a href="#6、实现数组去重" class="headerlink" title="6、实现数组去重"></a>6、实现数组去重</h3><blockquote>
<p>题目描述：实现一个数组的去重</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第一种：Map记录</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">quchong1</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> newArr = []</span><br><span class="line">    arr.reduce(<span class="function">(<span class="params">pre, next</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!pre.has(next)) &#123;</span><br><span class="line">            pre.set(next, <span class="number">1</span>)</span><br><span class="line">            newArr.push(next)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> pre</span><br><span class="line">    &#125;, <span class="keyword">new</span> <span class="built_in">Map</span>())</span><br><span class="line">    <span class="keyword">return</span> newArr</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第二种：Set去重</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">quchong2</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> [...new <span class="built_in">Set</span>(arr)]</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="7、用setTimeout实现setInterval"><a href="#7、用setTimeout实现setInterval" class="headerlink" title="7、用setTimeout实现setInterval"></a>7、用setTimeout实现setInterval</h3><blockquote>
<p>题目描述：setinterval 用来实现循环定时调用 可能会存在一定的问题 能用 settimeout 解决吗</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mySetTimout</span>(<span class="params">fn, delay</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> timer = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">const</span> interval = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        fn()</span><br><span class="line">        timer = setTimeout(interval, delay)</span><br><span class="line">    &#125;</span><br><span class="line">    setTimeout(interval, delay)</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        cancel: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            clearTimeout(timer)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="keyword">const</span> &#123; cancel &#125; = mySetTimout(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="number">888</span>), <span class="number">1000</span>)</span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    cancel()</span><br><span class="line">&#125;, <span class="number">4000</span>)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="8、用setInterval实现setTimeout"><a href="#8、用setInterval实现setTimeout" class="headerlink" title="8、用setInterval实现setTimeout"></a>8、用setInterval实现setTimeout</h3><blockquote>
<p>题目说明：没有，就是想刁难你</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mySetInterval</span>(<span class="params">fn, delay</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> timer = setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        fn()</span><br><span class="line">        clearInterval(timer)</span><br><span class="line">    &#125;, delay)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line">mySetInterval(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="number">888</span>), <span class="number">1000</span>)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="9、实现一个compose函数"><a href="#9、实现一个compose函数" class="headerlink" title="9、实现一个compose函数"></a>9、实现一个compose函数</h3><blockquote>
<p>题目说明：实现以下效果</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn2</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x + <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn3</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x + <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn4</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x + <span class="number">4</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> a = compose(fn1, fn2, fn3, fn4);</span><br><span class="line"><span class="built_in">console</span>.log(a)</span><br><span class="line"><span class="built_in">console</span>.log(a(<span class="number">1</span>)); <span class="comment">// 1+2+3+4=11</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<blockquote>
<p>实现如下：</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">compose</span>(<span class="params">...fn</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (fn.length === <span class="number">0</span>) <span class="keyword">return</span> <span class="function">(<span class="params">num</span>) =&gt;</span> num</span><br><span class="line">    <span class="keyword">if</span> (fn.length === <span class="number">1</span>) <span class="keyword">return</span> fn[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">return</span> fn.reduce(<span class="function">(<span class="params">pre, next</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="function">(<span class="params">num</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> next(pre(num))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="10、实现一个科里化函数"><a href="#10、实现一个科里化函数" class="headerlink" title="10、实现一个科里化函数"></a>10、实现一个科里化函数</h3><blockquote>
<p>题目要求：</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> add = <span class="function">(<span class="params">a, b, c</span>) =&gt;</span> a + b + c;</span><br><span class="line"><span class="keyword">const</span> a = currying(add, <span class="number">1</span>);</span><br><span class="line"><span class="built_in">console</span>.log(a(<span class="number">2</span>,<span class="number">3</span>)) <span class="comment">// 1 + 2 + 3=6</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<blockquote>
<p>实现如下：</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">currying</span>(<span class="params">fn, ...args1</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 获取fn参数有几个</span></span><br><span class="line">  <span class="keyword">const</span> length = fn.length</span><br><span class="line">  <span class="keyword">let</span> allArgs = [...args1]</span><br><span class="line">  <span class="keyword">const</span> res = <span class="function">(<span class="params">...arg2</span>) =&gt;</span> &#123;</span><br><span class="line">    allArgs = [...allArgs, ...arg2]</span><br><span class="line">    <span class="comment">// 长度相等就返回执行结果</span></span><br><span class="line">    <span class="keyword">if</span> (allArgs.length === length) &#123;</span><br><span class="line">      <span class="keyword">return</span> fn(...allArgs)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 不相等继续返回函数</span></span><br><span class="line">      <span class="keyword">return</span> res</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试：</span></span><br><span class="line"><span class="keyword">const</span> add = <span class="function">(<span class="params">a, b, c</span>) =&gt;</span> a + b + c;</span><br><span class="line"><span class="keyword">const</span> a = currying(add, <span class="number">1</span>);</span><br><span class="line"><span class="built_in">console</span>.log(a(<span class="number">2</span>,<span class="number">3</span>))</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="11、实现一个LRU缓存函数"><a href="#11、实现一个LRU缓存函数" class="headerlink" title="11、实现一个LRU缓存函数"></a>11、实现一个LRU缓存函数</h3><blockquote>
<p>题目说明：</p>
</blockquote>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/866902be3c894edebc9a70446ed664df~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp?" alt="image.png"></p>
<blockquote>
<p>实现如下：</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LRUCache</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(size) &#123;</span><br><span class="line">    <span class="keyword">this</span>.size = size</span><br><span class="line">    <span class="keyword">this</span>.cache = <span class="keyword">new</span> <span class="built_in">Map</span>()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">get</span>(key) &#123;</span><br><span class="line">    <span class="keyword">const</span> hasKey = <span class="keyword">this</span>.cache.has(key)</span><br><span class="line">    <span class="keyword">if</span> (hasKey) &#123;</span><br><span class="line">      <span class="keyword">const</span> val = <span class="keyword">this</span>.cache.get(key)</span><br><span class="line">      <span class="keyword">this</span>.cache.delete(key)</span><br><span class="line">      <span class="keyword">this</span>.cache.set(key, val)</span><br><span class="line">      <span class="keyword">return</span> val</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  put(key, val) &#123;</span><br><span class="line">    <span class="keyword">const</span> hasKey = <span class="keyword">this</span>.cache.has(key)</span><br><span class="line">    <span class="keyword">if</span> (hasKey) &#123;</span><br><span class="line">      <span class="keyword">this</span>.cache.delete(key)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.cache.set(key, val)</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.cache.size &gt; <span class="keyword">this</span>.size) &#123;</span><br><span class="line">      <span class="keyword">this</span>.cache.delete(<span class="keyword">this</span>.cache.keys().next().value)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="12、简单实现-发布订阅模式"><a href="#12、简单实现-发布订阅模式" class="headerlink" title="12、简单实现 发布订阅模式"></a>12、简单实现 发布订阅模式</h3><blockquote>
<p>题目描述:实现一个发布订阅模式拥有<code>on emit once off</code>方法</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EventEmitter</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">this</span>.cache = &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    on(name, fn) &#123;</span><br><span class="line">        <span class="keyword">const</span> tasks = <span class="keyword">this</span>.cache[name]</span><br><span class="line">        <span class="keyword">if</span> (tasks) &#123;</span><br><span class="line">            <span class="keyword">this</span>.cache[name].push(fn)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">this</span>.cache[name] = [fn]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    off(name, fn) &#123;</span><br><span class="line">        <span class="keyword">const</span> tasks = <span class="keyword">this</span>.cache[name]</span><br><span class="line">        <span class="keyword">if</span> (task) &#123;</span><br><span class="line">            <span class="keyword">const</span> index = tasks.findIndex(<span class="function"><span class="params">item</span> =&gt;</span> item === fn)</span><br><span class="line">            <span class="keyword">if</span> (index &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">this</span>.cache[name].splice(index, <span class="number">1</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    emit(name, ...args) &#123;</span><br><span class="line">        <span class="comment">// 复制一份。防止回调里继续on，导致死循环</span></span><br><span class="line">        <span class="keyword">const</span> tasks = <span class="keyword">this</span>.cache[name].slice()</span><br><span class="line">        <span class="keyword">if</span> (tasks) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> fn <span class="keyword">of</span> tasks) &#123;</span><br><span class="line">                fn(...args)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    once(name, cb) &#123;</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">            cb(args)</span><br><span class="line">            <span class="keyword">this</span>.off(name, fn)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.on(name, fn)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="13、实现JSON-parse"><a href="#13、实现JSON-parse" class="headerlink" title="13、实现JSON.parse"></a>13、实现JSON.parse</h3><blockquote>
<p>题目描述：实现<code>JSON.parse</code></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parse</span> (<span class="params">json</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">eval</span>(<span class="string">"("</span> + json + <span class="string">")"</span>);</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="14、将DOM转化成树结构对象"><a href="#14、将DOM转化成树结构对象" class="headerlink" title="14、将DOM转化成树结构对象"></a>14、将DOM转化成树结构对象</h3><blockquote>
<p>题目描述：</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;span&gt;&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">    &lt;ul&gt;</span></span><br><span class="line"><span class="regexp">        &lt;li&gt;&lt;/</span>li&gt;</span><br><span class="line">        &lt;li&gt;&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/u</span>l&gt;</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">将上方的DOM转化为下面的树结构对象</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&#123;</span></span><br><span class="line"><span class="regexp">    tag: 'DIV',</span></span><br><span class="line"><span class="regexp">    children: [</span></span><br><span class="line"><span class="regexp">        &#123; tag: 'SPAN', children: [] &#125;,</span></span><br><span class="line"><span class="regexp">        &#123;</span></span><br><span class="line"><span class="regexp">            tag: 'UL',</span></span><br><span class="line"><span class="regexp">            children: [</span></span><br><span class="line"><span class="regexp">                &#123; tag: 'LI', children: [] &#125;,</span></span><br><span class="line"><span class="regexp">                &#123; tag: 'LI', children: [] &#125;</span></span><br><span class="line"><span class="regexp">            ]</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">    ]</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">复制代码</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>实现如下：</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dom2tree</span>(<span class="params">dom</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> obj = &#123;&#125;</span><br><span class="line">    obj.tag = dom.tagName</span><br><span class="line">    obj.children = []</span><br><span class="line">    dom.childNodes.forEach(<span class="function"><span class="params">child</span> =&gt;</span> obj.children.push(dom2tree(child)))</span><br><span class="line">    <span class="keyword">return</span> obj</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="15、将树结构转换为DOM"><a href="#15、将树结构转换为DOM" class="headerlink" title="15、将树结构转换为DOM"></a>15、将树结构转换为DOM</h3><blockquote>
<p>题目描述：</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    tag: <span class="string">'DIV'</span>,</span><br><span class="line">    children: [</span><br><span class="line">        &#123; <span class="attr">tag</span>: <span class="string">'SPAN'</span>, <span class="attr">children</span>: [] &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            tag: <span class="string">'UL'</span>,</span><br><span class="line">            children: [</span><br><span class="line">                &#123; <span class="attr">tag</span>: <span class="string">'LI'</span>, <span class="attr">children</span>: [] &#125;,</span><br><span class="line">                &#123; <span class="attr">tag</span>: <span class="string">'LI'</span>, <span class="attr">children</span>: [] &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">将上方的树结构对象转化为下面的DOM</span><br><span class="line"></span><br><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;span&gt;&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">    &lt;ul&gt;</span></span><br><span class="line"><span class="regexp">        &lt;li&gt;&lt;/</span>li&gt;</span><br><span class="line">        &lt;li&gt;&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/u</span>l&gt;</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">复制代码</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>实现如下：</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 真正的渲染函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_render</span>(<span class="params">vnode</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 如果是数字类型转化为字符串</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> vnode === <span class="string">"number"</span>) &#123;</span><br><span class="line">    vnode = <span class="built_in">String</span>(vnode);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 字符串类型直接就是文本节点</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> vnode === <span class="string">"string"</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">document</span>.createTextNode(vnode);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 普通DOM</span></span><br><span class="line">  <span class="keyword">const</span> dom = <span class="built_in">document</span>.createElement(vnode.tag);</span><br><span class="line">  <span class="keyword">if</span> (vnode.attrs) &#123;</span><br><span class="line">    <span class="comment">// 遍历属性</span></span><br><span class="line">    <span class="built_in">Object</span>.keys(vnode.attrs).forEach(<span class="function">(<span class="params">key</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> value = vnode.attrs[key];</span><br><span class="line">      dom.setAttribute(key, value);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 子数组进行递归操作</span></span><br><span class="line">  vnode.children.forEach(<span class="function">(<span class="params">child</span>) =&gt;</span> dom.appendChild(_render(child)));</span><br><span class="line">  <span class="keyword">return</span> dom;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="16、判断一个对象有环引用"><a href="#16、判断一个对象有环引用" class="headerlink" title="16、判断一个对象有环引用"></a>16、判断一个对象有环引用</h3><blockquote>
<p>题目描述：验证一个对象有无环引用</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    a: &#123;</span><br><span class="line">        c: [</span><br><span class="line">            <span class="number">1</span>, <span class="number">2</span></span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    b: <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line">obj.a.c.d = obj</span><br><span class="line"><span class="built_in">console</span>.log(cycleDetector(obj)) <span class="comment">// true</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<blockquote>
<p>实现思路：用一个数组存储每一个遍历过的对象，下次找到数组中存在，则说明环引用</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cycleDetector</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> arr = [obj]</span><br><span class="line">    <span class="keyword">let</span> flag = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">cycle</span>(<span class="params">o</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">const</span> keys = <span class="built_in">Object</span>.keys(o)</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">of</span> keys) &#123;</span><br><span class="line">            <span class="keyword">const</span> temp = o[key]</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">typeof</span> temp === <span class="string">'object'</span> &amp;&amp; temp !== <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (arr.indexOf(temp) &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                    flag = <span class="literal">true</span></span><br><span class="line">                    <span class="keyword">return</span></span><br><span class="line">                &#125;</span><br><span class="line">                arr.push(temp)</span><br><span class="line">                cycle(temp)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cycle(obj)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> flag</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="17、计算一个对象的层数"><a href="#17、计算一个对象的层数" class="headerlink" title="17、计算一个对象的层数"></a>17、计算一个对象的层数</h3><blockquote>
<p>题目描述：给你一个对象，统计一下它的层数</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">    a: &#123; <span class="attr">b</span>: [<span class="number">1</span>] &#125;,</span><br><span class="line">    c: &#123; <span class="attr">d</span>: &#123; <span class="attr">e</span>: &#123; <span class="attr">f</span>: <span class="number">1</span> &#125; &#125; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(loopGetLevel(obj)) <span class="comment">// 4</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<blockquote>
<p>实现如下:</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loopGetLevel</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> res = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">computedLevel</span>(<span class="params">obj, level</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> level = level ? level : <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> obj === <span class="string">'object'</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">typeof</span> obj[key] === <span class="string">'object'</span>) &#123;</span><br><span class="line">                    computedLevel(obj[key], level + <span class="number">1</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    res = level + <span class="number">1</span> &gt; res ? level + <span class="number">1</span> : res;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            res = level &gt; res ? level : res;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    computedLevel(obj)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="18、对象的扁平化"><a href="#18、对象的扁平化" class="headerlink" title="18、对象的扁平化"></a>18、对象的扁平化</h3><blockquote>
<p>题目描述：</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  a: &#123;</span><br><span class="line">         b: <span class="number">1</span>,</span><br><span class="line">         c: <span class="number">2</span>,</span><br><span class="line">         d: &#123;<span class="attr">e</span>: <span class="number">5</span>&#125;</span><br><span class="line">     &#125;,</span><br><span class="line">  b: [<span class="number">1</span>, <span class="number">3</span>, &#123;<span class="attr">a</span>: <span class="number">2</span>, <span class="attr">b</span>: <span class="number">3</span>&#125;],</span><br><span class="line">  c: <span class="number">3</span></span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> flatten(obj) 结果返回如下</span><br><span class="line"> <span class="comment">// &#123;</span></span><br><span class="line"> <span class="comment">//  'a.b': 1,</span></span><br><span class="line"> <span class="comment">//  'a.c': 2,</span></span><br><span class="line"> <span class="comment">//  'a.d.e': 5,</span></span><br><span class="line"> <span class="comment">//  'b[0]': 1,</span></span><br><span class="line"> <span class="comment">//  'b[1]': 3,</span></span><br><span class="line"> <span class="comment">//  'b[2].a': 2,</span></span><br><span class="line"> <span class="comment">//  'b[2].b': 3</span></span><br><span class="line"> <span class="comment">//   c: 3</span></span><br><span class="line"> <span class="comment">// &#125;</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<blockquote>
<p>实现如下：</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isObject = <span class="function">(<span class="params">val</span>) =&gt;</span>  <span class="keyword">typeof</span> val === <span class="string">"object"</span> &amp;&amp; val !== <span class="literal">null</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">flatten</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!isObject(obj)) <span class="keyword">return</span></span><br><span class="line">  <span class="keyword">const</span> res = &#123;&#125;</span><br><span class="line">  <span class="keyword">const</span> dfs = <span class="function">(<span class="params">cur, prefix</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (isObject(cur)) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(cur)) &#123;</span><br><span class="line">        cur.forEach(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">          dfs(item, <span class="string">`<span class="subst">$&#123;prefix&#125;</span>[<span class="subst">$&#123;index&#125;</span>]`</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> key <span class="keyword">in</span> cur) &#123;</span><br><span class="line">          dfs(cur[key], <span class="string">`<span class="subst">$&#123;prefix&#125;</span><span class="subst">$&#123;prefix ? <span class="string">'.'</span> : <span class="string">''</span>&#125;</span><span class="subst">$&#123;key&#125;</span>`</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      res[prefix] = cur</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  dfs(obj, <span class="string">''</span>)</span><br><span class="line">  <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="built_in">console</span>.log(flatten(obj))</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="19、实现-a-1-amp-amp-a-2-amp-amp-a-3-为true"><a href="#19、实现-a-1-amp-amp-a-2-amp-amp-a-3-为true" class="headerlink" title="19、实现(a == 1 &amp;&amp; a == 2 &amp;&amp; a == 3)为true"></a>19、实现(a == 1 &amp;&amp; a == 2 &amp;&amp; a == 3)为true</h3><blockquote>
<p>题目描述：<code>实现(a == 1 &amp;&amp; a == 2 &amp;&amp; a == 3)为true</code></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第一种方法</span></span><br><span class="line"><span class="keyword">var</span> a = &#123;</span><br><span class="line">  i: <span class="number">1</span>,</span><br><span class="line">  toString: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a.i++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a == <span class="number">1</span> &amp;&amp; a == <span class="number">2</span> &amp;&amp; a == <span class="number">3</span>) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 第二种方法</span></span><br><span class="line"><span class="keyword">var</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">a.join = a.shift;</span><br><span class="line"><span class="built_in">console</span>.log(a == <span class="number">1</span> &amp;&amp; a == <span class="number">2</span> &amp;&amp; a == <span class="number">3</span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 第三种方法</span></span><br><span class="line"><span class="keyword">var</span> val = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(<span class="built_in">window</span>, <span class="string">'a'</span>, &#123;</span><br><span class="line">    <span class="keyword">get</span>: function () &#123;</span><br><span class="line">        <span class="keyword">return</span> ++val;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(a == <span class="number">1</span> &amp;&amp; a == <span class="number">2</span> &amp;&amp; a == <span class="number">3</span>) <span class="comment">// true</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="20、实现限制并发的Promise调度器"><a href="#20、实现限制并发的Promise调度器" class="headerlink" title="20、实现限制并发的Promise调度器"></a>20、实现限制并发的Promise调度器</h3><blockquote>
<p>题目描述：JS 实现一个带并发限制的异步调度器 Scheduler，保证同时运行的任务最多有两个</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">addTask(<span class="number">1000</span>,<span class="string">"1"</span>);</span><br><span class="line">addTask(<span class="number">500</span>,<span class="string">"2"</span>);</span><br><span class="line">addTask(<span class="number">300</span>,<span class="string">"3"</span>);</span><br><span class="line">addTask(<span class="number">400</span>,<span class="string">"4"</span>);</span><br><span class="line">的输出顺序是：<span class="number">2</span> <span class="number">3</span> <span class="number">1</span> <span class="number">4</span></span><br><span class="line"></span><br><span class="line">整个的完整执行流程：</span><br><span class="line"></span><br><span class="line">一开始<span class="number">1</span>、<span class="number">2</span>两个任务开始执行</span><br><span class="line"><span class="number">500</span>ms时，<span class="number">2</span>任务执行完毕，输出<span class="number">2</span>，任务<span class="number">3</span>开始执行</span><br><span class="line"><span class="number">800</span>ms时，<span class="number">3</span>任务执行完毕，输出<span class="number">3</span>，任务<span class="number">4</span>开始执行</span><br><span class="line"><span class="number">1000</span>ms时，<span class="number">1</span>任务执行完毕，输出<span class="number">1</span>，此时只剩下<span class="number">4</span>任务在执行</span><br><span class="line"><span class="number">1200</span>ms时，<span class="number">4</span>任务执行完毕，输出<span class="number">4</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<blockquote>
<p>实现如下：</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Scheduler</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(limit) &#123;</span><br><span class="line">    <span class="keyword">this</span>.queue = []</span><br><span class="line">    <span class="keyword">this</span>.limit = limit</span><br><span class="line">    <span class="keyword">this</span>.count = <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">  add(time, order) &#123;</span><br><span class="line">    <span class="keyword">const</span> promiseCreator = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="built_in">console</span>.log(order)</span><br><span class="line">          resolve()</span><br><span class="line">        &#125;, time)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.queue.push(promiseCreator)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  taskStart() &#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.limit; i++) &#123;</span><br><span class="line">      <span class="keyword">this</span>.request()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  request() &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.queue.length || <span class="keyword">this</span>.count &gt;= <span class="keyword">this</span>.limit) <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">this</span>.count++</span><br><span class="line">    <span class="keyword">this</span>.queue.shift()().then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>.count--</span><br><span class="line">      <span class="keyword">this</span>.request()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="keyword">const</span> scheduler = <span class="keyword">new</span> Scheduler(<span class="number">2</span>);</span><br><span class="line"><span class="keyword">const</span> addTask = <span class="function">(<span class="params">time, order</span>) =&gt;</span> &#123;</span><br><span class="line">  scheduler.add(time, order);</span><br><span class="line">&#125;;</span><br><span class="line">addTask(<span class="number">1000</span>, <span class="string">"1"</span>);</span><br><span class="line">addTask(<span class="number">500</span>, <span class="string">"2"</span>);</span><br><span class="line">addTask(<span class="number">300</span>, <span class="string">"3"</span>);</span><br><span class="line">addTask(<span class="number">400</span>, <span class="string">"4"</span>);</span><br><span class="line">scheduler.taskStart();</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="21、实现lazyMan函数"><a href="#21、实现lazyMan函数" class="headerlink" title="21、实现lazyMan函数"></a>21、实现lazyMan函数</h3><blockquote>
<p>题目描述：</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">实现一个LazyMan，可以按照以下方式调用:</span><br><span class="line">LazyMan(“Hank”)输出:</span><br><span class="line">Hi! This is Hank!</span><br><span class="line"></span><br><span class="line">LazyMan(“Hank”).sleep(<span class="number">10</span>).eat(“dinner”)输出</span><br><span class="line">Hi! This is Hank!</span><br><span class="line"><span class="comment">//等待10秒..</span></span><br><span class="line">Wake up after <span class="number">10</span></span><br><span class="line">Eat dinner~</span><br><span class="line"></span><br><span class="line">LazyMan(“Hank”).eat(“dinner”).eat(“supper”)输出</span><br><span class="line">Hi This is Hank!</span><br><span class="line">Eat dinner~</span><br><span class="line">Eat supper~</span><br><span class="line"></span><br><span class="line">LazyMan(“Hank”).eat(“supper”).sleepFirst(<span class="number">5</span>)输出</span><br><span class="line"><span class="comment">//等待5秒</span></span><br><span class="line">Wake up after <span class="number">5</span></span><br><span class="line">Hi This is Hank!</span><br><span class="line">Eat supper</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<blockquote>
<p>实现如下：</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_LazyMan</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name) &#123;</span><br><span class="line">    <span class="keyword">this</span>.tasks = []</span><br><span class="line">    <span class="keyword">const</span> task = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`Hi! This is <span class="subst">$&#123;name&#125;</span>`</span>)</span><br><span class="line">      <span class="keyword">this</span>.next()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.tasks.push(task)</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>.next()</span><br><span class="line">    &#125;, <span class="number">0</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  next() &#123;</span><br><span class="line">    <span class="keyword">const</span> task = <span class="keyword">this</span>.tasks.shift()</span><br><span class="line">    task &amp;&amp; task()</span><br><span class="line">  &#125;</span><br><span class="line">  sleep(time) &#123;</span><br><span class="line">    <span class="keyword">this</span>.sleepWrapper(time, <span class="literal">false</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span></span><br><span class="line">  &#125;</span><br><span class="line">  sleepFirst(time) &#123;</span><br><span class="line">    <span class="keyword">this</span>.sleepWrapper(time, <span class="literal">true</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span></span><br><span class="line">  &#125;</span><br><span class="line">  sleepWrapper(time, first) &#123;</span><br><span class="line">    <span class="keyword">const</span> task = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`Wake up after <span class="subst">$&#123;time&#125;</span>`</span>)</span><br><span class="line">        <span class="keyword">this</span>.next()</span><br><span class="line">      &#125;, time * <span class="number">1000</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (first) &#123;</span><br><span class="line">      <span class="keyword">this</span>.tasks.unshift(task)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>.tasks.push(task)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  eat(food) &#123;</span><br><span class="line">    <span class="keyword">const</span> task = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`Eat <span class="subst">$&#123;food&#125;</span>`</span>);</span><br><span class="line">      <span class="keyword">this</span>.next();</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">this</span>.tasks.push(task);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="keyword">const</span> lazyMan = <span class="function">(<span class="params">name</span>) =&gt;</span> <span class="keyword">new</span> _LazyMan(name)</span><br><span class="line"></span><br><span class="line">lazyMan(<span class="string">'Hank'</span>).sleep(<span class="number">1</span>).eat(<span class="string">'dinner'</span>)</span><br><span class="line"></span><br><span class="line">lazyMan(<span class="string">'Hank'</span>).eat(<span class="string">'dinner'</span>).eat(<span class="string">'supper'</span>)</span><br><span class="line"></span><br><span class="line">lazyMan(<span class="string">'Hank'</span>).eat(<span class="string">'supper'</span>).sleepFirst(<span class="number">5</span>)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="22、实现add函数"><a href="#22、实现add函数" class="headerlink" title="22、实现add函数"></a>22、实现add函数</h3><blockquote>
<p>题目描述：实现一个 add 方法 使计算结果能够满足如下预期：</p>
<ul>
<li>add(1)(2)(3)()=6</li>
<li>add(1,2,3)(4)()=10</li>
</ul>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">...args1</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> allArgs = [...args1]</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">...args2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!args2.length) <span class="keyword">return</span> fn.toString()</span><br><span class="line">    allArgs = [...allArgs, ...args2]</span><br><span class="line">    <span class="keyword">return</span> fn</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  fn.toString = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> allArgs.reduce(<span class="function">(<span class="params">pre, next</span>) =&gt;</span> pre + next)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> fn</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">1</span>)(<span class="number">2</span>)(<span class="number">3</span>)())</span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">1</span>, <span class="number">2</span>)(<span class="number">3</span>)())</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="23、实现一个合格的深拷贝"><a href="#23、实现一个合格的深拷贝" class="headerlink" title="23、实现一个合格的深拷贝"></a>23、实现一个合格的深拷贝</h3><p>推荐看我这篇：<a href="https://juejin.cn/post/7017991655009566728" target="_blank" rel="noopener">深拷贝有这5个段位，你只是青铜段位？还想涨薪？</a></p>
<h3 id="24、实现-Promise"><a href="#24、实现-Promise" class="headerlink" title="24、实现 Promise"></a>24、实现 Promise</h3><p>推荐看我这篇：<a href="https://juejin.cn/post/6994594642280857630" target="_blank" rel="noopener">看了就会，手写Promise原理，最通俗易懂的版本！！！</a>【阅读：1.3w，点赞：460】</p>
<h3 id="25、实现-async-await"><a href="#25、实现-async-await" class="headerlink" title="25、实现 async/await"></a>25、实现 async/await</h3><p>推荐看我这篇：<a href="https://juejin.cn/post/7007031572238958629" target="_blank" rel="noopener">7张图，20分钟就能搞定的async/await原理！为什么要拖那么久？</a>【阅读：2.15w，点赞：460】</p>
<h2 id="Array篇"><a href="#Array篇" class="headerlink" title="Array篇"></a>Array篇</h2><p>定义一个测试数组</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> players = [</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">'科比'</span>, <span class="attr">num</span>: <span class="number">24</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">'詹姆斯'</span>, <span class="attr">num</span>: <span class="number">23</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">'保罗'</span>, <span class="attr">num</span>: <span class="number">3</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">'威少'</span>, <span class="attr">num</span>: <span class="number">0</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">'杜兰特'</span>, <span class="attr">num</span>: <span class="number">35</span> &#125;</span><br><span class="line">]</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="26、forEach"><a href="#26、forEach" class="headerlink" title="26、forEach"></a>26、forEach</h3><p>参数代表含义</p>
<ul>
<li>item：遍历项</li>
<li>index：遍历项的索引</li>
<li>arr：数组本身</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.sx_forEach = <span class="function"><span class="keyword">function</span> (<span class="params">callback</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.length; i++) &#123;</span><br><span class="line">        callback(<span class="keyword">this</span>[i], i, <span class="keyword">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">players.sx_forEach(<span class="function">(<span class="params">item, index, arr</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(item, index)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// &#123; name: '科比', num: 24 &#125; 0</span></span><br><span class="line"><span class="comment">// &#123; name: '詹姆斯', num: 23 &#125; 1</span></span><br><span class="line"><span class="comment">// &#123; name: '保罗', num: 3 &#125; 2</span></span><br><span class="line"><span class="comment">// &#123; name: '威少', num: 0 &#125; 3</span></span><br><span class="line"><span class="comment">// &#123; name: '杜兰特', num: 35 &#125; 4</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="27、map"><a href="#27、map" class="headerlink" title="27、map"></a>27、map</h3><p>参数代表含义</p>
<ul>
<li>item：遍历项</li>
<li>index：遍历项的索引</li>
<li>arr：数组本身</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.sx_map = <span class="function"><span class="keyword">function</span> (<span class="params">callback</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> res = []</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.length; i++) &#123;</span><br><span class="line">        res.push(callback(<span class="keyword">this</span>[i], i, <span class="keyword">this</span>))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(players.sx_map(<span class="function">(<span class="params">item, index</span>) =&gt;</span> <span class="string">`<span class="subst">$&#123;item.name&#125;</span>--<span class="subst">$&#123;item.num&#125;</span>--<span class="subst">$&#123;index&#125;</span>`</span>))</span><br><span class="line"><span class="comment">// [ '科比--24--0', '詹姆斯--23--1', '保罗--3--2', '威少--0--3', '杜兰特--35--4' ]</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="28、filter"><a href="#28、filter" class="headerlink" title="28、filter"></a>28、filter</h3><p>参数代表含义</p>
<ul>
<li>item：遍历项</li>
<li>index：遍历项的索引</li>
<li>arr：数组本身</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.sx_filter = <span class="function"><span class="keyword">function</span> (<span class="params">callback</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> res = []</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.length; i++) &#123;</span><br><span class="line">        callback(<span class="keyword">this</span>[i], i, <span class="keyword">this</span>) &amp;&amp; res.push(<span class="keyword">this</span>[i])</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(players.sx_filter(<span class="function"><span class="params">item</span> =&gt;</span> item.num &gt;= <span class="number">23</span>))</span><br><span class="line"><span class="comment">// [</span></span><br><span class="line"><span class="comment">//     &#123; name: '科比', num: 24 &#125;,</span></span><br><span class="line"><span class="comment">//     &#123; name: '詹姆斯', num: 23 &#125;,</span></span><br><span class="line"><span class="comment">//     &#123; name: '杜兰特', num: 35 &#125;</span></span><br><span class="line"><span class="comment">// ]</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="29、every"><a href="#29、every" class="headerlink" title="29、every"></a>29、every</h3><p>参数代表含义</p>
<ul>
<li>item：遍历项</li>
<li>index：遍历项的索引</li>
<li>arr：数组本身</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.sx_every = <span class="function"><span class="keyword">function</span> (<span class="params">callback</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> flag = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.length; i++) &#123;</span><br><span class="line">        flag = callback(<span class="keyword">this</span>[i], i, <span class="keyword">this</span>)</span><br><span class="line">        <span class="keyword">if</span> (!flag) <span class="keyword">break</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> flag</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(players.sx_every(<span class="function"><span class="params">item</span> =&gt;</span> item.num &gt;= <span class="number">23</span>)) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(players.sx_every(<span class="function"><span class="params">item</span> =&gt;</span> item.num &gt;= <span class="number">0</span>)) <span class="comment">// true</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="30、some"><a href="#30、some" class="headerlink" title="30、some"></a>30、some</h3><p>参数代表含义</p>
<ul>
<li>item：遍历项</li>
<li>index：遍历项的索引</li>
<li>arr：数组本身</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.sx_some = <span class="function"><span class="keyword">function</span> (<span class="params">callback</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> flag = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.length; i++) &#123;</span><br><span class="line">        flag = callback(<span class="keyword">this</span>[i], i, <span class="keyword">this</span>)</span><br><span class="line">        <span class="keyword">if</span> (flag) <span class="keyword">break</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> flag</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(players.sx_some(<span class="function"><span class="params">item</span> =&gt;</span> item.num &gt;= <span class="number">23</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(players.sx_some(<span class="function"><span class="params">item</span> =&gt;</span> item.num &gt;= <span class="number">50</span>)) <span class="comment">// false</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="31、reduce"><a href="#31、reduce" class="headerlink" title="31、reduce"></a>31、reduce</h3><p>参数代表含义</p>
<ul>
<li>pre：前一项</li>
<li>next：下一项</li>
<li>index：当前索引</li>
<li>arr：数组本身</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.sx_reduce = <span class="function"><span class="keyword">function</span> (<span class="params">callback, ...args</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> start = <span class="number">0</span>, pre</span><br><span class="line">  <span class="keyword">if</span> (args.length) &#123;</span><br><span class="line">      pre = args[<span class="number">0</span>]</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      pre = <span class="keyword">this</span>[<span class="number">0</span>]</span><br><span class="line">      start = <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = start; i &lt; <span class="keyword">this</span>.length; i++) &#123;</span><br><span class="line">      pre = callback(pre, <span class="keyword">this</span>[i], i, <span class="keyword">this</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> pre</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 计算所有num相加</span></span><br><span class="line"><span class="keyword">const</span> sum = players.sx_reduce(<span class="function">(<span class="params">pre, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> pre + next.num</span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"><span class="built_in">console</span>.log(sum) <span class="comment">// 85</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="32、findIndex"><a href="#32、findIndex" class="headerlink" title="32、findIndex"></a>32、findIndex</h3><p>参数代表含义</p>
<ul>
<li>item：遍历项</li>
<li>index：遍历项的索引</li>
<li>arr：数组本身</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.sx_findIndex = <span class="function"><span class="keyword">function</span> (<span class="params">callback</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (callback(<span class="keyword">this</span>[i], i, <span class="keyword">this</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> i</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(players.sx_findIndex(<span class="function"><span class="params">item</span> =&gt;</span> item.name === <span class="string">'科比'</span>)) <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">console</span>.log(players.sx_findIndex(<span class="function"><span class="params">item</span> =&gt;</span> item.name === <span class="string">'安东尼'</span>)) <span class="comment">// -1</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="33、find"><a href="#33、find" class="headerlink" title="33、find"></a>33、find</h3><p>参数代表含义</p>
<ul>
<li>item：遍历项</li>
<li>index：遍历项的索引</li>
<li>arr：数组本身</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.sx_find = <span class="function"><span class="keyword">function</span> (<span class="params">callback</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (callback(<span class="keyword">this</span>[i], i, <span class="keyword">this</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>[i]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">undefined</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(players.sx_find(<span class="function"><span class="params">item</span> =&gt;</span> item.name === <span class="string">'科比'</span>)) <span class="comment">// &#123; name: '科比', num: 24 &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(players.sx_find(<span class="function"><span class="params">item</span> =&gt;</span> item.name === <span class="string">'安东尼'</span>)) <span class="comment">// undefined</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="34、fill"><a href="#34、fill" class="headerlink" title="34、fill"></a>34、fill</h3><p>用处：填充数组</p>
<p>参数代表含义</p>
<ul>
<li>initValue：填充的值</li>
<li>start：开始填充索引，默认0</li>
<li>end：结束填充索引，默认length</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.sx_fill = <span class="function"><span class="keyword">function</span> (<span class="params">value, start = <span class="number">0</span>, end</span>) </span>&#123;</span><br><span class="line">  end = end || <span class="keyword">this</span>.length</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = start; i &lt; end; i++) &#123;</span><br><span class="line">      <span class="keyword">this</span>[i] = value</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(players.sx_fill(<span class="string">'林三心'</span>, <span class="number">1</span>, <span class="number">3</span>))</span><br><span class="line"><span class="comment">// [</span></span><br><span class="line"><span class="comment">//     &#123; name: '科比', num: 24 &#125;,</span></span><br><span class="line"><span class="comment">//     '林三心',</span></span><br><span class="line"><span class="comment">//     '林三心',</span></span><br><span class="line"><span class="comment">//     '林三心',</span></span><br><span class="line"><span class="comment">//     &#123; name: '杜兰特', num: 35 &#125;</span></span><br><span class="line"><span class="comment">// ]</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="35、includes"><a href="#35、includes" class="headerlink" title="35、includes"></a>35、includes</h3><p>用处：查找元素，查到返回<code>true</code>，反之返回<code>false</code>，可查找<code>NaN</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.sx_includes = <span class="function"><span class="keyword">function</span> (<span class="params">value, start = <span class="number">0</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (start &lt; <span class="number">0</span>) start = <span class="keyword">this</span>.length + start</span><br><span class="line">    <span class="keyword">const</span> <span class="built_in">isNaN</span> = <span class="built_in">Number</span>.isNaN(value)</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = start; i &lt; <span class="keyword">this</span>.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>[i] === value || (<span class="built_in">isNaN</span> &amp;&amp; <span class="built_in">Number</span>.isNaN(<span class="keyword">this</span>[i])) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].sx_includes(<span class="number">2</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="literal">NaN</span>].sx_includes(<span class="literal">NaN</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].sx_includes(<span class="number">1</span>, <span class="number">1</span>)) <span class="comment">// false</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="36、join"><a href="#36、join" class="headerlink" title="36、join"></a>36、join</h3><p>用处：将数组用分隔符拼成字符串，分隔符默认为<code>,</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.sx_join = <span class="function"><span class="keyword">function</span> (<span class="params">s = <span class="string">','</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> str = <span class="string">''</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.length; i++) &#123;</span><br><span class="line">        str = i === <span class="number">0</span> ? <span class="string">`<span class="subst">$&#123;str&#125;</span><span class="subst">$&#123;<span class="keyword">this</span>[i]&#125;</span>`</span> : <span class="string">`<span class="subst">$&#123;str&#125;</span><span class="subst">$&#123;s&#125;</span><span class="subst">$&#123;<span class="keyword">this</span>[i]&#125;</span>`</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> str</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].sx_join()) <span class="comment">// 1,2,3</span></span><br><span class="line"><span class="built_in">console</span>.log([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].sx_join(<span class="string">'*'</span>)) <span class="comment">// 1*2*3</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="37、flat"><a href="#37、flat" class="headerlink" title="37、flat"></a>37、flat</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.sx_flat = <span class="function"><span class="keyword">function</span> (<span class="params">num = Infinity</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> arr = <span class="keyword">this</span></span><br><span class="line">  <span class="keyword">let</span> i = <span class="number">0</span></span><br><span class="line">  <span class="keyword">while</span> (arr.some(<span class="function"><span class="params">item</span> =&gt;</span> <span class="built_in">Array</span>.isArray(item))) &#123;</span><br><span class="line">      arr = [].concat(...arr)</span><br><span class="line">      i++</span><br><span class="line">      <span class="keyword">if</span> (i &gt;= num) <span class="keyword">break</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> testArr = [<span class="number">1</span>, [<span class="number">2</span>, <span class="number">3</span>, [<span class="number">4</span>, <span class="number">5</span>]], [<span class="number">8</span>, <span class="number">9</span>]]</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(testArr.sx_flat(<span class="number">1</span>))</span><br><span class="line"><span class="comment">// [1, 2, 3, 4, 5, 8, 9]</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="38、splice"><a href="#38、splice" class="headerlink" title="38、splice"></a>38、splice</h3><p>难点</p>
<ul>
<li>截取长度和替换长度的比较，不同情况</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.sx_splice = <span class="function"><span class="keyword">function</span> (<span class="params">start, length, ...values</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (length === <span class="number">0</span>) <span class="keyword">return</span> []</span><br><span class="line">  length = start + length &gt; <span class="keyword">this</span>.length - <span class="number">1</span> ? <span class="keyword">this</span>.length - start : length</span><br><span class="line">  <span class="built_in">console</span>.log(length)</span><br><span class="line">  <span class="keyword">const</span> res = [], tempArr = [...this]</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = start; i &lt; start + values.length; i++) &#123;</span><br><span class="line">    <span class="keyword">this</span>[i] = values[i - start]</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">this</span>.length = start + values.length</span><br><span class="line">  <span class="keyword">if</span> (values.length &lt; length) &#123;</span><br><span class="line">    <span class="keyword">const</span> cha = length - values.length</span><br><span class="line">    <span class="built_in">console</span>.log(cha)</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = start + values.length; i &lt; tempArr.length; i++) &#123;</span><br><span class="line">      <span class="keyword">this</span>[i] = tempArr[i + cha]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.length = <span class="keyword">this</span>.length - cha </span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (values.length &gt; length) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = start + length; i &lt; tempArr.length; i++) &#123;</span><br><span class="line">      <span class="keyword">this</span>.push(tempArr[i])</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = start; i &lt; start + length; i++) &#123;</span><br><span class="line">    res.push(tempArr[i])</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h2 id="Object篇"><a href="#Object篇" class="headerlink" title="Object篇"></a>Object篇</h2><p>定义一个测试对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">    name: <span class="string">'林三心'</span>,</span><br><span class="line">    age: <span class="number">22</span>,</span><br><span class="line">    gender: <span class="string">'男'</span></span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="39、entries"><a href="#39、entries" class="headerlink" title="39、entries"></a>39、entries</h3><p>用处：将对象转成键值对数组</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.prototype.sx_entries = <span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> res = []</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">        obj.hasOwnProperty(key) &amp;&amp; res.push([key, obj[key]])</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.sx_entries(obj))</span><br><span class="line"><span class="comment">// [ [ 'name', '林三心' ], [ 'age', 22 ], [ 'gender', '男' ] ]</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="40、fromEntries"><a href="#40、fromEntries" class="headerlink" title="40、fromEntries"></a>40、fromEntries</h3><p>用处：跟<code>entries</code>相反，将键值对数组转成对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.prototype.sx_fromEntries = <span class="function"><span class="keyword">function</span> (<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> obj = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">        <span class="keyword">const</span> [key, value] = arr[i]</span><br><span class="line">        obj[key] = value</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> obj</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.sx_fromEntries([[<span class="string">'name'</span>, <span class="string">'林三心'</span>], [<span class="string">'age'</span>, <span class="number">22</span>], [<span class="string">'gender'</span>, <span class="string">'男'</span>]]))</span><br><span class="line"><span class="comment">// &#123; name: '林三心', age: 22, gender: '男' &#125;</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="41、keys"><a href="#41、keys" class="headerlink" title="41、keys"></a>41、keys</h3><p>用处：将对象的key转成一个数组合集</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.prototype.sx_keys = <span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> keys = []</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">        obj.hasOwnProperty(key) &amp;&amp; res.push(key)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> keys</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.keys(obj))</span><br><span class="line"><span class="comment">// [ 'name', 'age', 'gender' ]</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="42、values"><a href="#42、values" class="headerlink" title="42、values"></a>42、values</h3><p>用处：将对象的所有值转成数组合集</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.prototype.sx_values = <span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> values = []</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">        obj.hasOwnProperty(key) &amp;&amp; values.push(obj[key])</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> values</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.sx_values(obj))</span><br><span class="line"><span class="comment">// [ '林三心', 22, '男' ]</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="43、instanceOf"><a href="#43、instanceOf" class="headerlink" title="43、instanceOf"></a>43、instanceOf</h3><p>用处：A instanceOf B，判断A是否经过B的原型链</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">instanceOf</span>(<span class="params">father, child</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> fp = father.prototype</span><br><span class="line">    <span class="keyword">var</span> cp = child.__proto__</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (cp) &#123;</span><br><span class="line">        <span class="keyword">if</span> (cp === fp) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">        cp = cp.__proto__</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> sx = <span class="keyword">new</span> Person(<span class="string">'林三心'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(instanceOf(Person, sx)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(instanceOf(Person, sx2)) <span class="comment">// false</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="44、is"><a href="#44、is" class="headerlink" title="44、is"></a>44、is</h3><p>用处：Object.is(a, b)，判断a是否等于b</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.prototype.sx_is = <span class="function"><span class="keyword">function</span> (<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x === y) &#123;</span><br><span class="line">        <span class="comment">// 防止 -0 和 +0</span></span><br><span class="line">        <span class="keyword">return</span> x !== <span class="number">0</span> || <span class="number">1</span> / x === <span class="number">1</span> / y</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 防止NaN</span></span><br><span class="line">    <span class="keyword">return</span> x !== x &amp;&amp; y !== y</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> a = &#123; <span class="attr">name</span>: <span class="string">'林三心'</span> &#125;</span><br><span class="line"><span class="keyword">const</span> b = a</span><br><span class="line"><span class="keyword">const</span> c = &#123; <span class="attr">name</span>: <span class="string">'林三心'</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.sx_is(a, b)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.sx_is(a, c)) <span class="comment">// false</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="45、Object-assign"><a href="#45、Object-assign" class="headerlink" title="45、Object.assign"></a>45、Object.assign</h3><p>难点</p>
<ul>
<li>assign接收多个对象，并将多个对象合成一个对象</li>
<li>这些对象如果有重名属性，以后来的对象属性值为准</li>
<li>assign返回一个对象，<code>这个对象 === 第一个对象</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.prototype.sx_assign = <span class="function"><span class="keyword">function</span> (<span class="params">target, ...args</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (target === <span class="literal">null</span> || target === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">'Cannot convert undefined or null to object'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    target = <span class="built_in">Object</span>(target)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> nextObj <span class="keyword">of</span> args) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> nextObj) &#123;</span><br><span class="line">            nextObj.hasOwnProperty(key) &amp;&amp; (target[key] = nextObj[key])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> target</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> testa = &#123; <span class="attr">name</span>: <span class="string">'林三心'</span> &#125;</span><br><span class="line"><span class="keyword">const</span> testb = &#123; <span class="attr">name</span>: <span class="string">'sunshine_lin'</span>, <span class="attr">age</span>: <span class="number">22</span> &#125;</span><br><span class="line"><span class="keyword">const</span> testc = &#123; <span class="attr">age</span>: <span class="number">18</span>, <span class="attr">gender</span>: <span class="string">'男'</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> testd = <span class="built_in">Object</span>.sx_assign(testa, testb, testc)</span><br><span class="line"><span class="built_in">console</span>.log(testd) <span class="comment">// &#123; name: 'sunshine_lin', age: 18, gender: '男' &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(testa === testd) <span class="comment">// true</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h2 id="Function篇"><a href="#Function篇" class="headerlink" title="Function篇"></a>Function篇</h2><h3 id="46、call"><a href="#46、call" class="headerlink" title="46、call"></a>46、call</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.sx_call = <span class="function"><span class="keyword">function</span> (<span class="params">obj, ...args</span>) </span>&#123;</span><br><span class="line">    obj = obj || <span class="built_in">window</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Symbol是唯一的，防止重名key</span></span><br><span class="line">    <span class="keyword">const</span> fn = <span class="built_in">Symbol</span>()</span><br><span class="line">    obj[fn] = <span class="keyword">this</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 执行，返回执行值</span></span><br><span class="line">    <span class="keyword">return</span> obj[fn](...args)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> testobj = &#123;</span><br><span class="line">    name: <span class="string">'林三心'</span>,</span><br><span class="line">    testFn(age) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span><span class="subst">$&#123;age&#125;</span>岁了`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> testobj2 = &#123;</span><br><span class="line">    name: <span class="string">'sunshine_lin'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">testobj.testFn.sx_call(testobj2, <span class="number">22</span>) <span class="comment">// sunshine_lin22岁了</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="47、apply"><a href="#47、apply" class="headerlink" title="47、apply"></a>47、apply</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.sx_apply = <span class="function"><span class="keyword">function</span> (<span class="params">obj, args</span>) </span>&#123;</span><br><span class="line">    obj = obj || <span class="built_in">window</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Symbol是唯一的，防止重名key</span></span><br><span class="line">    <span class="keyword">const</span> fn = <span class="built_in">Symbol</span>()</span><br><span class="line">    obj[fn] = <span class="keyword">this</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 执行，返回执行值</span></span><br><span class="line">    <span class="keyword">return</span> obj[fn](...args)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> testobj = &#123;</span><br><span class="line">    name: <span class="string">'林三心'</span>,</span><br><span class="line">    testFn(age) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span><span class="subst">$&#123;age&#125;</span>岁了`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> testobj2 = &#123;</span><br><span class="line">    name: <span class="string">'sunshine_lin'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">testobj.testFn.sx_apply(testobj2, [<span class="number">22</span>]) <span class="comment">// sunshine_lin22岁了</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="48、Function-prototype-bind"><a href="#48、Function-prototype-bind" class="headerlink" title="48、Function.prototype.bind"></a>48、Function.prototype.bind</h3><p>难点：</p>
<ul>
<li>bind是返回一个函数，而不是执行结果</li>
<li>bind返回的函数，拿来当做构造函数，该怎么处理</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.sx_bind = <span class="function"><span class="keyword">function</span> (<span class="params">obj, ...args</span>) </span>&#123;</span><br><span class="line">    obj = obj || <span class="built_in">window</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Symbol是唯一的，防止重名key</span></span><br><span class="line">    <span class="keyword">const</span> fn = <span class="built_in">Symbol</span>()</span><br><span class="line">    obj[fn] = <span class="keyword">this</span></span><br><span class="line">    <span class="keyword">const</span> _this = <span class="keyword">this</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> res = <span class="function"><span class="keyword">function</span> (<span class="params">...innerArgs</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>, _this)</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span> <span class="keyword">instanceof</span> _this) &#123;</span><br><span class="line">            <span class="keyword">this</span>[fn] = _this</span><br><span class="line">            <span class="keyword">this</span>[fn](...[...args, ...innerArgs])</span><br><span class="line">            <span class="keyword">delete</span> <span class="keyword">this</span>[fn]</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            obj[fn](...[...args, ...innerArgs])</span><br><span class="line">            <span class="keyword">delete</span> obj[fn]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    res.prototype = <span class="built_in">Object</span>.create(<span class="keyword">this</span>.prototype)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h2 id="String篇"><a href="#String篇" class="headerlink" title="String篇"></a>String篇</h2><h3 id="49、slice"><a href="#49、slice" class="headerlink" title="49、slice"></a>49、slice</h3><p>参数代表含义</p>
<ul>
<li>start：开始截取的字符索引(包含此字符)</li>
<li>end：结束截取的字符索引(不包含此字符) 注意点</li>
<li>start &gt; end：返回空字符串</li>
<li>start &lt; 0：<code>start = 数组长度 + start</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>.prototype.sx_slice = <span class="function"><span class="keyword">function</span> (<span class="params">start = <span class="number">0</span>, end</span>) </span>&#123;</span><br><span class="line">    start = start &lt; <span class="number">0</span> ? <span class="keyword">this</span>.length + start : start</span><br><span class="line">    end = !end &amp;&amp; end !== <span class="number">0</span> ? <span class="keyword">this</span>.length : end</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (start &gt;= end) <span class="keyword">return</span> <span class="string">''</span></span><br><span class="line">    <span class="keyword">let</span> str = <span class="string">''</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = start; i &lt; end; i++) &#123;</span><br><span class="line">        str += <span class="keyword">this</span>[i]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> str</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(str.sx_slice(<span class="number">2</span>)) <span class="comment">// nshine_lin</span></span><br><span class="line"><span class="built_in">console</span>.log(str.sx_slice(<span class="number">-2</span>)) <span class="comment">// in</span></span><br><span class="line"><span class="built_in">console</span>.log(str.sx_slice(<span class="number">-9</span>, <span class="number">10</span>)) <span class="comment">// shine_l</span></span><br><span class="line"><span class="built_in">console</span>.log(str.sx_slice(<span class="number">5</span>, <span class="number">1</span>)) <span class="comment">// ''</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="50、substr"><a href="#50、substr" class="headerlink" title="50、substr"></a>50、substr</h3><p>参数代表含义</p>
<ul>
<li>start：开始截取的字符索引(包含此字符)</li>
<li>length：截取的长度 注意点</li>
<li>start &lt; 0：<code>start = 数组长度 + start</code></li>
<li>length超出所能截取范围，需要做处理</li>
<li>length &lt; 0：返回空字符串</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>.prototype.sx_substr = <span class="function"><span class="keyword">function</span> (<span class="params">start = <span class="number">0</span>, length</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (length &lt; <span class="number">0</span>) <span class="keyword">return</span> <span class="string">''</span></span><br><span class="line"></span><br><span class="line">    start = start &lt; <span class="number">0</span> ? <span class="keyword">this</span>.length + start : start</span><br><span class="line">    length = (!length &amp;&amp; length !== <span class="number">0</span>) || length &gt; <span class="keyword">this</span>.length - start ? <span class="keyword">this</span>.length : start + length</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> str = <span class="string">''</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = start; i &lt; length; i++) &#123;</span><br><span class="line">        str += <span class="keyword">this</span>[i]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> str</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(str.sx_substr(<span class="number">3</span>)) <span class="comment">// shine_lin</span></span><br><span class="line"><span class="built_in">console</span>.log(str.sx_substr(<span class="number">3</span>, <span class="number">3</span>)) <span class="comment">// shi</span></span><br><span class="line"><span class="built_in">console</span>.log(str.sx_substr(<span class="number">5</span>, <span class="number">300</span>)) <span class="comment">// ine_lin</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="51、substring"><a href="#51、substring" class="headerlink" title="51、substring"></a>51、substring</h3><p>功能与<code>slice</code>大致相同</p>
<p>区别之处</p>
<ul>
<li>start &gt; end：互换值</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>.prototype.sx_sunstring = <span class="function"><span class="keyword">function</span> (<span class="params">start = <span class="number">0</span>, end</span>) </span>&#123;</span><br><span class="line">    start = start &lt; <span class="number">0</span> ? <span class="keyword">this</span>.length + start : start</span><br><span class="line">    end = !end &amp;&amp; end !== <span class="number">0</span> ? <span class="keyword">this</span>.length : end</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (start &gt;= end) [start, end] = [end, start]</span><br><span class="line">    <span class="keyword">let</span> str = <span class="string">''</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = start; i &lt; end; i++) &#123;</span><br><span class="line">        str += <span class="keyword">this</span>[i]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> str</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(str.sx_sunstring(<span class="number">2</span>)) <span class="comment">// nshine_lin</span></span><br><span class="line"><span class="built_in">console</span>.log(str.sx_sunstring(<span class="number">-2</span>)) <span class="comment">// in</span></span><br><span class="line"><span class="built_in">console</span>.log(str.sx_sunstring(<span class="number">-9</span>, <span class="number">10</span>)) <span class="comment">// shine_l</span></span><br><span class="line"><span class="built_in">console</span>.log(str.sx_sunstring(<span class="number">5</span>, <span class="number">1</span>)) <span class="comment">// unsh</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h2 id="Promise篇"><a href="#Promise篇" class="headerlink" title="Promise篇"></a>Promise篇</h2><h3 id="52、all"><a href="#52、all" class="headerlink" title="52、all"></a>52、all</h3><ul>
<li>接收一个Promise数组，数组中如有非Promise项，则此项当做成功</li>
<li>如果所有Promise都成功，则返回成功结果数组</li>
<li>如果有一个Promise失败，则返回这个失败结果</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">all</span>(<span class="params">promises</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">const</span> result = []</span><br><span class="line">        <span class="keyword">let</span> count = <span class="number">0</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> MyPromise(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> addData = <span class="function">(<span class="params">index, value</span>) =&gt;</span> &#123;</span><br><span class="line">                result[index] = value</span><br><span class="line">                count++</span><br><span class="line">                <span class="keyword">if</span> (count === promises.length) resolve(result)</span><br><span class="line">            &#125;</span><br><span class="line">            promises.forEach(<span class="function">(<span class="params">promise, index</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (promise <span class="keyword">instanceof</span> MyPromise) &#123;</span><br><span class="line">                    promise.then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                        addData(index, res)</span><br><span class="line">                    &#125;, err =&gt; reject(err))</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    addData(index, promise)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="53、race"><a href="#53、race" class="headerlink" title="53、race"></a>53、race</h3><ul>
<li>接收一个Promise数组，数组中如有非Promise项，则此项当做成功</li>
<li>哪个Promise最快得到结果，就返回那个结果，无论成功失败</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">race</span>(<span class="params">promises</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> MyPromise(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            promises.forEach(<span class="function"><span class="params">promise</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (promise <span class="keyword">instanceof</span> MyPromise) &#123;</span><br><span class="line">                    promise.then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                        resolve(res)</span><br><span class="line">                    &#125;, err =&gt; &#123;</span><br><span class="line">                        reject(err)</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    resolve(promise)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="54、allSettled"><a href="#54、allSettled" class="headerlink" title="54、allSettled"></a>54、allSettled</h3><ul>
<li>接收一个Promise数组，数组中如有非Promise项，则此项当做成功</li>
<li>把每一个Promise的结果，集合成数组，返回</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">allSettled</span>(<span class="params">promises</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> res = []</span><br><span class="line">            <span class="keyword">let</span> count = <span class="number">0</span></span><br><span class="line">            <span class="keyword">const</span> addData = <span class="function">(<span class="params">status, value, i</span>) =&gt;</span> &#123;</span><br><span class="line">                res[i] = &#123;</span><br><span class="line">                    status,</span><br><span class="line">                    value</span><br><span class="line">                &#125;</span><br><span class="line">                count++</span><br><span class="line">                <span class="keyword">if</span> (count === promises.length) &#123;</span><br><span class="line">                    resolve(res)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            promises.forEach(<span class="function">(<span class="params">promise, i</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (promise <span class="keyword">instanceof</span> MyPromise) &#123;</span><br><span class="line">                    promise.then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                        addData(<span class="string">'fulfilled'</span>, res, i)</span><br><span class="line">                    &#125;, err =&gt; &#123;</span><br><span class="line">                        addData(<span class="string">'rejected'</span>, err, i)</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    addData(<span class="string">'fulfilled'</span>, promise, i)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="55、any"><a href="#55、any" class="headerlink" title="55、any"></a>55、any</h3><p>any与all相反</p>
<ul>
<li>接收一个Promise数组，数组中如有非Promise项，则此项当做成功</li>
<li>如果有一个Promise成功，则返回这个成功结果</li>
<li>如果所有Promise都失败，则报错</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">any</span>(<span class="params">promises</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> count = <span class="number">0</span></span><br><span class="line">            promises.forEach(<span class="function">(<span class="params">promise</span>) =&gt;</span> &#123;</span><br><span class="line">                promise.then(<span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">                    resolve(val)</span><br><span class="line">                &#125;, err =&gt; &#123;</span><br><span class="line">                    count++</span><br><span class="line">                    <span class="keyword">if</span> (count === promises.length) &#123;</span><br><span class="line">                        reject(<span class="keyword">new</span> AggregateError(<span class="string">'All promises were rejected'</span>))</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="56、finally"><a href="#56、finally" class="headerlink" title="56、finally"></a>56、finally</h3><ul>
<li>接收一个回调函数，但无参数接收</li>
<li>无论成功失败状态，都会执行finally</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.prototype.finally = <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    callback()</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">  &#125;, err =&gt; &#123;</span><br><span class="line">    callback()</span><br><span class="line">    <span class="keyword">throw</span> err</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/%E9%9D%A2%E8%AF%95/" rel="tag"># 面试</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/09/15/js%E4%B9%8BBigNumber-js/" rel="next" title="js之BigNumber.js">
                <i class="fa fa-chevron-left"></i> js之BigNumber.js
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/09/16/git%E4%B9%8B%E9%94%99%E8%AF%AF%E5%88%86%E6%94%AF%E5%BC%80%E5%8F%91%E7%9A%84%E4%B8%89%E7%A7%8D%E6%83%85%E5%86%B5/" rel="prev" title="git之错误分支开发的三种情况">
                git之错误分支开发的三种情况 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/header.jpg"
                alt="Dali" />
            
              <p class="site-author-name" itemprop="name">Dali</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">177</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">76</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">165</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-4"><a class="nav-link" href="#HTTP-中如何处理表单数据的提交？"><span class="nav-number">1.</span> <span class="nav-text">HTTP 中如何处理表单数据的提交？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#SPA（单页应用）首屏加载速度慢怎么解决？"><span class="nav-number">2.</span> <span class="nav-text">SPA（单页应用）首屏加载速度慢怎么解决？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#为什么Vue中的data属性是一个函数而不是一个对象"><span class="nav-number">3.</span> <span class="nav-text">为什么Vue中的data属性是一个函数而不是一个对象</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Vue-observable是什么？"><span class="nav-number">4.</span> <span class="nav-text">Vue.observable是什么？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#正则面试题集锦"><span class="nav-number">5.</span> <span class="nav-text">正则面试题集锦</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-提取连续重复的字符"><span class="nav-number">5.1.</span> <span class="nav-text">1.提取连续重复的字符</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-实现一个trim函数"><span class="nav-number">5.2.</span> <span class="nav-text">2. 实现一个trim函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-数字价格千分位分割"><span class="nav-number">5.3.</span> <span class="nav-text">3. 数字价格千分位分割</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-手机号3-4-4分割"><span class="nav-number">5.4.</span> <span class="nav-text">4. 手机号3-4-4分割</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-将字符串驼峰化"><span class="nav-number">5.5.</span> <span class="nav-text">5. 将字符串驼峰化</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#6-将字符串首字母转化为大写，剩下为小写"><span class="nav-number">5.6.</span> <span class="nav-text">6. 将字符串首字母转化为大写，剩下为小写</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#7-通过name获取url-query参数"><span class="nav-number">5.7.</span> <span class="nav-text">7.通过name获取url query参数</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#为什么-Vue2-this-能够直接获取到-data-和-methods"><span class="nav-number"></span> <span class="nav-text">为什么 Vue2 this 能够直接获取到 data 和 methods</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#熬夜整理56个JavaScript高级的手写知识点！！专业扫盲"><span class="nav-number"></span> <span class="nav-text">熬夜整理56个JavaScript高级的手写知识点！！专业扫盲</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#前言"><span class="nav-number"></span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#面试常考"><span class="nav-number"></span> <span class="nav-text">面试常考</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1、实现原生的AJAX请求"><span class="nav-number"></span> <span class="nav-text">1、实现原生的AJAX请求</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2、手写-new-的过程"><span class="nav-number"></span> <span class="nav-text">2、手写 new 的过程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3、instanceof关键字"><span class="nav-number"></span> <span class="nav-text">3、instanceof关键字</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4、实现防抖函数"><span class="nav-number"></span> <span class="nav-text">4、实现防抖函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5、实现节流函数"><span class="nav-number"></span> <span class="nav-text">5、实现节流函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6、实现数组去重"><span class="nav-number"></span> <span class="nav-text">6、实现数组去重</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7、用setTimeout实现setInterval"><span class="nav-number"></span> <span class="nav-text">7、用setTimeout实现setInterval</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8、用setInterval实现setTimeout"><span class="nav-number"></span> <span class="nav-text">8、用setInterval实现setTimeout</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9、实现一个compose函数"><span class="nav-number"></span> <span class="nav-text">9、实现一个compose函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10、实现一个科里化函数"><span class="nav-number"></span> <span class="nav-text">10、实现一个科里化函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11、实现一个LRU缓存函数"><span class="nav-number"></span> <span class="nav-text">11、实现一个LRU缓存函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#12、简单实现-发布订阅模式"><span class="nav-number"></span> <span class="nav-text">12、简单实现 发布订阅模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13、实现JSON-parse"><span class="nav-number"></span> <span class="nav-text">13、实现JSON.parse</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#14、将DOM转化成树结构对象"><span class="nav-number"></span> <span class="nav-text">14、将DOM转化成树结构对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#15、将树结构转换为DOM"><span class="nav-number"></span> <span class="nav-text">15、将树结构转换为DOM</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#16、判断一个对象有环引用"><span class="nav-number"></span> <span class="nav-text">16、判断一个对象有环引用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#17、计算一个对象的层数"><span class="nav-number"></span> <span class="nav-text">17、计算一个对象的层数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#18、对象的扁平化"><span class="nav-number"></span> <span class="nav-text">18、对象的扁平化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#19、实现-a-1-amp-amp-a-2-amp-amp-a-3-为true"><span class="nav-number"></span> <span class="nav-text">19、实现(a &#x3D;&#x3D; 1 &amp;&amp; a &#x3D;&#x3D; 2 &amp;&amp; a &#x3D;&#x3D; 3)为true</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#20、实现限制并发的Promise调度器"><span class="nav-number"></span> <span class="nav-text">20、实现限制并发的Promise调度器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#21、实现lazyMan函数"><span class="nav-number"></span> <span class="nav-text">21、实现lazyMan函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#22、实现add函数"><span class="nav-number"></span> <span class="nav-text">22、实现add函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#23、实现一个合格的深拷贝"><span class="nav-number"></span> <span class="nav-text">23、实现一个合格的深拷贝</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#24、实现-Promise"><span class="nav-number"></span> <span class="nav-text">24、实现 Promise</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#25、实现-async-await"><span class="nav-number"></span> <span class="nav-text">25、实现 async&#x2F;await</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Array篇"><span class="nav-number"></span> <span class="nav-text">Array篇</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#26、forEach"><span class="nav-number"></span> <span class="nav-text">26、forEach</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#27、map"><span class="nav-number"></span> <span class="nav-text">27、map</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#28、filter"><span class="nav-number"></span> <span class="nav-text">28、filter</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#29、every"><span class="nav-number"></span> <span class="nav-text">29、every</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#30、some"><span class="nav-number"></span> <span class="nav-text">30、some</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#31、reduce"><span class="nav-number"></span> <span class="nav-text">31、reduce</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#32、findIndex"><span class="nav-number"></span> <span class="nav-text">32、findIndex</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#33、find"><span class="nav-number"></span> <span class="nav-text">33、find</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#34、fill"><span class="nav-number"></span> <span class="nav-text">34、fill</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#35、includes"><span class="nav-number"></span> <span class="nav-text">35、includes</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#36、join"><span class="nav-number"></span> <span class="nav-text">36、join</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#37、flat"><span class="nav-number"></span> <span class="nav-text">37、flat</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#38、splice"><span class="nav-number"></span> <span class="nav-text">38、splice</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Object篇"><span class="nav-number"></span> <span class="nav-text">Object篇</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#39、entries"><span class="nav-number"></span> <span class="nav-text">39、entries</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#40、fromEntries"><span class="nav-number"></span> <span class="nav-text">40、fromEntries</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#41、keys"><span class="nav-number"></span> <span class="nav-text">41、keys</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#42、values"><span class="nav-number"></span> <span class="nav-text">42、values</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#43、instanceOf"><span class="nav-number"></span> <span class="nav-text">43、instanceOf</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#44、is"><span class="nav-number"></span> <span class="nav-text">44、is</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#45、Object-assign"><span class="nav-number"></span> <span class="nav-text">45、Object.assign</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Function篇"><span class="nav-number"></span> <span class="nav-text">Function篇</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#46、call"><span class="nav-number"></span> <span class="nav-text">46、call</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#47、apply"><span class="nav-number"></span> <span class="nav-text">47、apply</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#48、Function-prototype-bind"><span class="nav-number"></span> <span class="nav-text">48、Function.prototype.bind</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#String篇"><span class="nav-number"></span> <span class="nav-text">String篇</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#49、slice"><span class="nav-number"></span> <span class="nav-text">49、slice</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#50、substr"><span class="nav-number"></span> <span class="nav-text">50、substr</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#51、substring"><span class="nav-number"></span> <span class="nav-text">51、substring</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Promise篇"><span class="nav-number"></span> <span class="nav-text">Promise篇</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#52、all"><span class="nav-number"></span> <span class="nav-text">52、all</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#53、race"><span class="nav-number"></span> <span class="nav-text">53、race</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#54、allSettled"><span class="nav-number"></span> <span class="nav-text">54、allSettled</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#55、any"><span class="nav-number"></span> <span class="nav-text">55、any</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#56、finally"><span class="nav-number"></span> <span class="nav-text">56、finally</span></a></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Dali</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
