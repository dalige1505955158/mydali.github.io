<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="DaliBlogs" type="application/atom+xml" />






<meta property="og:type" content="website">
<meta property="og:title" content="DaliBlogs">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="DaliBlogs">
<meta property="article:author" content="Dali">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>DaliBlogs</title>
  








<meta name="generator" content="Hexo 4.2.1"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">DaliBlogs</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2023/01/05/console%E7%9A%84%E6%8B%93%E5%B1%95%E7%94%A8%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dali">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DaliBlogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/01/05/console%E7%9A%84%E6%8B%93%E5%B1%95%E7%94%A8%E6%B3%95/" itemprop="url">console的拓展用法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2023-01-05T17:54:19+08:00">
                2023-01-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>参考链接：<a href="https://mp.weixin.qq.com/s/NZdmV-FKJxzahyeCneLWjw" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/NZdmV-FKJxzahyeCneLWjw</a></p>
<h2 id="打印表格"><a href="#打印表格" class="headerlink" title="打印表格"></a>打印表格</h2><p><code>console.table()</code>方法将对象/数组打印为格式整齐的表格。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">console.table(&#123;</span><br><span class="line">  &#39;Time Stamp&#39;: new Date().getTime(),</span><br><span class="line">  &#39;OS&#39;: navigator[&#39;platform&#39;],</span><br><span class="line">  &#39;Browser&#39;: navigator[&#39;appCodeName&#39;],</span><br><span class="line">  &#39;Language&#39;: navigator[&#39;language&#39;],</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ibugX3Hm3p4oAoool2dL1ICjHZ58mia3KWfO8qjeIBibhXn7eHunVFEVjrVLKHicgcA3GmPAUywQABQeceZJ1nWe5A/640?wx_fmt=png&tp=wxpic&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<h2 id="分组"><a href="#分组" class="headerlink" title="分组"></a>分组</h2><p>使用<code>console.group()</code>可将相关的控制台语句与可折叠章节组合在一起。</p>
<p>你可以选择通过传递字符串作为参数来为章节指定标题。可以在控制台中折叠和展开章节，但默认情况下也可以使用<code>groupCollapsed</code>取代<code>group</code>来折叠章节。你还可以在章节内嵌套子章节，但务必记住使用<code>groupEnd</code>关闭每个组。</p>
<p>以下示例将输出一个打开的包含一些信息的章节。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">console.group(&#39;URL Info&#39;);</span><br><span class="line">  console.log(&#39;Protocol&#39;, window.location.protocol);</span><br><span class="line">  console.log(&#39;Host&#39;, window.origin);</span><br><span class="line">  console.log(&#39;Path&#39;, window.location.pathname);</span><br><span class="line">  console.groupCollapsed(&#39;Meta Info&#39;);</span><br><span class="line">    console.log(&#39;Date Fetched&#39;, new Date().getTime());</span><br><span class="line">    console.log(&#39;OS&#39;, navigator[&#39;platform&#39;]);</span><br><span class="line">    console.log(&#39;Browser&#39;, navigator[&#39;appCodeName&#39;]);</span><br><span class="line">    console.log(&#39;Language&#39;, navigator[&#39;language&#39;]);</span><br><span class="line">  console.groupEnd();</span><br><span class="line">console.groupEnd();</span><br></pre></td></tr></table></figure>

<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ibugX3Hm3p4oAoool2dL1ICjHZ58mia3KW598IgzUp87x1vbQQMGM2G6xp5WHP4wKY4r7hoNM7kr8HRibll8XtCMg/640?wx_fmt=png&tp=wxpic&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<h2 id="带样式的日志输出"><a href="#带样式的日志输出" class="headerlink" title="带样式的日志输出"></a>带样式的日志输出</h2><p>可以使用一些基本的CSS来设置日志输出的样式，例如颜色、字体、文本样式和大小。</p>
<p>例如，尝试运行以下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">console.log(</span><br><span class="line">  &#39;%cHello World!&#39;,</span><br><span class="line">  &#39;color: #f709bb; font-family: sans-serif; text-decoration: underline;&#39;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>得到输出如下：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ibugX3Hm3p4oAoool2dL1ICjHZ58mia3KW1iaRJ6tcCYlibia5GM8h9Jib2oQRicj5icfJiabeHsLbibIrck62dsex8yjg6Q/640?wx_fmt=png&tp=wxpic&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>很酷吧？但是还可以做更多事情！</p>
<p>比如说改变字体，样式，背景颜色，添加阴影和曲线……</p>
<h2 id="时间"><a href="#时间" class="headerlink" title="时间"></a>时间</h2><p>另一种常见的调试技术是计算程序执行时间，以跟踪操作所需的时间。这可以通过使用<code>console.time()</code>启动计时器并传入标签，然后通过相同的标签使用<code>console.timeEnd()</code>结束计时器来实现。甚至还可以使用<code>console.timeLog()</code>在长时间运行的操作中添加标记。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">console.time(&quot;concatenation&quot;);</span><br><span class="line">let output &#x3D; &quot;&quot;;</span><br><span class="line">for (var i &#x3D; 1; i &lt;&#x3D; 1e6; i++) &#123;</span><br><span class="line">  output +&#x3D; i;</span><br><span class="line">&#125;</span><br><span class="line">console.timeEnd(&quot;concatenation&quot;);</span><br><span class="line">concatenation: 1206ms - timer ended</span><br></pre></td></tr></table></figure>

<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ibugX3Hm3p4oAoool2dL1ICjHZ58mia3KWl9wWyeUKA6cg18GCZrSIs2fVywleLbjqm97MyicgxLQefSqslfskLSg/640?wx_fmt=png&tp=wxpic&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>还有一个非标准方法——<code>console.timeStamp()</code>，在性能选项卡中添加标记，因此可以将代码中的点与时间轴中记录的其他事件（如绘制和布局事件）相关联。</p>
<h2 id="断言"><a href="#断言" class="headerlink" title="断言"></a>断言</h2><p>如果你只想在发生错误或特定条件为真/假时登录到控制台，那么可以使用<code>console.assert()</code>来完成，除非第一个参数为<code>false</code>，否则不会将任何内容记录到控制台。</p>
<p>第一个参数是要检查的布尔条件，后跟0或要打印的多个数据点，最后一个参数是要输出的消息。例如<code>console.assert(false, &#39;Value was false&#39;)</code>将输出消息，因为第一个参数是<code>false</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const errorMsg &#x3D; &#39;the # is not even&#39;;</span><br><span class="line">for (let num &#x3D; 2; num &lt;&#x3D; 5; num++) &#123;</span><br><span class="line">  console.log(&#96;the # is $&#123;num&#125;&#96;);</span><br><span class="line">  console.assert(num % 2 &#x3D;&#x3D;&#x3D; 0, &#123; num &#125;, errorMsg);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ibugX3Hm3p4oAoool2dL1ICjHZ58mia3KWpQB0oO7mqg7LDCmqfFMtga6tLpG2fELR1Y0wgDzpRNKqKbpDziaFnSw/640?wx_fmt=png&tp=wxpic&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<h2 id="计数"><a href="#计数" class="headerlink" title="计数"></a>计数</h2><p>还在手动递增数字进行日志记录吗？<code>console.count()</code>可帮助用于跟踪某些内容的执行次数，或代码块的输入频率。</p>
<p>你可以选择为计数器指定一个标签，以便管理多个计数器并使输出更清晰。</p>
<p>计数器将始终从1开始。你可以随时使用<code>console.countReset()</code>重置计数器，该函数也接受可选的标签参数。</p>
<p>以下代码最终值将为8。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const numbers &#x3D; [1, 2, 3, 30, 69, 120, 240, 420];</span><br><span class="line">numbers.forEach((name) &#x3D;&gt; &#123;</span><br><span class="line">  console.count();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>下面是标记计数器的示例输出。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ibugX3Hm3p4oAoool2dL1ICjHZ58mia3KWIQhAsvJpt0zdpfFyhH9icibgndTmwVd5k1K8QibplIRHFD2P36fbc3lZw/640?wx_fmt=png&tp=wxpic&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>如果使用值，则不会传入标签，而是为每个条件值提供一个单独的计数器。例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">console.count(NaN);         &#x2F;&#x2F; NaN: 1</span><br><span class="line">console.count(NaN+3);       &#x2F;&#x2F; NaN: 2</span><br><span class="line">console.count(1&#x2F;0);         &#x2F;&#x2F; Infinity: 1</span><br><span class="line">console.count(String(1&#x2F;0)); &#x2F;&#x2F; Infinity: 2</span><br></pre></td></tr></table></figure>

<h2 id="堆栈跟踪"><a href="#堆栈跟踪" class="headerlink" title="堆栈跟踪"></a>堆栈跟踪</h2><p>在JavaScript中，我们经常会用到深度嵌套的方法和对象。你可以使用<code>console.trace()</code>遍历堆栈跟踪，并输出调用了哪些方法。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ibugX3Hm3p4oAoool2dL1ICjHZ58mia3KWicbsyosRJTmnJ790tPicys0lNecfGCzMR4jia7kh1L1xjX0WicVpEuVd4g/640?wx_fmt=png&tp=wxpic&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>还可以选择将数据与堆栈跟踪一起输出。</p>
<h2 id="dir"><a href="#dir" class="headerlink" title="dir"></a>dir</h2><p>如果将大型对象记录到控制台，则可能会变得难以读取。幸而我们可以通过<code>console.dir()</code>方法以可扩展的树结构进行格式化。</p>
<p>以下是目录样式控制台输出的示例：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ibugX3Hm3p4oAoool2dL1ICjHZ58mia3KWrWzXHsC4MWqU6YPUKarndfyvEzFXQd0iapJyGQzFNevwgIuL7qgoq9Q/640?wx_fmt=png&tp=wxpic&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>你还可以使用<code>console.dirxml()</code>以类似的方式打印基于XML或HTML的树。</p>
<h2 id="调试"><a href="#调试" class="headerlink" title="调试"></a>调试</h2><p>你可能在应用中设置了一些日志记录，且在开发过程中依赖这些日志记录，但不希望用户看到。用<code>console.debug()</code>替换日志语句就可以做到这一点，它的功能与<code>console.log</code>完全相同，但可以被大多数构建系统所删除，或者在生产模式下运行时被禁用。</p>
<h2 id="日志级别"><a href="#日志级别" class="headerlink" title="日志级别"></a>日志级别</h2><p>注意到浏览器控制台中有若干过滤器（信息、警告和错误）了吗？它们允许你更改记录数据的详细程度。要使用这些过滤器，只需切换日志语句即可：</p>
<ul>
<li><code>console.info()</code> - 用于记录通知消息，通常包括一个小的“i”和或蓝色背景</li>
<li><code>console.warn()</code> - 用于记录警告或非严重错误信息，通常包括三角感叹号和或黄色背景</li>
<li><code>console.error()</code> - 用于记录可能影响功能的错误信息，通常包括圆形感叹号和或红色背景</li>
</ul>
<p>在生产环境中运行时，Node.js中不同的日志级别会写入不同的流，例如<code>error()</code>会写入<code>stderr</code>，而日志输出会写入<code>stdout</code>，但在开发中它们都会如常出现在控制台中。</p>
<h2 id="多值日志"><a href="#多值日志" class="headerlink" title="多值日志"></a>多值日志</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console&#96;对象上的大多数函数接受多个参数，因此你可以添加标签到输出，或一次打印多个数据点，例如：&#96;console.log(&#39;User: &#39;, user.name);</span><br></pre></td></tr></table></figure>

<p>但是，打印多个标记值的更简单方法是使用对象解构。例如，如果有三个变量（<code>x</code>、<code>y</code>和<code>z</code>），那么可以将它们记录为一个用大括号括起来的对象，这样就能输出每个变量的名称和值——如<code>console.log( { x, y, z } );</code></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ibugX3Hm3p4oAoool2dL1ICjHZ58mia3KWFTqxFINeOgSd7KqZprmRUmCNxibCApIzYoAnm8dAib1xxMjicYb6DicTJw/640?wx_fmt=png&tp=wxpic&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<h2 id="日志字符串格式"><a href="#日志字符串格式" class="headerlink" title="日志字符串格式"></a>日志字符串格式</h2><p>如果需要输出格式化的字符串，可以使用C语言样式的printf格式修饰符来实现。</p>
<p>支持的格式修饰符有：</p>
<ul>
<li><code>%s</code> - 字符串或转换为字符串的任何其他类型</li>
<li><code>%d</code> / <code>%i</code> - 整数</li>
<li><code>%f</code> - 浮点数</li>
<li><code>%o</code> - 使用最佳格式</li>
<li><code>%O</code> - 使用默认格式</li>
<li><code>%c</code> - 使用自定义格式</li>
</ul>
<p>例如</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">console.log(&quot;Hello %s, welcome to the year %d!&quot;, &quot;Alicia&quot;, new Date().getFullYear());</span><br><span class="line">&#x2F;&#x2F; Hello Alicia, welcome to the year 2022!</span><br></pre></td></tr></table></figure>

<p>当然，你也可以使用模板文字来实现相同的目的，如果是较短的字符串，可能更容易阅读。</p>
<h2 id="清除"><a href="#清除" class="headerlink" title="清除"></a>清除</h2><p>最后，当查找事件的输出时，你可能希望删除页面首次加载时记录到控制台的所有内容。这可以通过<code>console.clear()</code>来完成，它将清除所有内容，不会重置任何数据。</p>
<p>通常还可以通过单击Bin图标来清除控制台，以及使用筛选器文本输入进行搜索。</p>
<h2 id="特殊浏览器方法"><a href="#特殊浏览器方法" class="headerlink" title="特殊浏览器方法"></a>特殊浏览器方法</h2><p>直接在浏览器控制台中运行代码时，还可以访问速记方法，这些方法对于调试、自动化和测试非常有用。</p>
<p>其中最有用的是：</p>
<ul>
<li><code>$()</code> - <code>Document.querySelector()</code>的简写（选择DOM元素，jQuery-style！）</li>
<li><code>$$()</code> - 与上面相同，但<code>selectAll</code>用于在数组中返回多个元素时使用</li>
<li><code>$_</code> - 返回上次计算表达式的值</li>
<li><code>$0</code> - 返回最近选择的DOM元素（在检查器中）</li>
<li><code>$1...$4</code> - 也可用于抓取以前选择的UI元素</li>
<li><code>$x()</code> - 允许你使用Xpath查询选择DOM元素</li>
<li><code>keys()</code>和<code>values()</code> - <code>Object.getKeys()</code>的简写，将返回包含<code>obj</code>键或值的数组</li>
<li><code>copy()</code> - 将内容复制到剪贴板</li>
<li><code>monitorEvents()</code> - 每次触发给定事件时运行命令</li>
<li>对于某些常见的控制台命令（如<code>console.table()</code>），你不需要键入前面的<code>console</code>，只需运行<code>table()</code></li>
</ul>
<blockquote>
<p>警告！这些只能在开发工具控制台中工作，在代码中不起作用！</p>
</blockquote>
<p>最后再快速介绍一些最佳实践…</p>
<ul>
<li>定义lint规则，以防止任何<code>console.log</code>语句合并到主分支中</li>
<li>编写包装函数来处理日志记录，这样你就可以根据环境启用/禁用调试日志，也可以使用适当的日志级别，以及应用任何格式。这也可集成到第三方日志记录服务，只需在一个位置进行代码更新即可</li>
<li>切勿记录任何敏感信息，任何已安装的扩展程序都可以捕获浏览器日志，因此并不安全</li>
<li>始终使用正确的日志级别（如info、warn、error）来简化筛选和禁用</li>
<li>遵循一致的格式，以便在需要时可以由计算机解析日志</li>
<li>日志消息应简短、有意义</li>
<li>在日志中包含上下文或类别</li>
<li>不要过度使用，只记录有用的信息</li>
</ul>
<p><strong>欢迎<code>长按图片加刷碗智为好友，定时分享 Vue React Ts 等。</code></strong></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2023/01/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B9%8B%E7%BD%91%E7%BB%9C%E6%98%AF%E6%80%8E%E6%A0%B7%E8%BF%9E%E6%8E%A5%E7%9A%84/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dali">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DaliBlogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/01/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B9%8B%E7%BD%91%E7%BB%9C%E6%98%AF%E6%80%8E%E6%A0%B7%E8%BF%9E%E6%8E%A5%E7%9A%84/" itemprop="url">计算机之网络是怎样连接的</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2023-01-05T11:58:18+08:00">
                2023-01-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>参考链接：</p>
<p><a href="https://mp.weixin.qq.com/s?__biz=Mzg2MTQ4NDk4Mw==&amp;mid=2247483759&amp;idx=1&amp;sn=208b5cc1306706f3d76c82e67f8cda82&amp;scene=21#wechat_redirect" target="_blank" rel="noopener">https://mp.weixin.qq.com/s?__biz=Mzg2MTQ4NDk4Mw==&amp;mid=2247483759&amp;idx=1&amp;sn=208b5cc1306706f3d76c82e67f8cda82&amp;scene=21#wechat_redirect</a></p>
<p>言而总之：</p>
<p>查询IP地址的方法非常简单，只要询问最近的DNS服务器<code>www.baidu.com</code>的IP地址是什么?DNS服务器就会告诉你。</p>
<p>操作系统中有一个的Socket库，通过调用gethostbyname方法来拿到实际IP 的值</p>
<p>输入<a href="http://www.baidu.com回车后" target="_blank" rel="noopener">www.baidu.com回车后</a></p>
<p>浏览器-&gt;URL解析-&gt;调用操作系统中Socket库的gethostbyname方法来拿到实际IP</p>
<p>Socket库怎么知道DNS服务器的IP？</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/qhYEMiaxLeI2MjNKt4RFPZIC3enribeXF4FEoruTIPSkicgu2fCXBGicbPdLl3rCO9GfRnOiaYKkWl0fibSx2O3XHOHA/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2023/01/03/%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%A2%B3%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dali">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DaliBlogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/01/03/%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%A2%B3%E7%90%86/" itemprop="url">面试知识点梳理</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2023-01-03T10:32:02+08:00">
                2023-01-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="git"><a href="#git" class="headerlink" title="git"></a>git</h3><h4 id="git-clone-git中https和SSH的clone方式区别"><a href="#git-clone-git中https和SSH的clone方式区别" class="headerlink" title="git clone (git中https和SSH的clone方式区别)"></a>git clone (git中https和SSH的clone方式区别)</h4><ul>
<li>在git中clone项目有两种方式：HTTPS和SSH，它们的区别如下：</li>
<li>HTTPS：不管是谁，拿到url随便clone，但是在push的时候需要验证用户名和密码；</li>
<li>SSH：clone的项目你必须是拥有者或者管理员，而且需要在clone前添加SSH Key。SSH 在push的时候，是不需要输入用户名的，如果配置SSH key的时候设置了密码，则需要输入密码的，否则直接是不需要输入密码的。</li>
<li>在git中使用SSH Key的步骤：</li>
<li>检查电脑是否存在SSH Key：$ cd ~/.ssh$ ls</li>
<li>如果存在id_rsa.pub 或 id_dsa.pub 文件，说明文件以及存在，跳过创建SSH Key步骤。</li>
<li>创建SSH Key</li>
<li>将公共的SSH 放到远程仓库上</li>
</ul>
<h4 id="查看ssh-本机存在ssh-key"><a href="#查看ssh-本机存在ssh-key" class="headerlink" title="查看ssh(本机存在ssh key)"></a>查看ssh(本机存在ssh key)</h4><p>在安装Git前提下，在桌面右键Git Bash Here<br>输入 cd ~/.ssh 进入到.ssh 文件夹</p>
<p>输入 ls 查看.ssh 文件夹里面的文件，有 【id_rsa】【 id_rsa.pub】 known_hosts ，ssh秘钥就在 id_rsa.pub文件里</p>
<p>id_rsa是私钥，不能泄露出去<br>id_rsa.pub是公钥，可以放心地告诉任何人<br>输入cat id_rsa.pu，直接复制ssh秘钥即可</p>
<p>若需要找秘钥文件路径的话，输入pwd，就可以看到路径了</p>
<p>备注：详见git extension笔记</p>
<h3 id="热更新"><a href="#热更新" class="headerlink" title="热更新"></a>热更新</h3><h4 id="原理解析"><a href="#原理解析" class="headerlink" title="原理解析"></a>原理解析</h4><p>The Hot Module Replacement(HMR)俗称热模块替换。主要用来当代码产生变化后，可以在不刷新游览器的情况下对局部代码块进行替换更新。这在很多情况下都很有用，例如在处理弹出框时，使用HMR可以及时的看到变化，如果用刷新游览器的方式会回到初始页面。</p>
<p>很多人使用过HMR却不知道它是如何工作的，这里会对HMR实现原理进行解析。</p>
<h4 id="关于HMR需要知道的一些事"><a href="#关于HMR需要知道的一些事" class="headerlink" title="关于HMR需要知道的一些事"></a>关于HMR需要知道的一些事</h4><ul>
<li>HMR是Webpack的一个可选功能，如果想使用需要主动打开。</li>
<li>需要通过webpack-dev-server方式来管理webpack（另一种方式是CLI）</li>
<li>HMR只能工作在实现了HMR API的loaders里，例如：‘style-loader’,’react-hot-loader’,’vue-loader’</li>
<li>HMR只能在开发环境中使用，因为HMR会在打包的js中添加了很多额外的代码，并且webpack-dev-server也只用于开发环境。</li>
</ul>
<ul>
<li>在 <code>vue-cli</code> 工程中，<code>webpack</code> 默认是自动启动热更新！！！</li>
<li>如果不想使用热更新，打开 <code>vue.config.js</code> 文件，找到 <code>devServer</code>（没有这个字段也需要新增），增加 <code>hot: false</code>，默认情况下是没有这个属性的，如果需要取消热更新才添加。</li>
<li>然后重启项目，配置才会生效</li>
</ul>
<h4 id="devServer常见属性"><a href="#devServer常见属性" class="headerlink" title="devServer常见属性"></a>devServer常见属性</h4><p>其他参考：<a href="https://segmentfault.com/a/1190000013396072" target="_blank" rel="noopener">https://segmentfault.com/a/1190000013396072</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line">devServer.inline</span><br><span class="line">Type: boolean | string</span><br><span class="line">Default: true</span><br><span class="line">作用：用于设置代码保存时是否自动刷新页面。</span><br><span class="line">用法：</span><br><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  devServer: &#123;</span><br><span class="line">    inline: true</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">devServer.hot</span><br><span class="line">Type: boolean | string</span><br><span class="line">Default: true</span><br><span class="line">作用：用于设置代码保存时是否进行热更新（局部刷新，不刷新整个页面）。</span><br><span class="line">与hot相对应的，有一个类似属性hotOnly</span><br><span class="line">区别：</span><br><span class="line">1. hot: true</span><br><span class="line">单纯设置为true的时候，如果编译报错，会抛出错误，你重新改成正确的，这个时候又会触发重新编译，整个浏览器会重新刷新！</span><br><span class="line">2. hotOnly: true</span><br><span class="line">这个也设置的话，如果编译报错，你再改成正确的，重新编译，浏览器不会刷新！</span><br><span class="line">区别在于，刷新！！！有些复现步骤比较复杂的话，刷掉了浏览器，要一步步重新点。</span><br><span class="line">用法：</span><br><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  devServer: &#123;</span><br><span class="line">    hot: true</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">devServer.open</span><br><span class="line">Type: boolean | string</span><br><span class="line">Default: false</span><br><span class="line">作用：用于设置 server 启动后是否自动打开浏览器！！！</span><br><span class="line">用法：</span><br><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  devServer: &#123;</span><br><span class="line">    open: true</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">devServer.openPage</span><br><span class="line">Type: string</span><br><span class="line">作用: 指定deserver 编译完成后自动打开的页面</span><br><span class="line">用法：</span><br><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  devServer: &#123;</span><br><span class="line">    open: true,</span><br><span class="line">    openPage: &#39;&#x2F;different&#x2F;page&#39;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">注意：需要配合 open来使用。如果Vue router 为 hash mode。应在url前面补上&#x2F;#。如：openPage: &#39;&#x2F;#&#x2F;about&#39;</span><br><span class="line"></span><br><span class="line">最常用属性（重点关注）</span><br><span class="line">**proxy**</span><br><span class="line">设置API访问代理，其常用 options （属性）如下</span><br><span class="line">target：代理的服务器，也就是api要访问的服务器</span><br><span class="line">ws：true，是否代理 websocket</span><br><span class="line">secure：false，是否使用HTTPS协议。默认 false</span><br><span class="line">changeOrigin：true，将主机头的来源更改为目标URL，也就是是否允许跨域</span><br><span class="line">pathRewrite：重写 url 的 path 部分</span><br><span class="line"></span><br><span class="line">**devServer.proxy 的工作原理**</span><br><span class="line">proxy 接受一个对象，对象键值对的 key 用来匹配 api 的 url 中的 path。也就是说，当我们进行如下配置时：</span><br><span class="line"></span><br><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">　　proxy: &#123;</span><br><span class="line">　　　　&#39;&#x2F;api&#39;: &#123;</span><br><span class="line">　　　　　　target: &#39;http:&#x2F;&#x2F;127.0.0.10:3000&#39;,</span><br><span class="line">　　　　&#125;</span><br><span class="line">　　&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">devServer 会自动对 path 为 &#x2F;api 开头的 api 做代理转发。而 path 不是 &#x2F;api 开头的就不会进行处理。</span><br><span class="line">这里需要注意一下 path 与 url 的区别，path 是取  url 里的一部分</span><br><span class="line"></span><br><span class="line">**pathRewrite 属性讲解**</span><br><span class="line">pathRewrite 接受一个对象。</span><br><span class="line"></span><br><span class="line">（1）key：对象键值对中的 key 是一个正则表达式。这里需要注意正则的写法，必须与^开头。熟悉正则表达式的朋友就会知道，这表明，传给 deveServer.proxy 的 api 的 url 必须是以正则表达式所要匹配的字符串开头。</span><br><span class="line"></span><br><span class="line">例如：如下配置 pathRewrite: &#123;&quot;^&#x2F;api&quot; : &quot;&quot;&#125;</span><br><span class="line">现在这样两个 api：http:&#x2F;&#x2F;localhost:80&#x2F;api&#x2F;login   和   &#x2F;api&#x2F;login，devServe.proxy 匹配哪个？</span><br><span class="line">会匹配第二个，因为第二个以&#x2F;api开头，而第一个以http开头。</span><br><span class="line"></span><br><span class="line">（2）value：对象键的 value 是个字符串，用来替换 key 匹配的字符串</span><br><span class="line"></span><br><span class="line">**pathRewrite 替换的结果**</span><br><span class="line"></span><br><span class="line">proxy: &#123;</span><br><span class="line">　　&#39;&#x2F;api&#39;: &#123;</span><br><span class="line">　　　　target: &#39;http:&#x2F;&#x2F;emcs-app:8080&#x2F;&#39;,</span><br><span class="line">　　　　changeOrigin: true,</span><br><span class="line">　　　　pathRewrite: &#123;</span><br><span class="line">　　　　　　&#39;^&#x2F;api&#39;: &#39;&#x2F;&#39;</span><br><span class="line">　　　　&#125;</span><br><span class="line">　　&#125;</span><br><span class="line">&#125;</span><br><span class="line">　比如项目上的配置，本地开发时实际上接口请求是 http:&#x2F;&#x2F;test.modb.cc:8080&#x2F;api&#x2F;getUser，path 的 &#x2F;api 匹配上面的配置就会转发及重写为 http:&#x2F;&#x2F;emcs-app:8080&#x2F;getUser 这样请求到后台服务去</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">不常用属性</span><br><span class="line">https：Default: false，用于设置是否启用https</span><br><span class="line">port：Type: number，指定要监听请求的端口号</span><br><span class="line">host：Default: localhost，用于指定devDerve使用的host，如果你希望服务器外部可以访问，设定为 host: &#39;0.0.0.0&#39;</span><br><span class="line">compress；Type: boolean，对 devServer 所有服务启用 gzip 压缩</span><br><span class="line">headers：Type: object，在所有响应中添加首部内容</span><br><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  devServer: &#123;</span><br><span class="line">    headers: &#123;</span><br><span class="line">      &#39;X-Custom-Foo&#39;: &#39;bar&#39;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">overlay</span><br><span class="line">Type: boolean object: &#123; boolean errors, boolean warnings &#125;</span><br><span class="line">作用：当出现编译器错误或警告时，在浏览器中显示全屏覆盖层。默认禁用。</span><br><span class="line">&#x2F;&#x2F; 其一：显示编译器错误</span><br><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  devServer: &#123;</span><br><span class="line">    overlay: true</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&#x2F;&#x2F; 其二：示警告和错误</span><br><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  devServer: &#123;</span><br><span class="line">    overlay: &#123;</span><br><span class="line">      warnings: true,</span><br><span class="line">      errors: true</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="前端重新部署后，领导跟我说页面崩溃了…"><a href="#前端重新部署后，领导跟我说页面崩溃了…" class="headerlink" title="前端重新部署后，领导跟我说页面崩溃了…"></a>前端重新部署后，领导跟我说页面崩溃了…</h3><h4 id="前言：window-onerror"><a href="#前言：window-onerror" class="headerlink" title="前言：window.onerror()"></a>前言：window.onerror()</h4><p>当JavaScript运行时错误（包括语法错误）发生时，window会触发一个ErrorEvent接口的error事件，并执行window.onerror()。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">window.onerror &#x3D; function (msg, url, lineNo, columnNo, error) &#123;</span><br><span class="line">            var string &#x3D; msg.toLowerCase();</span><br><span class="line">            var substring &#x3D; &quot;script error&quot;;</span><br><span class="line">            if (string.indexOf(substring) &gt; -1) &#123;</span><br><span class="line">                alert(&#39;Script Error: See Browser Console for Detail&#39;);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                var message &#x3D; [</span><br><span class="line">                    &#39;Message: &#39; + msg,</span><br><span class="line">                    &#39;URL: &#39; + url,</span><br><span class="line">                    &#39;Line: &#39; + lineNo,</span><br><span class="line">                    &#39;Column: &#39; + columnNo,</span><br><span class="line">                    &#39;Error object: &#39; + JSON.stringify(error)</span><br><span class="line">                ].join(&#39;\n - &#39;);</span><br><span class="line">                alert(message);</span><br><span class="line">            &#125;</span><br><span class="line">            return false;</span><br><span class="line">        &#125;;</span><br></pre></td></tr></table></figure>

<h4 id="正题"><a href="#正题" class="headerlink" title="正题"></a>正题</h4><h5 id="报错一：Uncaught-ChunkLoadError-Loading-chunk-n-failed"><a href="#报错一：Uncaught-ChunkLoadError-Loading-chunk-n-failed" class="headerlink" title="报错一：Uncaught ChunkLoadError: Loading chunk {n} failed."></a>报错一：Uncaught ChunkLoadError: Loading chunk {n} failed.</h5><p>原因：</p>
<p>每次更新后，使用 react.lazy 导致路由缓存，然而版本发布后，js脚本更新导致出现错误。</p>
<p>解决方案：</p>
<p>1.对error事件进行监听，检测到错误之后重新刷新</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.addEventListener(</span><br><span class="line">  <span class="string">'error'</span>,</span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (</span><br><span class="line">      event.message &amp;&amp;</span><br><span class="line">      <span class="built_in">String</span>(event.message).includes(<span class="string">'Loading chunk'</span>) &amp;&amp;</span><br><span class="line">      <span class="built_in">String</span>(event.message).includes(<span class="string">'failed'</span>)</span><br><span class="line">    ) &#123;</span><br><span class="line">       <span class="built_in">window</span>.location.reload();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="literal">true</span>,</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>2.对window.console.error事件监听，效果同上</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.console.error = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(<span class="built_in">arguments</span>), <span class="string">'window.console.error'</span>); <span class="comment">// 自定义处理</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h5 id="报错二：Uncaught-in-promise-TypeError-Failed-to-fetch-–-Loading-CSS-chunk-383-failed"><a href="#报错二：Uncaught-in-promise-TypeError-Failed-to-fetch-–-Loading-CSS-chunk-383-failed" class="headerlink" title="报错二：Uncaught (in promise) TypeError: Failed to fetch – Loading CSS chunk 383 failed"></a>报错二：Uncaught (in promise) TypeError: Failed to fetch – Loading CSS chunk 383 failed</h5><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2d1fa6d57023433c889bb8c1b0bb0735~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp" alt="image.png"></p>
<p>很明显，还是资源加载问题，按道理讲应该可以走入我们逻辑进行刷新。但是当时用户反馈：刷新也不能解决问题，强制刷新才可以解决。</p>
<p>分析：刷新为什么不能解决问题？其实还是因为当用户在发版后第一次进入页面，因为网络原因等未成功加载完资源就退出了，后续刷新均走的缓存中的错误资源，因此让用户手动去刷新解决不了问题，恰巧这个资源又是css资源。</p>
<p>解决方案：</p>
<p>不知道大家发现没有，上面对error事件进行监听代码中，并没有包括css失败的情况，因此匹配上css加载失败的情况即可。</p>
<p>更新代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.addEventListener(</span><br><span class="line">  <span class="string">'error'</span>,</span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (</span><br><span class="line">      event.message &amp;&amp;</span><br><span class="line">      <span class="built_in">String</span>(event.message).includes(<span class="string">'chunk'</span>) &amp;&amp;</span><br><span class="line">      <span class="built_in">String</span>(event.message).includes(<span class="string">'failed'</span>)</span><br><span class="line">    ) &#123;</span><br><span class="line">      <span class="built_in">window</span>.location.replace(<span class="built_in">window</span>.location.href);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="literal">true</span>,</span><br><span class="line">);</span><br></pre></td></tr></table></figure>



<h3 id="js源码题"><a href="#js源码题" class="headerlink" title="js源码题"></a>js源码题</h3><h4 id="数组转为树形结构以及树形结构平铺成数组"><a href="#数组转为树形结构以及树形结构平铺成数组" class="headerlink" title="数组转为树形结构以及树形结构平铺成数组"></a>数组转为树形结构以及树形结构平铺成数组</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">var source &#x3D; [</span><br><span class="line">        &#123;</span><br><span class="line">          id: 1,</span><br><span class="line">          pid: 0,</span><br><span class="line">          name: &#39;body&#39;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          id: 5555,</span><br><span class="line">          pid: 0,</span><br><span class="line">          name: &#39;script&#39;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          id: 55551,</span><br><span class="line">          pid: 5555,</span><br><span class="line">          name: &#39;js&#39;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          id: 2,</span><br><span class="line">          pid: 1,</span><br><span class="line">          name: &#39;title&#39;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          id: 3,</span><br><span class="line">          pid: 1,</span><br><span class="line">          name: &#39;div&#39;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          id: 4,</span><br><span class="line">          pid: 3,</span><br><span class="line">          name: &#39;span&#39;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          id: 5,</span><br><span class="line">          pid: 3,</span><br><span class="line">          name: &#39;icon&#39;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          id: 6,</span><br><span class="line">          pid: 4,</span><br><span class="line">          name: &#39;subspan&#39;,</span><br><span class="line">        &#125;,</span><br><span class="line">      ];</span><br><span class="line"></span><br><span class="line">      function toTree(data) &#123;</span><br><span class="line">        let result &#x3D; [];</span><br><span class="line">        if (!Array.isArray(data)) &#123;</span><br><span class="line">          return result;</span><br><span class="line">        &#125;</span><br><span class="line">        data.forEach((item) &#x3D;&gt; &#123;</span><br><span class="line">          delete item.children;</span><br><span class="line">        &#125;);</span><br><span class="line">        let map &#x3D; &#123;&#125;;</span><br><span class="line">        data.forEach((item) &#x3D;&gt; &#123;</span><br><span class="line">          map[item.id] &#x3D; item;</span><br><span class="line">        &#125;);</span><br><span class="line">        data.forEach((item) &#x3D;&gt; &#123;</span><br><span class="line">          let parent &#x3D; map[item.pid];</span><br><span class="line">          if (parent) &#123;</span><br><span class="line">            (parent.children || (parent.children &#x3D; [])).push(item);</span><br><span class="line">          &#125; else &#123;</span><br><span class="line">            result.push(item);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        return result;</span><br><span class="line">      &#125;</span><br><span class="line">      console.log(&quot;树结构&#x3D;&#x3D;&#x3D;&quot;, toTree(source));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      let newTree &#x3D; toTree(source);</span><br><span class="line">      var resultArr &#x3D; [];</span><br><span class="line">      function flat(nodes, parentId) &#123;</span><br><span class="line">        if (!nodes || nodes.length &#x3D;&#x3D;&#x3D; 0) return [];</span><br><span class="line">        nodes.forEach((node) &#x3D;&gt; &#123;</span><br><span class="line">            resultArr.push(&#123; ...node &#125;);</span><br><span class="line">          return flat(node.children, node.id);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      flat(newTree, 0);</span><br><span class="line">      console.log(&quot;铺平&#x3D;&#x3D;&#x3D;&quot;, resultArr)</span><br></pre></td></tr></table></figure>

<h3 id="宏任务微任务执行顺序？-async-await、promise和setTimeout"><a href="#宏任务微任务执行顺序？-async-await、promise和setTimeout" class="headerlink" title="宏任务微任务执行顺序？(async/await、promise和setTimeout)"></a>宏任务微任务执行顺序？(async/await、promise和setTimeout)</h3><p>任务队列=》Event Queue</p>
<table>
<thead>
<tr>
<th>宏任务(macro-task)</th>
<th>微任务(micro-task)</th>
</tr>
</thead>
<tbody><tr>
<td>script</td>
<td>promise.then/catch/finally (非new Promise,new Promise的代码正常执行)</td>
</tr>
<tr>
<td>setTimeout</td>
<td>process.nextTick(Node.js 环境)</td>
</tr>
<tr>
<td>setInterval</td>
<td>MutaionOberver（浏览器环境）</td>
</tr>
<tr>
<td>setImmediate(Node.js 环境)</td>
<td>Object.observe</td>
</tr>
<tr>
<td>IO操作</td>
<td>x</td>
</tr>
<tr>
<td>UI交互事件</td>
<td>x</td>
</tr>
<tr>
<td>postMessage</td>
<td>x</td>
</tr>
<tr>
<td>MessageChannel</td>
<td>x</td>
</tr>
</tbody></table>
<p>先将所有（包括宏任务和微任务）的同步代码注入主线程，遇到异步宏任务则将异步宏任务放入宏任务队列中，遇到异步微任务则将异步微任务放入微任务队列中</p>
<p>当所有同步代码执行完毕后(先执行宏任务同步任务再执行微任务同步任务)，再将异步微任务从微任务队列中调入主线程执行，微任务执行完毕后再将异步宏任务从宏任务队列中调入主线程执行</p>
<p>一直循环直至所有任务执行完毕。</p>
<p>总而言之：同步任务的执行顺序是先宏后微，异步任务的执行顺序是先微后宏！！！</p>
<p>tips1:</p>
<blockquote>
<p><strong>注意：</strong> <code>setTimeOut</code>并不是直接的把你的回掉函数放进上述的异步队列中去，而是在定时器的时间到了之后，把回掉函数放到执行异步队列中去。如果此时这个队列已经有很多任务了，那就排在他们的后面。这也就解释了为什么<code>setTimeOut</code>为什么不能精准的执行的问题了。<code>setTimeOut</code>执行需要满足两个条件：</p>
<ol>
<li>主进程必须是空闲的状态，如果到时间了，主进程不空闲也不会执行你的回调函数</li>
<li>这个回调函数需要等到插入异步队列时前面的异步函数都执行完了，才会执行</li>
</ol>
</blockquote>
<p>tips2:</p>
<blockquote>
<p><code>new Promise</code>是同步的任务，会被放到主进程中去立即执行。</p>
<p>而<code>.then()</code>函数是异步任务会放到异步队列中去，那什么时候放到异步队列中去呢？当你的<code>promise</code>状态结束的时候（执行resolve或者reject方法后），就会立即放进异步队列中去了。</p>
</blockquote>
<p>tips3：</p>
<blockquote>
<p><strong>带<code>async</code>关键字的函数会返回一个<code>promise</code>对象</strong>，如果里面没有<code>await</code>，执行起来等同于普通函数</p>
</blockquote>
<p>tip4:</p>
<blockquote>
<p><code>await</code> 关键字要在 <code>async</code> 关键字函数的内部，<code>await</code> 写在外面会报错；<code>await</code>如同他的语意，就是在等待，等待右侧的表达式完成。此时的<code>await</code>会让出线程，阻塞<code>async</code>内后续的代码，先去执行<code>async</code>外的代码。等外面的同步代码执行完毕，才会执行里面的后续代码。就算<code>await</code>的不是<code>promise</code>对象，是一个同步函数，也会等这样操作。</p>
</blockquote>
<p><img src="/2023/01/03/%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%A2%B3%E7%90%86/image-20230105170412614.png" alt="image-20230105170412614"></p>
<p>翻译成白话文就是：如果你要写await XXX()，外面必须套一个async YYY(){},否自就会报错，但是XXX这个方法可以是任意方法，同步的异步的都行，添加了await XXX()之后，会阻塞async YYY()方法中后面代码的执行，先去执行<code>async</code>外的代码。等外面的同步代码执行完毕，才会执行里面的后续代码。</p>
<p>实战训练：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">async function async1() &#123;</span><br><span class="line">	console.log(&#39;async1 start&#39;);</span><br><span class="line">	await async2();</span><br><span class="line">	console.log(&#39;asnyc1 end&#39;);</span><br><span class="line">&#125;</span><br><span class="line">async function async2() &#123;</span><br><span class="line">	console.log(&#39;async2&#39;);</span><br><span class="line">&#125;</span><br><span class="line">console.log(&#39;script start&#39;);</span><br><span class="line">setTimeout(() &#x3D;&gt; &#123;</span><br><span class="line">	console.log(&#39;setTimeOut&#39;);</span><br><span class="line">&#125;, 0);</span><br><span class="line">async1();</span><br><span class="line">new Promise(function (reslove) &#123;</span><br><span class="line">	console.log(&#39;promise1&#39;);</span><br><span class="line">	reslove();</span><br><span class="line">&#125;).then(function () &#123;</span><br><span class="line">	console.log(&#39;promise2&#39;);</span><br><span class="line">&#125;)</span><br><span class="line">console.log(&#39;script end&#39;);</span><br><span class="line"></span><br><span class="line">正确答案：</span><br><span class="line">script start</span><br><span class="line">async1 start</span><br><span class="line">async2</span><br><span class="line">promise1</span><br><span class="line">script end</span><br><span class="line">asnyc1 end</span><br><span class="line">promise2</span><br><span class="line">setTimeOut</span><br><span class="line"></span><br><span class="line">答案解析：</span><br><span class="line">1.整个代码片段（script）作为一个宏任务执行console.log(&#39;script start&#39;)，输出script start；</span><br><span class="line">2.执行setTimeout，是一个异步动作，放入宏任务异步队列中；</span><br><span class="line">3.执行async1()，输出async1 start，继续向下执行；</span><br><span class="line">4.执行async2()，输出async2，并返回了一个promise对象，await让出了线程，把返回的promise加入了微任务异步队列，所以async1()下面的代码也要等待上面完成后继续执行;</span><br><span class="line">5.执行 new Promise，输出promise1，然后将resolve()放入微任务异步队列；</span><br><span class="line">6.执行console.log(&#39;script end&#39;)，输出script end；</span><br><span class="line">7.到此同步的代码就都执行完成了，然后去微任务异步队列里去获取任务</span><br><span class="line">8.接下来执行resolve（async2返回的promise返回的），输出了async1 end；</span><br><span class="line">9.然后执行resolve（new Promise的），输出了promise2；</span><br><span class="line">10.最后执行setTimeout，输出了settimeout。</span><br><span class="line"></span><br><span class="line">补充讲解：</span><br><span class="line">宏任务同步任务一：</span><br><span class="line">	console.log(&#39;script start&#39;)</span><br><span class="line">宏任务同步任务二：</span><br><span class="line">	async1();</span><br><span class="line">	执行async1中的代码</span><br><span class="line">    	步骤一：console.log(&#39;async1 start&#39;);</span><br><span class="line">    	步骤二：执行async2();</span><br><span class="line">    	       console.log(&#39;async2&#39;);</span><br><span class="line">  		步骤三：执行被阻塞，console.log(&#39;asnyc1 end&#39;)放到微任务异步的第一个</span><br><span class="line">  	</span><br><span class="line">宏任务同步任务三：</span><br><span class="line">	new Promise()</span><br><span class="line">	执行Promise中的代码</span><br><span class="line">		console.log(&#39;promise1&#39;);</span><br><span class="line">		reslove()方法执行后结束promise;</span><br><span class="line">		then()方法中的console.log(&#39;promise2&#39;)放到微任务异步的第二个</span><br><span class="line">宏任务同步任务四：</span><br><span class="line">	console.log(&#39;script end&#39;);</span><br><span class="line">微任务异步任务一：</span><br><span class="line">	console.log(&#39;asnyc1 end&#39;);</span><br><span class="line">微任务异步任务二：</span><br><span class="line">	console.log(&#39;promise2&#39;)</span><br><span class="line">宏任务异步任务一：</span><br><span class="line">	console.log(&#39;setTimeOut&#39;);</span><br></pre></td></tr></table></figure>

<h3 id="js中字符串与数字间的运算"><a href="#js中字符串与数字间的运算" class="headerlink" title="js中字符串与数字间的运算"></a>js中字符串与数字间的运算</h3><h4 id="字符串-数字"><a href="#字符串-数字" class="headerlink" title="字符串+数字"></a>字符串+数字</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;12&quot;+34&#x3D;&quot;1234&quot;;</span><br></pre></td></tr></table></figure>

<p>带双引号的为字符串，如果和一个数字相加，那么它的结果为字符串。除非两个数字都不带双引号，则才可以实现两个数字的相加。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">12+34&#x3D;46;</span><br></pre></td></tr></table></figure>

<h4 id="第一个（无论是字串还是数字）前面有符号"><a href="#第一个（无论是字串还是数字）前面有符号" class="headerlink" title="第一个（无论是字串还是数字）前面有符号"></a>第一个（无论是字串还是数字）前面有符号</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">+&quot;12&quot;+34&#x3D;46;</span><br></pre></td></tr></table></figure>

<p>因为”12”前面有+号（或者叫连字符），+号前面没有别的东西了，所以就判断它表示的是 一个<strong>正数（+12）</strong>，进而将“12”转换成了数字。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">+12 + &quot;34&quot; &#x3D; 12 + &quot;34&quot; &#x3D;&quot;1234&quot;   &#x2F;&#x2F;这种结果是第一种的字符串+数字类型，结果为字符串。</span><br></pre></td></tr></table></figure>

<h4 id="减法乘法除法运算"><a href="#减法乘法除法运算" class="headerlink" title="减法乘法除法运算"></a>减法乘法除法运算</h4><p>1）如果字符里面为纯的数字，将会转换为数字类型进行运算</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;13&quot;-12&#x3D;1;</span><br><span class="line">&quot;5&quot;*6&#x3D;30;</span><br><span class="line">&quot;6&quot;&#x2F;2&#x3D;3;</span><br></pre></td></tr></table></figure>

<p>2)如果有字母或者特殊符号进行运算，结果将会出现NaN</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var res &#x3D; &quot;666hhh&quot;-“34”；</span><br><span class="line">console.log(res);   &#x2F;&#x2F;NaN;</span><br></pre></td></tr></table></figure>

<h3 id="js作用域"><a href="#js作用域" class="headerlink" title="js作用域"></a>js作用域</h3><h4 id="ES6-ECMAScript-6"><a href="#ES6-ECMAScript-6" class="headerlink" title="ES6 (ECMAScript 6)"></a>ES6 (ECMAScript 6)</h4><p>ECMAScript和JavaScript关系：<br>   ECMAScript是一个国际通过的标准化脚本语言。JavaScript由ECMAScript和DOM、BOM三者组成。可以简单理解为：ECMAScript是JavaScript的语言规范，JavaScript是ECMAScript的实现和扩展。</p>
<h4 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h4><p><strong>JS中作用域有</strong>：全局作用域、函数作用域。没有块作用域的概念。</p>
<p><strong>ES6中新增了块级作用域：</strong><br>块作用域由 { } 包括，if语句和for语句里面的{ }也属于块作用域。</p>
<p><strong>结论：</strong></p>
<p>通过var定义的变量可以跨块作用域访问到。</p>
<p>通过var定义的变量不能跨函数作用域访问到。</p>
<p>if语句和for语句中用var定义的变量可以在外面访问到，if语句和for语句属于块作用域，不属于函数作用域。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        var a &#x3D; 1;</span><br><span class="line">        console.log(a); &#x2F;&#x2F; 1</span><br><span class="line">    &#125;</span><br><span class="line">    console.log(a); &#x2F;&#x2F; 1</span><br><span class="line">    &#x2F;&#x2F; 可见，通过var定义的变量可以跨块作用域访问到。</span><br><span class="line"></span><br><span class="line">    (function A() &#123;</span><br><span class="line">        var b &#x3D; 2;</span><br><span class="line">        console.log(b); &#x2F;&#x2F; 2</span><br><span class="line">    &#125;)();</span><br><span class="line">    &#x2F;&#x2F; console.log(b); &#x2F;&#x2F; 报错，</span><br><span class="line">    &#x2F;&#x2F; 可见，通过var定义的变量不能跨函数作用域访问到</span><br><span class="line"></span><br><span class="line">    if(true) &#123;</span><br><span class="line">        var c &#x3D; 3;</span><br><span class="line">    &#125;</span><br><span class="line">    console.log(c); &#x2F;&#x2F; 3</span><br><span class="line">    for(var i &#x3D; 0; i &lt; 4; i++) &#123;</span><br><span class="line">        var d &#x3D; 5;</span><br><span class="line">    &#125;;</span><br><span class="line">    console.log(i);    &#x2F;&#x2F; 4   (循环结束i已经是4，所以此处i为4)</span><br><span class="line">    console.log(d); &#x2F;&#x2F; 5</span><br><span class="line">    &#x2F;&#x2F; if语句和for语句中用var定义的变量可以在外面访问到，</span><br><span class="line">    &#x2F;&#x2F; 可见，if语句和for语句属于块作用域，不属于函数作用域。</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>



<p><strong>var let const 区别</strong></p>
<p>var定义的变量，没有块的概念，可以跨块访问, 不能跨函数访问。<br>let定义的变量，只能在块作用域里访问，不能跨块访问，也不能跨函数访问。<br>const用来定义常量，使用时必须初始化(即必须赋值)，不能跨块访问，也不能跨函数访问，而且不能修改。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt;</span><br><span class="line">    &#x2F;&#x2F; 块作用域</span><br><span class="line">    &#123;</span><br><span class="line">        var a &#x3D; 1;</span><br><span class="line">        let b &#x3D; 2;</span><br><span class="line">        const c &#x3D; 3;</span><br><span class="line">        &#x2F;&#x2F; c &#x3D; 4; &#x2F;&#x2F; 报错</span><br><span class="line">        var aa;</span><br><span class="line">        let bb;</span><br><span class="line">        &#x2F;&#x2F; const cc; &#x2F;&#x2F; 报错</span><br><span class="line">        console.log(a); &#x2F;&#x2F; 1</span><br><span class="line">        console.log(b); &#x2F;&#x2F; 2</span><br><span class="line">        console.log(c); &#x2F;&#x2F; 3</span><br><span class="line">        console.log(aa); &#x2F;&#x2F; undefined</span><br><span class="line">        console.log(bb); &#x2F;&#x2F; undefined</span><br><span class="line">    &#125;</span><br><span class="line">    console.log(a); &#x2F;&#x2F; 1</span><br><span class="line">    &#x2F;&#x2F; console.log(b); &#x2F;&#x2F; 报错</span><br><span class="line">    &#x2F;&#x2F; console.log(c); &#x2F;&#x2F; 报错</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 函数作用域</span><br><span class="line">    (function A() &#123;</span><br><span class="line">        var d &#x3D; 5;</span><br><span class="line">        let e &#x3D; 6;</span><br><span class="line">        const f &#x3D; 7;</span><br><span class="line">        console.log(d); &#x2F;&#x2F; 5</span><br><span class="line">        console.log(e); &#x2F;&#x2F; 6  (在同一个&#123; &#125;中,也属于同一个块，可以正常访问到)</span><br><span class="line">        console.log(f); &#x2F;&#x2F; 7  (在同一个&#123; &#125;中,也属于同一个块，可以正常访问到)</span><br><span class="line"></span><br><span class="line">    &#125;)();</span><br><span class="line">    &#x2F;&#x2F; console.log(d); &#x2F;&#x2F; 报错</span><br><span class="line">    &#x2F;&#x2F; console.log(e); &#x2F;&#x2F; 报错</span><br><span class="line">    &#x2F;&#x2F; console.log(f); &#x2F;&#x2F; 报错</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="js判断数据类型"><a href="#js判断数据类型" class="headerlink" title="js判断数据类型"></a>js判断数据类型</h3><p>类型判断的三种方式</p>
<h4 id="typeof"><a href="#typeof" class="headerlink" title="typeof"></a>typeof</h4><p>typeof可以识别出基本类型String，、Number、Boolean、Undefined、Symbol，</p>
<p>但是不能识别null。不能识别引用数据类型，会把null、array、object统一归为object类型,但是可以识别出function。</p>
<p>typeof 返回的是字符串，有六种可能：”number”、”string”、”boolean”、”object”、”function”、”undefined”</p>
<p><strong>类型分析</strong></p>
<p>未定义的值和定义未赋值的为undefined，null是一种特殊的object,NaN是一种特殊的number。</p>
<p>typeof null（’object’）</p>
<p>typeof NaN （’number’）</p>
<p><strong>题外话：比较运算</strong></p>
<p>（1）undefined与null是相等；</p>
<p>（2）NaN与任何值都不相等，与自己也不相等。</p>
<h4 id="instanceof"><a href="#instanceof" class="headerlink" title="instanceof"></a>instanceof</h4><p>instanceof不能识别出基本的数据类型 String,、Number、Boolean、Undefined、Null、Symbol </p>
<p>不能判断<code>unll和undefined</code>会直接报错</p>
<p>但是可以检测出引用类型,如array、object、function</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 判断是否是函数</span><br><span class="line">function fn()&#123;&#125;	</span><br><span class="line">fn instanceof Function &#x2F;&#x2F; true</span><br><span class="line">let fn2 &#x3D; ()&#x3D;&gt;&#123;&#125;;</span><br><span class="line">fn2 instanceof Function &#x2F;&#x2F; true</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 判断是否是对象</span><br><span class="line">(&#123;&#125;) instanceof Object &#x2F;&#x2F; true</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 判断是否是数组</span><br><span class="line">[] instanceof Array &#x2F;&#x2F; true</span><br><span class="line">let list &#x3D; new Array</span><br><span class="line">list instanceof Array &#x2F;&#x2F; true</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 判断是否是字符串</span><br><span class="line">let str &#x3D; &#39;aaa&#39;</span><br><span class="line">str instanceof Object &#x2F;&#x2F; false，str不是String 的实例</span><br><span class="line">let str &#x3D; new String()</span><br><span class="line">str instanceof String &#x2F;&#x2F; true</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 判断是否是null </span><br><span class="line">null instanceof null  &#x2F;&#x2F; 报错 Uncaught TypeError: Right-hand side of &#39;instanceof&#39; is not an object</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 判断是否是undefined</span><br><span class="line">undefined instanceof undefined &#x2F;&#x2F; Uncaught TypeError: Right-hand side of &#39;instanceof&#39; is not an object</span><br></pre></td></tr></table></figure>

<h4 id="constructor-NaN"><a href="#constructor-NaN" class="headerlink" title="constructor"></a>constructor</h4><p>constructor可以判断基本数据类型的数据，string number booolean symbol</p>
<p>constructor可以判断引用数据类型的数据，Array，Object，Function</p>
<p>null、undefined没有construstor方法，因此constructor不能判断undefined和null。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; string</span><br><span class="line">         var str &#x3D; &#39;abcd&#39;;</span><br><span class="line">         console.log(str.constructor &#x3D;&#x3D;&#x3D; String);</span><br><span class="line"> </span><br><span class="line">         &#x2F;&#x2F; number</span><br><span class="line">         var num &#x3D; 10010;</span><br><span class="line">         console.log(num.constructor &#x3D;&#x3D;&#x3D; Number);</span><br><span class="line"> </span><br><span class="line">         &#x2F;&#x2F; boolean</span><br><span class="line">         var bool &#x3D; false;</span><br><span class="line">         console.log(bool.constructor &#x3D;&#x3D;&#x3D; Boolean);</span><br><span class="line"> </span><br><span class="line">         &#x2F;&#x2F; symbol</span><br><span class="line">         var sym &#x3D; Symbol();</span><br><span class="line">         console.log(sym.constructor &#x3D;&#x3D;&#x3D; Symbol);</span><br><span class="line">         </span><br><span class="line">         &#x2F;&#x2F; array</span><br><span class="line">         var array &#x3D; [];</span><br><span class="line">         console.log(sym.constructor &#x3D;&#x3D;&#x3D; Array);</span><br><span class="line">         </span><br><span class="line">         &#x2F;&#x2F; object</span><br><span class="line">         var object &#x3D; &#123;&#125;;</span><br><span class="line">         console.log(sym.constructor &#x3D;&#x3D;&#x3D; Object);</span><br><span class="line">         </span><br><span class="line">         &#x2F;&#x2F; function</span><br><span class="line">         var function &#x3D; function()&#123;&#125;;</span><br><span class="line">         console.log(sym.constructor &#x3D;&#x3D;&#x3D; Function);</span><br><span class="line">         </span><br><span class="line">         &#x2F;&#x2F; undefined</span><br><span class="line">         &#x2F;&#x2F; var unde &#x3D; undefined;</span><br><span class="line">         &#x2F;&#x2F; console.log(unde.constructor &#x3D;&#x3D;&#x3D; Object);</span><br><span class="line">	&#x2F;&#x2F;Uncaught TypeError: Cannot read properties of undefined (reading &#39;constructor&#39;)</span><br><span class="line">	</span><br><span class="line">         &#x2F;&#x2F; null</span><br><span class="line">         &#x2F;&#x2F; var nu &#x3D; null;</span><br><span class="line">         &#x2F;&#x2F; console.log(nu.constructor &#x3D;&#x3D;&#x3D; Object);</span><br><span class="line">         &#x2F;&#x2F;Uncaught TypeError: Cannot read properties of null (reading &#39;constructor&#39;)</span><br></pre></td></tr></table></figure>

<h4 id="Object-prototype-toString-call"><a href="#Object-prototype-toString-call" class="headerlink" title="Object.prototype.toString.call"></a>Object.prototype.toString.call</h4><p>基本全覆盖</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;    </span><br><span class="line">            &#x2F;&#x2F; 基本数据类型</span><br><span class="line">            &#x2F;&#x2F;      string</span><br><span class="line">            var str &#x3D; &#39;abc&#39;;</span><br><span class="line">            console.log(Object.prototype.toString.call(str));</span><br><span class="line">            &#x2F;&#x2F;[object String]</span><br><span class="line">            </span><br><span class="line">            &#x2F;&#x2F;      number</span><br><span class="line">            var num &#x3D; 123;</span><br><span class="line">            console.log(Object.prototype.toString.call(num));</span><br><span class="line">            &#x2F;&#x2F;[object Number]</span><br><span class="line">            </span><br><span class="line">            &#x2F;&#x2F;      NaN (特殊的number)</span><br><span class="line">            var nan &#x3D; NaN;</span><br><span class="line">            console.log(Object.prototype.toString.call(nan));</span><br><span class="line">			&#x2F;&#x2F;[object Number]</span><br><span class="line">            </span><br><span class="line">            &#x2F;&#x2F;      boolean</span><br><span class="line">            var bool &#x3D; true;</span><br><span class="line">            console.log(Object.prototype.toString.call(bool));</span><br><span class="line">            &#x2F;&#x2F;[object Boolean]</span><br><span class="line">            </span><br><span class="line">            &#x2F;&#x2F;      undefined</span><br><span class="line">            var unde &#x3D; undefined;</span><br><span class="line">            console.log(Object.prototype.toString.call(unde));</span><br><span class="line">            &#x2F;&#x2F;[object Undefined]</span><br><span class="line">            </span><br><span class="line">            &#x2F;&#x2F;      null</span><br><span class="line">            var nu &#x3D; null;</span><br><span class="line">            console.log(Object.prototype.toString.call(nu));</span><br><span class="line">            &#x2F;&#x2F;[object Null]</span><br><span class="line">            </span><br><span class="line">            &#x2F;&#x2F;      symbol</span><br><span class="line">            var sym &#x3D; Symbol();</span><br><span class="line">            console.log(Object.prototype.toString.call(sym));</span><br><span class="line"> 			&#x2F;&#x2F;[object Symbol]</span><br><span class="line"> </span><br><span class="line">            &#x2F;&#x2F; 引用数据类型</span><br><span class="line">            &#x2F;&#x2F;      object</span><br><span class="line">            var obj &#x3D; &#123;&#125;;</span><br><span class="line">            console.log(Object.prototype.toString.call(obj));</span><br><span class="line">            &#x2F;&#x2F;[object Object]</span><br><span class="line">            </span><br><span class="line">            &#x2F;&#x2F;      arr</span><br><span class="line">            var arr &#x3D; [];</span><br><span class="line">            console.log(Object.prototype.toString.call(arr));</span><br><span class="line">            &#x2F;&#x2F;[object Array]</span><br><span class="line">            </span><br><span class="line">            &#x2F;&#x2F;      function</span><br><span class="line">            function a()&#123;&#125;</span><br><span class="line">            console.log(Object.prototype.toString.call(a));</span><br><span class="line">            &#x2F;&#x2F;[object Function]</span><br><span class="line">        &lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<p><strong>结论</strong></p>
<blockquote>
<p>判断基本数据类型：使用的是typeof</p>
<p> 判断引用数据类型：使用的是instanceof</p>
<p>不知道是什么类型：使用的是Object.prototype.toString.call</p>
</blockquote>
<h3 id="js数据类型转换（Number、parseInt、parseFloat）"><a href="#js数据类型转换（Number、parseInt、parseFloat）" class="headerlink" title="js数据类型转换（Number、parseInt、parseFloat）"></a>js数据类型转换（Number、parseInt、parseFloat）</h3><h4 id="Number"><a href="#Number" class="headerlink" title="Number"></a>Number</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">            &#x2F;&#x2F;string</span><br><span class="line">            &#x2F;&#x2F; console.log(Number(&#39;123&#39;));</span><br><span class="line">            &#x2F;&#x2F; console.log(Number(&#39;-123&#39;));</span><br><span class="line">            &#x2F;&#x2F; console.log(Number(&#39;1.23&#39;));</span><br><span class="line">            &#x2F;&#x2F; console.log(Number(&#39;-1.23&#39;));</span><br><span class="line">            &#x2F;&#x2F; console.log(Number(&#39;0&#39;));    &#x2F;&#x2F;----&gt;0</span><br><span class="line"> </span><br><span class="line">            &#x2F;&#x2F; 空字符串 Number转换之后是0</span><br><span class="line">            console.log(Number(&#39;&#39;));     &#x2F;&#x2F;-----&gt;0</span><br><span class="line">            &#x2F;&#x2F; 如果字符串中都是空格的话 那么结果就是0</span><br><span class="line">            console.log(Number(&#39;         &#39;)); &#x2F;&#x2F;-----&gt;0</span><br><span class="line">            &#x2F;&#x2F; NaN</span><br><span class="line">            &#x2F;&#x2F; console.log(Number(&#39;a&#39;));</span><br><span class="line">            &#x2F;&#x2F; console.log(Number(&#39;李&#39;));</span><br><span class="line">            &#x2F;&#x2F; console.log(Number(&#39;1a&#39;));</span><br><span class="line"> </span><br><span class="line">            &#x2F;&#x2F; number</span><br><span class="line">            &#x2F;&#x2F; console.log(Number(1));</span><br><span class="line">            &#x2F;&#x2F; console.log(Number(-1));</span><br><span class="line">            &#x2F;&#x2F; console.log(Number(1.1));</span><br><span class="line">            &#x2F;&#x2F; console.log(Number(-1.1));</span><br><span class="line">            &#x2F;&#x2F; console.log(Number(0));      ------&gt;0</span><br><span class="line">            &#x2F;&#x2F; console.log(Number(NaN));  &#x2F;&#x2F;NaN</span><br><span class="line">            &#x2F;&#x2F; console.log(Number(Infinity));  &#x2F;&#x2F;Infinity</span><br><span class="line">            &#x2F;&#x2F; console.log(Number(Number.MAX_VALUE));</span><br><span class="line">            &#x2F;&#x2F; console.log(Number(Math.PI));</span><br><span class="line"> </span><br><span class="line">            &#x2F;&#x2F; boolean</span><br><span class="line">            &#x2F;&#x2F; console.log(Number(true)); &#x2F;&#x2F; 1</span><br><span class="line">            &#x2F;&#x2F; console.log(Number(false));&#x2F;&#x2F; 0  ------&gt;0</span><br><span class="line"> </span><br><span class="line">            &#x2F;&#x2F; undefined  </span><br><span class="line">            &#x2F;&#x2F; console.log(Number(undefined));  &#x2F;&#x2F;NaN</span><br><span class="line"> </span><br><span class="line">            &#x2F;&#x2F; null</span><br><span class="line">            &#x2F;&#x2F; console.log(Number(null));          &#x2F;&#x2F;-------&gt;0</span><br><span class="line">        &lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="parseInt"><a href="#parseInt" class="headerlink" title="parseInt"></a>parseInt</h4><p>parseInt是一个全局方法,它可以把值转换为整数</p>
<ul>
<li><p>第1步,先解析位置0处的字符,如果不是有效数字,则直接返回 NaN.</p>
</li>
<li><p>第2步,如果位置0处的字符是数字,或者可以转换为有效数字,则继续解析位置1处的字符,如果不是有效数字,则直接返回位置0处的有效数字。</p>
</li>
<li><p>第3步,以此类推,按从左到右的顺序,逐个分析每个字符,直到发现非数字字符为止。</p>
</li>
<li><p>第4步,parseInt()将把前面分析合法的数字字符全部转换为数值并返回。</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">            &#x2F;&#x2F; string</span><br><span class="line">            console.log(parseInt(&#39;1&#39;));</span><br><span class="line">            console.log(parseInt(&#39;-1&#39;));</span><br><span class="line">            &#x2F;&#x2F; parseInt解析整数  </span><br><span class="line">            &#x2F;&#x2F; 解析到第一个非数字的字符就停止</span><br><span class="line">            console.log(parseInt(&#39;1.2&#39;));</span><br><span class="line">            console.log(parseInt(&#39;-1.2&#39;));</span><br><span class="line">            console.log(parseInt(&#39;0&#39;));</span><br><span class="line"> </span><br><span class="line">            console.log(parseInt(&#39;1a2b3c&#39;));</span><br><span class="line">            console.log(parseInt(&#39;123a&#39;));</span><br><span class="line">            console.log(parseInt(&#39;a123&#39;));</span><br><span class="line"> </span><br><span class="line">            &#x2F;&#x2F; number</span><br><span class="line">            console.log(parseInt(1));</span><br><span class="line">            console.log(parseInt(-1));</span><br><span class="line">            console.log(parseInt(1.2));</span><br><span class="line">            console.log(parseInt(-1.2));</span><br><span class="line">            console.log(parseInt(0));</span><br><span class="line">            console.log(parseInt(NaN));</span><br><span class="line">            console.log(parseInt(Infinity));</span><br><span class="line"> </span><br><span class="line">            &#x2F;&#x2F; boolean</span><br><span class="line">            console.log(parseInt(true));</span><br><span class="line">            console.log(parseInt(false));</span><br><span class="line"> </span><br><span class="line">            &#x2F;&#x2F; undefined</span><br><span class="line">            console.log(parseInt(undefined));</span><br><span class="line"> </span><br><span class="line">            &#x2F;&#x2F; null</span><br><span class="line">            console.log(parseInt(null));</span><br><span class="line">        &lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="parseFloat"><a href="#parseFloat" class="headerlink" title="parseFloat"></a>parseFloat</h4><p>parseFloat()也是一个全局方法，它可以把值转换成浮点数，即它能够识别第一个出现的小数点，而第二个小数点视为非法。解析过程和parseInt相同。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    &#x2F;&#x2F; string</span><br><span class="line">    console.log(parseFloat(&#39;1&#39;));</span><br><span class="line">    console.log(parseFloat(&#39;-1&#39;));</span><br><span class="line">    console.log(parseFloat(&#39;1.2&#39;));</span><br><span class="line">    console.log(parseFloat(&#39;-1.2&#39;));</span><br><span class="line">    console.log(parseFloat(&#39;0&#39;));</span><br><span class="line"> </span><br><span class="line">    console.log(parseFloat(&#39;1.2.3.4&#39;));</span><br><span class="line">    console.log(parseFloat(&#39;1.2a.3&#39;));</span><br><span class="line">    console.log(parseFloat(&#39;a1.2&#39;));</span><br><span class="line"> </span><br><span class="line">    &#x2F;&#x2F; number</span><br><span class="line">    console.log(parseFloat(1));</span><br><span class="line">    console.log(parseFloat(-1));</span><br><span class="line">    console.log(parseFloat(1.3));</span><br><span class="line">    console.log(parseFloat(-1.3));</span><br><span class="line">    console.log(parseFloat(0));</span><br><span class="line">    console.log(parseFloat(0.0));</span><br><span class="line"> </span><br><span class="line">    console.log(parseFloat(NaN));</span><br><span class="line">    console.log(parseFloat(Infinity)); &#x2F;&#x2F;Infinity</span><br><span class="line"> </span><br><span class="line">    &#x2F;&#x2F; boolean</span><br><span class="line">    console.log(parseFloat(true));</span><br><span class="line">    console.log(parseFloat(false));</span><br><span class="line"> </span><br><span class="line">    &#x2F;&#x2F; undefined</span><br><span class="line">    console.log(parseFloat(undefined));</span><br><span class="line"> </span><br><span class="line">    &#x2F;&#x2F; null</span><br><span class="line">    console.log(parseFloat(null));</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<p><strong>数字类型转换时</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">console.log(parseInt(Infinity));     返回NaN</span><br><span class="line"></span><br><span class="line">console.log(parseFloat(Infinity));     返回Infinity</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2023/01/03/svn/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dali">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DaliBlogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/01/03/svn/" itemprop="url">svn</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2023-01-03T10:18:10+08:00">
                2023-01-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="新建SVN仓库并上传项目"><a href="#新建SVN仓库并上传项目" class="headerlink" title="新建SVN仓库并上传项目"></a>新建SVN仓库并上传项目</h3><p>需求：服务器为linux，现在本地有一个项目需要上传svn</p>
<p>linux搭建SVN服务器:<a href="https://blog.csdn.net/s735819795/article/details/80497601" target="_blank" rel="noopener">https://blog.csdn.net/s735819795/article/details/80497601</a></p>
<p>方法：</p>
<ul>
<li><p>1.安装tortoiseSVN，过程不赘述。</p>
</li>
<li><p>2.桌面右键–&gt;tortoiseSVN–&gt;Repo-browser ，连接到原有的svn仓库。连接上之后显示如下：</p>
</li>
</ul>
<p><img src="https://img-blog.csdn.net/20180529164003280?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3M3MzU4MTk3OTU=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<ul>
<li><p>3.在你想要存放新项目的文件夹上右键，选择Create Folder，输入文件夹名字。</p>
</li>
<li><p>4.输完之后会弹出一个提示框，让你输入这个文件夹的备注。注意，这里最好不要写汉字，我一开始输入的汉字，但是报了access denied错误，改成英文成功创建。</p>
</li>
<li><p>5.找一个空的文件夹，最好不要乱找，就在你平常存项目的地方新建一个就行。然后右键这个文件夹–&gt;svn checkout如下图：</p>
</li>
</ul>
<p><img src="https://img-blog.csdn.net/20180529164241804?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3M3MzU4MTk3OTU=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>svn的路径就选择你刚才在svn中创建的你要放项目的那个文件夹，然后OK。</p>
<ul>
<li>6.将你要上传的项目放在这个文件夹里面。</li>
</ul>
<p><img src="https://img-blog.csdn.net/20180529164330798?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3M3MzU4MTk3OTU=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<ul>
<li>7.右键你放进来的项目–&gt;svn add</li>
</ul>
<p><img src="https://img-blog.csdn.net/20180529164418795?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3M3MzU4MTk3OTU=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<ul>
<li>8.选择select all 点击ok</li>
</ul>
<p><img src="https://img-blog.csdn.net/20180529164504529?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3M3MzU4MTk3OTU=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<ul>
<li>9.等待add成功后点击OK</li>
</ul>
<p><img src="https://img-blog.csdn.net/20180529164614363?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3M3MzU4MTk3OTU=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<ul>
<li>10.右键你的项目–&gt;svn commit。</li>
</ul>
<p>​    <img src="https://img-blog.csdn.net/20180529164737877?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3M3MzU4MTk3OTU=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<ul>
<li>11.选择all 点击OK</li>
</ul>
<p><img src="https://img-blog.csdn.net/20180529164840440?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3M3MzU4MTk3OTU=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>至此，就算完成了。</p>
<h3 id="svn怎么下载代码到本地"><a href="#svn怎么下载代码到本地" class="headerlink" title="svn怎么下载代码到本地"></a>svn怎么下载代码到本地</h3><ul>
<li>1.在我们安装好svn时，在指定的目录中点击鼠标右键SVN Checkout，弹出以下窗口。（在文件夹下各自建好前后台的文件夹分别check）</li>
</ul>
<p><img src="https://images2015.cnblogs.com/blog/1016915/201704/1016915-20170412104128282-534728975.png" alt="img"></p>
<ul>
<li><p>2.在URL of repository:（存储库的URL）输入svn地址</p>
</li>
<li><p>3.Checkout directory:（查看目录） 会自动填写</p>
</li>
<li><p>4.Checkout Depth:(就是指定Subversion对特定树的深度限制活动的范围。)其中有四个选项，默认选择第一个选项Fully recursive(全部递归)。</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1、Fully recursive——全递归：检出完整的目录树，包含所有的文件或子目录。</span><br><span class="line">2、Immediate children,including folders——直接子节点，包含文件夹：检出目录，包含其中的文件或子目录，但是不递归展开子目录。</span><br><span class="line">3、Only file chlidren——仅文件子节点：检出指定目录，包含所有文件，但是不检出任何子目录。</span><br><span class="line">4、Only this item——仅此项：只检出目录。不包含其中的文件或子目录</span><br></pre></td></tr></table></figure>

<ul>
<li><p>5.omit externals (忽略外部设备，默认不选择) choose items(选择项目，默认不选择)</p>
</li>
<li><p>6.ReviSion 版本信息</p>
</li>
</ul>
<p>默认选择HEAD revision ：数据库中的最新版本（默认选择）</p>
<p>revision 为历史版本 点击show log可以选择历史版本</p>
<ul>
<li>7.点击ok即可下载代码。</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/12/13/vue%E4%B9%8B%E6%96%87%E4%BB%B6%E9%A2%84%E8%A7%88/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dali">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DaliBlogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/12/13/vue%E4%B9%8B%E6%96%87%E4%BB%B6%E9%A2%84%E8%A7%88/" itemprop="url">vue之文件预览</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-12-13T13:30:18+08:00">
                2022-12-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="webm-mp4-无法自动播放音频，只能播放视频"><a href="#webm-mp4-无法自动播放音频，只能播放视频" class="headerlink" title=".webm,.mp4 (无法自动播放音频，只能播放视频)"></a>.webm,.mp4 (无法自动播放音频，只能播放视频)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;video src&#x3D;&quot;..&#x2F;..&#x2F;assets&#x2F;test-preview&#x2F;mp4.mp4&quot;</span><br><span class="line">               id&#x3D;&quot;test_video&quot;</span><br><span class="line">               style&#x3D;&quot;width:400px;height:400px;object-fit: fill;&quot;</span><br><span class="line">               muted&#x3D;&quot;muted&quot;</span><br><span class="line">               controls&gt;&lt;&#x2F;video&gt;</span><br><span class="line"> </span><br><span class="line"> &#x2F;&#x2F;手动播放(必须的加上静音字段muted)</span><br><span class="line"> var video &#x3D; document.getElementById(&quot;test_video&quot;);</span><br><span class="line"> &#x2F;&#x2F;调用video标签的播放函数</span><br><span class="line"> video &amp;&amp; video.play();</span><br></pre></td></tr></table></figure>

<h3 id="ogg-无法自动播放）"><a href="#ogg-无法自动播放）" class="headerlink" title=".ogg (无法自动播放）"></a>.ogg (无法自动播放）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;audio src&#x3D;&quot;..&#x2F;..&#x2F;assets&#x2F;test-preview&#x2F;ogg.ogg&quot;</span><br><span class="line">               id&#x3D;&quot;test_ogg&quot;</span><br><span class="line">               style&#x3D;&quot;width:400px;height:400px;object-fit: fill;&quot;</span><br><span class="line">               muted&#x3D;&quot;muted&quot;</span><br><span class="line">               controls&gt;&lt;&#x2F;audio&gt;</span><br></pre></td></tr></table></figure>



<h3 id="pdf预览（vue-pdf，pdfjs-dist）"><a href="#pdf预览（vue-pdf，pdfjs-dist）" class="headerlink" title="pdf预览（vue-pdf，pdfjs-dist）"></a>pdf预览（vue-pdf，pdfjs-dist）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br></pre></td><td class="code"><pre><span class="line">npm install --save vue-pdf</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import pdf from &#39;vue-pdf&#39;</span><br><span class="line">export default &#123;</span><br><span class="line">  components:&#123;</span><br><span class="line">      pdf</span><br><span class="line">  &#125;,</span><br><span class="line">  data()&#123;</span><br><span class="line">      return &#123;</span><br><span class="line">      	&#x2F;&#x2F;如果是本地文件，则需要放在public路径下(file,是public下的文件夹)</span><br><span class="line">      	&#x2F;&#x2F;url:&#39;&#x2F;file&#x2F;pdf.pdf&#39;,</span><br><span class="line">          url:&quot;http:&#x2F;&#x2F;storage.xuetangx.com&#x2F;public_assets&#x2F;xuetangx&#x2F;PDF&#x2F;PlayerAPI_v1.0.6.pdf&quot;,</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;   </span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">  &lt;pdf </span><br><span class="line">    ref&#x3D;&quot;pdf&quot;</span><br><span class="line">    :src&#x3D;&quot;url&quot;&gt;</span><br><span class="line">  &lt;&#x2F;pdf&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">题外话---------</span><br><span class="line">vue-pdf 渐入佳境：</span><br><span class="line">其实，想要显示多页也没那么复杂，你每次就显示一页，我，直接v-for 循环，直接显示完，简单粗暴。</span><br><span class="line">页面代码:</span><br><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;div&gt;</span><br><span class="line">	&lt;pdf  v-for&#x3D;&quot;i in numPages&quot; :key&#x3D;&quot;i&quot;  :src&#x3D;&quot;url&quot; :page&#x3D;&quot;i&quot;&gt;&lt;&#x2F;pdf&gt;	</span><br><span class="line">	&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">	import pdf from &#39;vue-pdf&#39;</span><br><span class="line">	export default &#123;</span><br><span class="line">		components: &#123;</span><br><span class="line">			pdf</span><br><span class="line">		&#125;,</span><br><span class="line">		data()&#123;</span><br><span class="line">			 return&#123;</span><br><span class="line">				    url: &#39;&#39;,</span><br><span class="line">				    numPages:1,</span><br><span class="line">			 &#125;</span><br><span class="line">		 &#125;,</span><br><span class="line">		mounted: function() &#123;</span><br><span class="line">		  this.getNumPages(&quot;http:&#x2F;&#x2F;storage.xuetangx.com&#x2F;public_assets&#x2F;xuetangx&#x2F;PDF&#x2F;PlayerAPI_v1.0.6.pdf&quot;)</span><br><span class="line">		  </span><br><span class="line">		&#125;, </span><br><span class="line">		methods: &#123;</span><br><span class="line">			getNumPages(url) &#123;</span><br><span class="line">				var loadingTask &#x3D; pdf.createLoadingTask(url)</span><br><span class="line">				loadingTask.then(pdf &#x3D;&gt; &#123;</span><br><span class="line">					this.url &#x3D; loadingTask</span><br><span class="line">					this.numPages &#x3D; pdf.numPages</span><br><span class="line">				&#125;).catch((err) &#x3D;&gt; &#123;</span><br><span class="line">					console.error(&#39;pdf加载失败&#39;)</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;,</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">复制代码各个属性：</span><br><span class="line"></span><br><span class="line">url ：pdf 文件的路径，可以是本地路径，也可以是在线路径。</span><br><span class="line">numPages ： pdf 文件总页数。</span><br><span class="line"></span><br><span class="line">getNumPages 计算总页数，顺便给url和numPages赋值。</span><br><span class="line">唯一需要大家注意的是这句：</span><br><span class="line">this.getNumPages(&quot;http:&#x2F;&#x2F;storage.xuetangx.com&#x2F;public_assets&#x2F;xuetangx&#x2F;PDF&#x2F;PlayerAPI_v1.0.6.pdf&quot;)</span><br><span class="line">复制代码注意啊，这句不一定非要写到mounted里面，你想写哪就写哪，比如你前端请求后端，后端返回一个pdf 的url，在那里写就行，写在你需要的地方。</span><br><span class="line">vue-pdf 轻车熟路：</span><br><span class="line">很多人看到这，就这，就这？万一，我pdf有一千页，我浏览器还不得裂开，我追求的是那种在微醺的下午，一页一页的翻看的感觉，你能给我吗？</span><br><span class="line">我不能，才怪，保证满足你。</span><br><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;div&gt;</span><br><span class="line">		&lt;div class&#x3D;&quot;tools&quot;&gt;</span><br><span class="line">			&lt;bk-button :theme&#x3D;&quot;&#39;default&#39;&quot; type&#x3D;&quot;submit&quot; :title&#x3D;&quot;&#39;基础按钮&#39;&quot; @click.stop&#x3D;&quot;prePage&quot; class&#x3D;&quot;mr10&quot;&gt; 上一页&lt;&#x2F;bk-button&gt;</span><br><span class="line">			&lt;bk-button :theme&#x3D;&quot;&#39;default&#39;&quot; type&#x3D;&quot;submit&quot; :title&#x3D;&quot;&#39;基础按钮&#39;&quot; @click.stop&#x3D;&quot;nextPage&quot; class&#x3D;&quot;mr10&quot;&gt; 下一页&lt;&#x2F;bk-button&gt;</span><br><span class="line">			&lt;div class&#x3D;&quot;page&quot;&gt;&#123;&#123;pageNum&#125;&#125;&#x2F;&#123;&#123;pageTotalNum&#125;&#125; &lt;&#x2F;div&gt;</span><br><span class="line">			&lt;bk-button :theme&#x3D;&quot;&#39;default&#39;&quot; type&#x3D;&quot;submit&quot; :title&#x3D;&quot;&#39;基础按钮&#39;&quot; @click.stop&#x3D;&quot;clock&quot; class&#x3D;&quot;mr10&quot;&gt; 顺时针&lt;&#x2F;bk-button&gt;</span><br><span class="line">			&lt;bk-button :theme&#x3D;&quot;&#39;default&#39;&quot; type&#x3D;&quot;submit&quot; :title&#x3D;&quot;&#39;基础按钮&#39;&quot; @click.stop&#x3D;&quot;counterClock&quot; class&#x3D;&quot;mr10&quot;&gt; 逆时针&lt;&#x2F;bk-button&gt;</span><br><span class="line">		&lt;&#x2F;div&gt;</span><br><span class="line">		&lt;pdf ref&#x3D;&quot;pdf&quot; </span><br><span class="line">		:src&#x3D;&quot;url&quot; </span><br><span class="line">		:page&#x3D;&quot;pageNum&quot;</span><br><span class="line">		:rotate&#x3D;&quot;pageRotate&quot;  </span><br><span class="line">		@progress&#x3D;&quot;loadedRatio &#x3D; $event&quot;</span><br><span class="line">		@page-loaded&#x3D;&quot;pageLoaded($event)&quot; </span><br><span class="line">		@num-pages&#x3D;&quot;pageTotalNum&#x3D;$event&quot; </span><br><span class="line">		@error&#x3D;&quot;pdfError($event)&quot; </span><br><span class="line">		@link-clicked&#x3D;&quot;page &#x3D; $event&quot;&gt;</span><br><span class="line">		&lt;&#x2F;pdf&gt;</span><br><span class="line">	&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">复制代码接下来，我们一一介绍这些都是个啥。</span><br><span class="line">参数介绍：</span><br><span class="line"></span><br><span class="line">page: 当前显示的页数，比如第一页page&#x3D;1</span><br><span class="line">rotate ： 旋转角度，比如0就是不旋转，+90，-90 就是水平旋转。</span><br><span class="line">progress ：当前页面的加载进度，范围是0-1 ，等于1的时候代表当前页已经完全加载完成了。</span><br><span class="line">page-loaded ：页面加载成功的回调函数，不咋能用到。</span><br><span class="line">num-pages ：总页数</span><br><span class="line">error ：加载错误的回调</span><br><span class="line">link-clicked：单机pdf内的链接会触发。</span><br><span class="line"></span><br><span class="line">其他：</span><br><span class="line"></span><br><span class="line">print 这个是打印函数。</span><br><span class="line">注意：谷歌浏览器会出现乱码，这个和字体有关系。</span><br><span class="line"></span><br><span class="line">来，js代码走一个:</span><br><span class="line">&lt;script&gt;</span><br><span class="line">	import pdf from &#39;vue-pdf&#39;</span><br><span class="line">	export default &#123;</span><br><span class="line">		name: &#39;Home&#39;,</span><br><span class="line">		components: &#123;</span><br><span class="line">			pdf</span><br><span class="line">		&#125;,</span><br><span class="line">		data() &#123;</span><br><span class="line">			return &#123;</span><br><span class="line">				url: &quot;http:&#x2F;&#x2F;storage.xuetangx.com&#x2F;public_assets&#x2F;xuetangx&#x2F;PDF&#x2F;PlayerAPI_v1.0.6.pdf&quot;,</span><br><span class="line">				pageNum: 1,</span><br><span class="line">				pageTotalNum: 1,</span><br><span class="line">				pageRotate: 0,</span><br><span class="line">				&#x2F;&#x2F; 加载进度</span><br><span class="line">				loadedRatio: 0,</span><br><span class="line">				curPageNum: 0,</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		mounted: function() &#123;&#125;,</span><br><span class="line">		methods: &#123;</span><br><span class="line">            &#x2F;&#x2F; 上一页函数，</span><br><span class="line">			prePage() &#123;</span><br><span class="line">				var page &#x3D; this.pageNum</span><br><span class="line">				page &#x3D; page &gt; 1 ? page - 1 : this.pageTotalNum</span><br><span class="line">				this.pageNum &#x3D; page</span><br><span class="line">			&#125;,</span><br><span class="line">            &#x2F;&#x2F; 下一页函数</span><br><span class="line">			nextPage() &#123;</span><br><span class="line">				var page &#x3D; this.pageNum</span><br><span class="line">				page &#x3D; page &lt; this.pageTotalNum ? page + 1 : 1</span><br><span class="line">				this.pageNum &#x3D; page</span><br><span class="line">			&#125;,</span><br><span class="line">            &#x2F;&#x2F; 页面顺时针翻转90度。</span><br><span class="line">			clock() &#123;</span><br><span class="line">				this.pageRotate +&#x3D; 90</span><br><span class="line">			&#125;,</span><br><span class="line">            &#x2F;&#x2F; 页面逆时针翻转90度。</span><br><span class="line">			counterClock() &#123;</span><br><span class="line">				this.pageRotate -&#x3D; 90</span><br><span class="line">			&#125;,</span><br><span class="line">            &#x2F;&#x2F; 页面加载回调函数，其中e为当前页数</span><br><span class="line">			pageLoaded(e) &#123;</span><br><span class="line">				this.curPageNum &#x3D; e</span><br><span class="line">			&#125;,</span><br><span class="line">            &#x2F;&#x2F; 其他的一些回调函数。</span><br><span class="line">			pdfError(error) &#123;</span><br><span class="line">				console.error(error)</span><br><span class="line">			&#125;,</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">复制代码其他骚操作：</span><br><span class="line">&#x2F;&#x2F; 打印全部</span><br><span class="line">pdfPrintAll() &#123;</span><br><span class="line">	this.$refs.pdf.print()</span><br><span class="line">		&#125;,</span><br><span class="line">&#x2F;&#x2F; 打印指定部分</span><br><span class="line">pdfPrint() &#123;</span><br><span class="line">	this.$refs.pdf.print(100, [1, 2])</span><br><span class="line">	&#125;,</span><br><span class="line">复制代码具体样式什么的我就不贴出来了，这些都不是重点，完全可以改成自己喜欢的。</span><br><span class="line">成品展示：</span><br><span class="line"></span><br><span class="line">其他问题以及解决方案：</span><br><span class="line">如何加载本地pdf文件(2020.4.27更新)：</span><br><span class="line">评论区有人提到了这个问题，我今天中午的时候试了一下，完全是可以的，但是需要我们做一下本地配置flie-loader才行，否则webpack无法编译pdf类型的文件，配置方法也很简单，在项目根目录新建一个vue.config.js文件，我发现很多人直接就去babel.config.js这个文件里面配置，这样是不对的，肯定会报错，</span><br><span class="line">先安装file-loader:</span><br><span class="line">npm install --save file-loader</span><br><span class="line">复制代码然后在vue.config.js中加入以下内容：</span><br><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">    chainWebpack: config &#x3D;&gt; &#123;</span><br><span class="line">        const fileRule &#x3D; config.module.rule(&#39;file&#39;)</span><br><span class="line">        fileRule.uses.clear()</span><br><span class="line">        fileRule</span><br><span class="line">            .test(&#x2F;\.pdf|ico$&#x2F;)</span><br><span class="line">            .use(&#39;file-loader&#39;)</span><br><span class="line">            .loader(&#39;file-loader&#39;)</span><br><span class="line">            .options(&#123;</span><br><span class="line">                limit: 10000,</span><br><span class="line">            &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    publicPath: &#39;.&#x2F;&#39;</span><br><span class="line">&#125;</span><br><span class="line">复制代码之后再url:require(&quot;..&#x2F;assets&#x2F;1.pdf&quot;)就没有任何问题了，注意，vue-pdf src接收的是string对象，如果直接传url我这里报错了，你可能需要传url.default一下。</span><br><span class="line">跨域问题：</span><br><span class="line">网上用pdf.js 很多都会遇到跨域问题，这个我今天实际应用到自己的项目里面了，由于我服务端设置了跨域，所以没有出现跨域的问题，如果出现跨域需要修改你后端的请求头。</span><br><span class="line">打印界面字符乱码：</span><br><span class="line">这个我倒是碰到了，谷歌浏览器打印的时候，预览界面真的变成了 真·方块字 ，全是方块。这个问题是因为你pdf中使用了自定义字体导致的，具体解决方案如下：</span><br><span class="line">首先，找到这个文件：node_modules&#x2F;vue-pdf&#x2F;src&#x2F;pdfjsWrapper.js</span><br><span class="line">然后根据github上这个issue，其中红色的是要删掉的，绿色的是要加上去的，照着改就可以解决了。</span><br><span class="line">地址： github.com&#x2F;FranckFreib…</span><br><span class="line">根据我的实际测试，是可以解决打印乱码的问题的。</span><br></pre></td></tr></table></figure>



<h3 id="docx预览（docx-preview）"><a href="#docx预览（docx-preview）" class="headerlink" title="docx预览（docx-preview）"></a>docx预览（docx-preview）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">npm i docx-preview -S</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;docx-preview-wrap&quot;&gt;</span><br><span class="line">        &lt;h1&gt;kaimo test docx-preview&lt;&#x2F;h1&gt;</span><br><span class="line">        &lt;h4&gt;</span><br><span class="line">            &lt;input type&#x3D;&quot;file&quot; id&#x3D;&quot;file&quot; accept&#x3D;&quot;.docx&quot;&#x2F;&gt;</span><br><span class="line">            &lt;button @click&#x3D;&quot;handlePreview&quot;&gt;预览&lt;&#x2F;button&gt;</span><br><span class="line">        &lt;&#x2F;h4&gt;</span><br><span class="line">        &lt;div id&#x3D;&quot;bodyContainer&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; defaultOptions, renderAsync &#125; from &quot;docx-preview&quot;;</span><br><span class="line">console.log(defaultOptions);</span><br><span class="line">export default &#123;</span><br><span class="line">    name: &#39;DocxPreview&#39;,</span><br><span class="line">    data () &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            docxOptions: &#123;</span><br><span class="line">                className: &quot;kaimo-docx-666&quot;, &#x2F;&#x2F; string：默认和文档样式类的类名&#x2F;前缀</span><br><span class="line">                inWrapper:  true, &#x2F;&#x2F; boolean：启用围绕文档内容的包装器渲染</span><br><span class="line">                ignoreWidth: false, &#x2F;&#x2F; boolean：禁用页面的渲染宽度</span><br><span class="line">                ignoreHeight: false, &#x2F;&#x2F; boolean：禁止渲染页面高度</span><br><span class="line">                ignoreFonts: false, &#x2F;&#x2F; boolean：禁用字体渲染</span><br><span class="line">                breakPages: true, &#x2F;&#x2F; boolean：在分页符上启用分页</span><br><span class="line">                ignoreLastRenderedPageBreak: true, &#x2F;&#x2F; boolean：在 lastRenderedPageBreak 元素上禁用分页</span><br><span class="line">                experimental: false, &#x2F;&#x2F; boolean：启用实验功能（制表符停止计算）</span><br><span class="line">                trimXmlDeclaration: true, &#x2F;&#x2F; boolean：如果为true，解析前会从​​ xml 文档中移除 xml 声明</span><br><span class="line">                useBase64URL: false, &#x2F;&#x2F; boolean：如果为true，图片、字体等会转为base 64 URL，否则使用URL.createObjectURL</span><br><span class="line">                useMathMLPolyfill: false, &#x2F;&#x2F; boolean：包括用于 chrome、edge 等的 MathML polyfill。</span><br><span class="line">                showChanges: false, &#x2F;&#x2F; boolean：启用文档更改的实验性渲染（插入&#x2F;删除）</span><br><span class="line">                debug: false, &#x2F;&#x2F; boolean：启用额外的日志记录</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        handlePreview() &#123;</span><br><span class="line">            let file &#x3D; document.getElementById(&quot;file&quot;).files[0];</span><br><span class="line">            console.log(file);</span><br><span class="line">            &#x2F;&#x2F; 将file转为buffer</span><br><span class="line">            let fr &#x3D; new FileReader();</span><br><span class="line">            fr.readAsArrayBuffer(file);</span><br><span class="line">            fr.addEventListener(&quot;loadend&quot;,(e) &#x3D;&gt; &#123;</span><br><span class="line">                console.log(&quot;loadend----&gt;&quot;, e)</span><br><span class="line">                let buffer &#x3D; e.target.result;</span><br><span class="line">                this.docxRender(buffer);</span><br><span class="line">            &#125;,false);</span><br><span class="line">        &#125;,</span><br><span class="line">        &#x2F;&#x2F; 渲染docx</span><br><span class="line">        docxRender(buffer) &#123;</span><br><span class="line">            let bodyContainer &#x3D; document.getElementById(&quot;bodyContainer&quot;);</span><br><span class="line">            renderAsync(</span><br><span class="line">                buffer, &#x2F;&#x2F; Blob | ArrayBuffer | Uint8Array, 可以是 JSZip.loadAsync 支持的任何类型</span><br><span class="line">                bodyContainer, &#x2F;&#x2F; HTMLElement 渲染文档内容的元素,</span><br><span class="line">                null, &#x2F;&#x2F; HTMLElement, 用于呈现文档样式、数字、字体的元素。如果为 null，则将使用 bodyContainer。</span><br><span class="line">                this.docxOptions &#x2F;&#x2F; 配置</span><br><span class="line">            ).then(res &#x3D;&gt; &#123;</span><br><span class="line">                console.log(&quot;res----&gt;&quot;, res)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="其他文件的预览分为两种处理方式"><a href="#其他文件的预览分为两种处理方式" class="headerlink" title="其他文件的预览分为两种处理方式"></a>其他文件的预览分为两种处理方式</h3><h4 id="1-将其他格式的文件转化为pdf，采用pdf统一预览的方式"><a href="#1-将其他格式的文件转化为pdf，采用pdf统一预览的方式" class="headerlink" title="1.将其他格式的文件转化为pdf，采用pdf统一预览的方式"></a>1.将其他格式的文件转化为pdf，采用pdf统一预览的方式</h4><h4 id="2-使用开源预览kkfileview"><a href="#2-使用开源预览kkfileview" class="headerlink" title="2.使用开源预览kkfileview"></a>2.使用开源预览kkfileview</h4><p>官网地址：<a href="http://kkfileview.keking.cn/zh-cn/index.html" target="_blank" rel="noopener">http://kkfileview.keking.cn/zh-cn/index.html</a></p>
<p>使用方法（后端已准备好相应接口，前端只需要传个附件ID）：</p>
<p><img src="/2022/12/13/vue%E4%B9%8B%E6%96%87%E4%BB%B6%E9%A2%84%E8%A7%88/image-20221215092748023.png" alt="image-20221215092748023"></p>
<h3 id="图片预览的三种方式"><a href="#图片预览的三种方式" class="headerlink" title="图片预览的三种方式"></a>图片预览的三种方式</h3><h4 id="1-使用el-popover弹出框"><a href="#1-使用el-popover弹出框" class="headerlink" title="1.使用el-popover弹出框"></a>1.<strong>使用el-popover弹出框</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;el-table-column</span><br><span class="line">      prop&#x3D;&quot;image&quot;</span><br><span class="line">      label&#x3D;&quot;藏品封面&quot;</span><br><span class="line">      align&#x3D;&quot;center&quot;</span><br><span class="line">      width&#x3D;&quot;150&quot;&gt;</span><br><span class="line">   &lt;template slot-scope&#x3D;&quot;scope&quot;&gt;</span><br><span class="line">   &lt;el-popover placement&#x3D;&quot;top-start&quot; trigger&#x3D;&quot;click&quot;&gt; </span><br><span class="line">   &lt;!--trigger属性值：hover、click、focus 和 manual--&gt;</span><br><span class="line">   &lt;a :href&#x3D;&quot;scope.row.image&quot;  target&#x3D;&quot;_blank&quot; title&#x3D;&quot;查看最大化图片&quot;&gt;</span><br><span class="line">   &lt;img :src&#x3D;&quot;scope.row.image&quot; style&#x3D;&quot;width: 500px;height: 500px&quot;&gt;</span><br><span class="line">    &lt;&#x2F;a&gt;</span><br><span class="line">    &lt;img slot&#x3D;&quot;reference&quot; :src&#x3D;&quot;scope.row.image&quot; style&#x3D;&quot;width: 100px;height: 100px; cursor:pointer&quot;&gt;</span><br><span class="line">    &lt;&#x2F;el-popover&gt;</span><br><span class="line">        </span><br><span class="line">   &lt;&#x2F;template&gt;</span><br><span class="line">&lt;&#x2F;el-table-column&gt;</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/32d46f1ef07a444a9bdd77ea89f2edc5.png" alt="img"></p>
<h4 id="2-使用v-viewer插件"><a href="#2-使用v-viewer插件" class="headerlink" title="2.使用v-viewer插件"></a>2.<strong>使用v-viewer插件</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install v-viewer --save</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table-column</span><br><span class="line">            prop&#x3D;&quot;image&quot;</span><br><span class="line">            label&#x3D;&quot;藏品封面&quot;</span><br><span class="line">            align&#x3D;&quot;center&quot;</span><br><span class="line">            width&#x3D;&quot;150&quot;</span><br><span class="line">          &gt;</span><br><span class="line">            &lt;template slot-scope&#x3D;&quot;scope&quot;&gt;</span><br><span class="line">              &lt;viewer&gt;</span><br><span class="line">                &lt;img</span><br><span class="line">                  :src&#x3D;&quot;scope.row.image&quot;</span><br><span class="line">                  style&#x3D;&quot;height: 140px; width: 140px;cursor:pointer &quot; &gt;</span><br><span class="line">              &lt;&#x2F;viewer&gt;</span><br><span class="line">            &lt;&#x2F;template&gt;</span><br><span class="line">&lt;&#x2F;el-table-column&gt;</span><br><span class="line"></span><br><span class="line">或者</span><br><span class="line">&lt;el-table-column</span><br><span class="line">            prop&#x3D;&quot;image&quot;</span><br><span class="line">            label&#x3D;&quot;藏品封面&quot;</span><br><span class="line">            align&#x3D;&quot;center&quot;</span><br><span class="line">            width&#x3D;&quot;150&quot;</span><br><span class="line">          &gt;</span><br><span class="line">            &lt;template slot-scope&#x3D;&quot;scope&quot;&gt;</span><br><span class="line">              &lt;div v-viewer&gt;</span><br><span class="line">                &lt;img</span><br><span class="line">                  :src&#x3D;&quot;scope.row.image&quot;</span><br><span class="line">                  style&#x3D;&quot;height: 140px; width: 140px; cursor:pointer&quot;&gt;</span><br><span class="line">              &lt;&#x2F;div&gt;</span><br><span class="line">            &lt;&#x2F;template&gt;</span><br><span class="line"> &lt;&#x2F;el-table-column&gt;</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/704f548cc0874f52b6d139bb358380e2.png" alt="img"></p>
<h4 id="3-使用vue-directive-image-previewer组件"><a href="#3-使用vue-directive-image-previewer组件" class="headerlink" title="3.使用vue-directive-image-previewer组件"></a>3.<strong>使用vue-directive-image-previewer组件</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue-directive-image-previewer -D</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">在main.js中添加以下代码</span><br><span class="line">&#x2F;&#x2F;图片放大组件</span><br><span class="line">import VueDirectiveImagePreviewer from &#39;vue-directive-image-previewer&#39;</span><br><span class="line">import &#39;vue-directive-image-previewer&#x2F;dist&#x2F;assets&#x2F;style.css&#39;</span><br><span class="line">Vue.use(VueDirectiveImagePreviewer)</span><br><span class="line"></span><br><span class="line">页面.vue</span><br><span class="line">   &lt;el-table-column</span><br><span class="line">            prop&#x3D;&quot;image&quot;</span><br><span class="line">            label&#x3D;&quot;藏品封面&quot;</span><br><span class="line">            align&#x3D;&quot;center&quot;</span><br><span class="line">            width&#x3D;&quot;150&quot;</span><br><span class="line">          &gt;</span><br><span class="line">            &lt;template slot-scope&#x3D;&quot;scope&quot;&gt;</span><br><span class="line">              &lt;img v-image-preview</span><br><span class="line">              :src&#x3D;&quot;scope.row.image&quot;</span><br><span class="line">              style&#x3D;&quot;height: 140px; width: 140px&quot;</span><br><span class="line">            &#x2F;&gt;</span><br><span class="line">            &lt;&#x2F;template&gt;</span><br><span class="line">   &lt;&#x2F;el-table-column&gt;</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/08cc2bd68e8c40ecb56d880072696956.png" alt="img"></p>
<p>屏幕中央显示一个大个的图片，点击任意处，图片消失 </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/10/17/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91%E4%B9%8Bh5%E4%BD%BF%E7%94%A8jssdk%E4%B8%8E%E5%BE%AE%E4%BF%A1%E4%BA%A4%E4%BA%92/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dali">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DaliBlogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/10/17/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91%E4%B9%8Bh5%E4%BD%BF%E7%94%A8jssdk%E4%B8%8E%E5%BE%AE%E4%BF%A1%E4%BA%A4%E4%BA%92/" itemprop="url">小程序开发之h5使用jssdk与微信交互</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-10-17T13:52:44+08:00">
                2022-10-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="小程序嵌套h5（h5引用微信api-以vue为例）"><a href="#小程序嵌套h5（h5引用微信api-以vue为例）" class="headerlink" title="小程序嵌套h5（h5引用微信api,以vue为例）"></a>小程序嵌套h5（h5引用微信api,以vue为例）</h3><p><strong>问题：van-uploader组件在h5内嵌在小程序中，有的安卓手机获取不到filelist，偶尔还会报错，所以使用wxapi交互</strong></p>
<p>需要一个公众号，但是不用非要跟当前小程序绑定，最好绑定</p>
<p><strong>公众号配置项：</strong></p>
<p>appId是否正确=》获取后端签名的接口，需要后端自己去拿这个appId，前端不需要</p>
<p>ip白名单=》公网Ip地址，（<a href="https://www.baidu.com/#/login，ip其实是192.168.104）" target="_blank" rel="noopener">https://www.baidu.com/#/login，ip其实是192.168.104）</a></p>
<p>js接口安全域名=》页面地址#号之前的部分，(<a href="https://www.baidu.com" target="_blank" rel="noopener">https://www.baidu.com</a>)</p>
<p>1.index.html引入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type&#x3D;&quot;text&#x2F;javascript&quot; src&#x3D;&quot;https:&#x2F;&#x2F;res.wx.qq.com&#x2F;open&#x2F;js&#x2F;jweixin-1.6.0.js&quot;&gt;&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<p>2.在公众号！！！里 前端配置js接口安全域名 后台地址需要配置白名单<br>3.可以全局使用window.wx</p>
<p>4.如果这样引入不了，还可以使用以下方式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1，下载对应的组件包</span><br><span class="line"></span><br><span class="line">    cnpm install weixin-js-sdk</span><br><span class="line"></span><br><span class="line">2,在vue的main中引入并将其挂在到vue实例上</span><br><span class="line"></span><br><span class="line">    import wx from &#39;weixin-js-sdk&#39;</span><br><span class="line"></span><br><span class="line">    Vue.prototype.wx &#x3D; wx</span><br><span class="line"></span><br><span class="line">3，各个组件中如果需要使用的话</span><br><span class="line"></span><br><span class="line">    输出一下this.wx就可以知道是否能掉到wx的API了</span><br></pre></td></tr></table></figure>



<p><strong>具体实现：</strong></p>
<pre><code>html
&lt;template v-if=&quot;isMiniprogram&quot;&gt;
                        &lt;div style=&quot;display:flex&quot;&gt;
                            &lt;div class=&quot;info_label&quot; style=&quot;margin-right:5px&quot;&gt;添加图片&lt;/div&gt;
                            &lt;div style=&quot;display:flex;margin-top: 16px;&quot;&gt;
                                &lt;div v-for=&quot;(item,index) in imgArr&quot; class=&quot;imgbox&quot;&gt;
                                    &lt;img :src=&quot;item&quot; alt=&quot;&quot;&gt;
                                    &lt;!-- &lt;img src=&quot;../../../static/imgs/58c384fcc065019585868d40b340b7df.jpg&quot; alt=&quot;&quot;&gt; --&gt;
                                    &lt;div @click=&quot;removeImage(index)&quot; class=&quot;van-uploader__preview-delete wx_van-uploader&quot;&gt;&lt;i class=&quot;van-icon van-icon-cross van-uploader__preview-delete-icon&quot;&gt;&lt;/i&gt;&lt;/div&gt;
                                &lt;/div&gt;
                                &lt;div @click=&quot;chooseImage&quot; v-if=&quot;imgArr.length&lt;3&quot; class=&quot;imgbox carmera&quot;&gt;
                                    &lt;van-icon name=&quot;photograph&quot; /&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/template&gt;
                    &lt;template v-else&gt;
                        &lt;div class=&quot;info_label&quot;&gt;添加图片&lt;/div&gt;
                        &lt;van-uploader v-model=&quot;fileList&quot; @before-read=&quot;&quot; style=&quot;margin-top:16px&quot; :max-count=&quot;3&quot; accept=&quot;image/jpeg,image/jpg,image/png&quot; :after-read=&quot;afterRead&quot;
                            @delete=&quot;removeImg&quot; /&gt;
                    &lt;/template&gt;

js
//判断是否是小程序环境
mounted() {
        var ua = navigator.userAgent.toLowerCase();
        if (ua.match(/MicroMessenger/i) == &quot;micromessenger&quot;) {
            this.isMiniprogram = true
            // Toast.fail(&apos;在小程序内&apos;);
            return true;
        } else {
            this.isMiniprogram = false
            // Toast.fail(&apos;不在小程序内&apos;);
            return false;
        }
},

//微信环境配置
getConfigValue(){
        let signLink = location.href.split(&apos;#&apos;)[0];
            this.$http.get(&apos;/miniProgram/signature&apos;, { params: { wxUrl: signLink } }).then(res =&gt; {
                const configValue = res.data.data || {}
                window.wx.config(
                    {
                        debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。
                        appId: configValue.appId, // 必填，公众号的唯一标识公众号公众号公众号
                        timestamp: configValue.timestamp, // 必填，生成签名的时间戳
                        nonceStr: configValue.noncestr, // 必填，生成签名的随机串
                        signature: configValue.signature, 
                        // 必填，签名，见附录1n，校验地址https://mp.weixin.qq.com/debug/cgi-bin/sandbox?t=jsapisign
                        jsApiList: [&apos;chooseImage&apos;] // 必填，需要使用的JS接口列表，所有JS接口列表见附录2
                    }
                );
                window.wx.ready(() =&gt; {
                    console.log(&quot;配置成功&quot;)
                });
                window.wx.error((res) =&gt; {
                    console.log(&quot;配置失败&quot;, res)
                })
            })
}，

    //微信摄像头
    chooseImage=()=&gt;{
        window.wx.chooseImage({
            count: 1, //默认9
            sizeType: [&apos;compressed&apos;,&apos;original&apos;], //可以指定是原图还是压缩图，默认二者都有
            sourceType: [&apos;camera&apos;,&apos;album&apos;], //从相册选择
            success:  req=&gt; {
                console.log(&apos;img&apos;,req.localIds[0].toString())
                //转64
                window.wx.getLocalImgData({
                    localId: req.localIds[0].toString(),
                    success: res=&gt; {
                        const localData = res.localData;
                        let imageBase64 = &apos;&apos;;
                        if (localData.indexOf(&apos;data:image&apos;) == 0) {
                            //苹果的直接赋值，默认生成&apos;data:image/jpeg;base64,&apos;的头部拼接
                            imageBase64 = localData;
                        } else {
                            //安卓的坑！在拼接前需要对localData进行换行符的全局替换
                            imageBase64 = &apos;data:image/jpeg;base64,&apos; + localData.replace(/\n/g, &apos;&apos;);
                        }
                        this.setState({
                            loading: true,
                            englishEnd: false,
                        })
                        this.imgArr.push(imageBase64)//页面图片显示
                        let file = {
                            file: this.base64toFile(imageBase64)
                        }
                        this.fileList.push(file)//file文件对象集合
                        this.afterRead(file)//调用接口
                    }
                });
                // imgToBase64(res)
            }
        })
    }

    //转formdata格式
    base64toFile(data) {
            const dataArr = data.split(&quot;,&quot;);
            const byteString = atob(dataArr[1]);
            const options = {
                type: &quot;image/jpeg&quot;,
                endings: &quot;native&quot;
            };
            const u8Arr = new Uint8Array(byteString.length);
            for (let i = 0; i &lt; byteString.length; i++) {
                u8Arr[i] = byteString.charCodeAt(i);
            }
            return new File([u8Arr], &quot;我的图片.jpg&quot;, options);//返回文件流

        },

    //上传
    afterRead(file) {
            console.log(&apos;file000000&apos;,file)
            let that = this;
            this.isLoading = true;
            const config = {
                headers: {
                    &quot;Content-Type&quot;: &quot;application/x-www-form-urlencoded&quot;,
                    &quot;buildId&quot;: localStorage.buildId
                }
            };
            var urlData = getSignature({ appid: localStorage.phone, buildId: parseInt(localStorage.buildId) });
            var url = &apos;/colorImage/uploadOtherImage?appid=&apos; + localStorage.phone + &apos;&amp;signature=&apos; + urlData.signature + &apos;&amp;buildId=&apos; + parseInt(localStorage.buildId);
            const formData = new FormData();
            formData.append(&apos;file&apos;, file.file);
            axios.post(url, formData, config)
                .then(function (res) {
                    console.log(&quot;上传成功&quot;, that.fileList)
                    that.isLoading = false;
                    if (res.data &amp;&amp; res.data.errorCode == 0) {
                        that.fileList[that.fileList.length - 1].imgUrl = res.data.data;
                    } else {
                        Toast.fail(&apos;上传失败&apos;);
                    }
                }).catch = () =&gt; {
                    console.log(&quot;上传成功&quot;, that.fileList)
                    that.isLoading = false
                    Toast.fail(&apos;上传失败&apos;);
                }
        },
        //删除图片
        removeImg(e) {
            console.log(&quot;remove&quot;, e, this.fileList)
        },
        removeImage(idx){
            this.imgArr.splice(idx, 1)
            this.fileList.splice(idx,1)
        },</code></pre><p>图解：</p>
<p><img src="/2022/10/17/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91%E4%B9%8Bh5%E4%BD%BF%E7%94%A8jssdk%E4%B8%8E%E5%BE%AE%E4%BF%A1%E4%BA%A4%E4%BA%92/image-20221017140053429.png" alt="image-20221017140053429"></p>
<p><img src="/2022/10/17/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91%E4%B9%8Bh5%E4%BD%BF%E7%94%A8jssdk%E4%B8%8E%E5%BE%AE%E4%BF%A1%E4%BA%A4%E4%BA%92/image-20221017140121533.png" alt="image-20221017140121533"></p>
<h3 id="wx-config-报错-invalid-url-domain-及-invalid-signature-错误原因及解决方式"><a href="#wx-config-报错-invalid-url-domain-及-invalid-signature-错误原因及解决方式" class="headerlink" title="wx.config 报错 invalid url domain 及 invalid signature 错误原因及解决方式"></a>wx.config 报错 invalid url domain 及 invalid signature 错误原因及解决方式</h3><p><a href="https://blog.csdn.net/weixin_44622984/article/details/125160631" target="_blank" rel="noopener">https://blog.csdn.net/weixin_44622984/article/details/125160631</a></p>
<p>一、 invalid url domain<br>当报错invalid url domain时 其实离成功不远了，错误原因也很直白，就是url并没有在公众号设置里正确绑定，需要重点检查几个东西</p>
<ol>
<li><p>appid 是否是公众号appid（查看在 微信公众平台-&gt; 登陆公众号后台 -&gt; 基本配置-&gt; 开发者ID（AppID））</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/e3d2e8fc296fd72e22c7cb9919d1b57d.png" alt="1654567224(1).jpg"></p>
</li>
</ol>
<ol start="2">
<li>域名绑定是否正确（查看在 微信公众平台-&gt; 登陆公众号后台 -&gt; 公众号设置-&gt; 功能设置 -&gt; JS接口安全域名）</li>
</ol>
<p>注意：在域名绑定时，请确定绑定域名与你H5进行wx.config发起域名一致，http与https一致</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/99c069fc12396569084777b48a4e6f6d.png" alt="image.png"></p>
<p>二、invalid signature</p>
<p><a href="https://blog.csdn.net/rrrrroy_Ha/article/details/122689217?spm=1001.2101.3001.6650.1&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-1-122689217-blog-111398257.pc_relevant_aa_2&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-1-122689217-blog-111398257.pc_relevant_aa_2&amp;utm_relevant_index=2" target="_blank" rel="noopener">https://blog.csdn.net/rrrrroy_Ha/article/details/122689217?spm=1001.2101.3001.6650.1&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-1-122689217-blog-111398257.pc_relevant_aa_2&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-1-122689217-blog-111398257.pc_relevant_aa_2&amp;utm_relevant_index=2</a></p>
<p><img src="https://img-blog.csdnimg.cn/3c2f5acd030444c39541b1d506d2280e.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAcnJycnJveV9IYQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"></p>
<p>我将以自己的理解总结下：</p>
<p>需要在公众号的开发者账号下设置js接口安全域名，只填域名即可，不用带http://或https://。<br>生成signature的方式最好由后台提供接口，需要传递url参数。如果前端路由是hash模式，需要传递“#”之前的内容，如果是history模式，传递当前路径的全路径即可。encodeURIComponent(location.href.split(‘#’)[0]) 就可满足。注意如果前端转码，则接口一定要解码。wx.config在进入系统后执行一次即可，无需每个页面都config。<br>wx.config中个别属性要注意大小写，如nonceStr，timestamp等。<br>确保2中的url是动态获取的，官网也在【6】中提及，有同事配置时其他都正确，就是把config的url固定写死了，也会配置失败。<br>像操作菜单项的功能，一定要在测试环境中运行检查，不要在开发环境下，而且一定要把测试地址发到（随便的）公众号下，通过点击公众号下的地址测试才可能看到效果。<br>如果以上都没问题，尝试验证signature是否正确，看看接口的逻辑是不是写错了。<br>二、还有“permission denied”的情况，最好是检查一下config下jsApiList参数和官网提供api名称是否一致。</p>
<p>如果是invalid signature 后又提示的 permission denied，那属于没config成功，参考【一】中的思路检查即可。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/10/10/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91%E4%B9%8B%E8%A7%A3%E5%86%B3h5%E7%BC%93%E5%AD%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dali">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DaliBlogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/10/10/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91%E4%B9%8B%E8%A7%A3%E5%86%B3h5%E7%BC%93%E5%AD%98/" itemprop="url">小程序开发之解决h5缓存</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-10-10T11:29:33+08:00">
                2022-10-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>备注：原生小程序代码更新可以通过删除小程序来清除缓存，如果不手动清除，官方给出的解释是24小时内会更新<br>内嵌在小程序里面的h5，代码更新后，需要清除微信的缓存才能更新，<strong>手动删除小程序是不能清除h5的缓存的</strong></p>
<h2 id="错误不完整方案"><a href="#错误不完整方案" class="headerlink" title="错误不完整方案"></a>错误不完整方案</h2><p><strong>方案一</strong><br>（1）方案：<br>动态的给项目中的js和css资源文件加版本号或者时间戳,，在每次更新代码时更新js、css文件名，用户在加载页面时在引入文件名称变化时都会重新请求资源。这样就能实现清除缓存的目的。<br>（2）实现：<br>在vue.config.js文件中增加相关配置，在打包时给生成的js和css文件加上时间戳<br>代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const Timestamp &#x3D; new Date().getTime()</span><br><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">	   configureWebpack: (config) &#x3D;&gt; &#123;</span><br><span class="line">	      config.output.filename &#x3D; &#96;js&#x2F;[name].$&#123;Timestamp&#125;.js&#96;,</span><br><span class="line">	      config.output.chunkFilename &#x3D; &#96;js&#x2F;[name].$&#123;Timestamp&#125;.js&#96;</span><br><span class="line">	    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（3）效果：<br>更改h5代码后，再次打开发现并没有清除缓存，效果不理想。</p>
<p>通过百度才知道小程序web-view中的h5页面只有在web-view的引入路径变化时才会重新请求资源，因为小程序是第三方的，所以没办法改变引入路径，所以这个方案不可行</p>
<p><strong>方案二</strong><br>（1）方案：<br>在html页面中加入meta标签，强制不缓存资源文件，可以在每次请求时都加载最新的项目资源<br>（2）实现代码如下：</p>
<pre><code>&lt;meta http-equiv=&quot;Cache-Control&quot; content=&quot;no-cache, no-store, must-revalidate&quot; /&gt;
&lt;meta http-equiv=&quot;Pragma&quot; content=&quot;no-cache&quot; /&gt;
&lt;meta http-equiv=&quot;Expires&quot; content=&quot;0&quot; /&gt;</code></pre><p>（3）效果：<br>在大部分手机上能达到清除缓存的效果，可行。(在我手机上不好使)</p>
<h2 id="收费方案，没试过"><a href="#收费方案，没试过" class="headerlink" title="收费方案，没试过"></a>收费方案，没试过</h2><h3 id="缓存问题"><a href="#缓存问题" class="headerlink" title="缓存问题"></a>缓存问题</h3><p>大家都知道，浏览器缓存是个非常有用的特性，它能够提升性能、减少延迟，还可以减少带宽、降低网络负荷。关于浏览器的缓存机制可以总结成下面 2 句话：</p>
<ul>
<li>浏览器每次发起请求，都会先在浏览器缓存中查找该请求的结果以及缓存标识</li>
<li>浏览器每次拿到返回的请求结果都会将该结果和缓存标识存入浏览器缓存中</li>
</ul>
<p>更进一步，我们可以粗略了解一下强制缓存和协商缓存的运行机理。若强制缓存（Expires 和 Cache-Control）生效则直接使用缓存，若不生效则进行协商缓存（Last-Modified/If-Modified-Since 和 Etag/If-None-Match），协商缓存由服务器决定是否使用缓存，若协商缓存失效，那么代表该请求的缓存失效，返回 200，重新返回资源和缓存标识，再存入浏览器缓存中；生效则返回 304，继续使用缓存。这段文字是想让读者拓展一下知识面，如果想要更输入了解，可以通过上面的一些关键字（强缓存、协商缓存、Expire、Cache-Control 等）去查找更详细的资料。</p>
<p>微信的 web-view 组件就是一个嵌在小程序里的浏览器，它在缓存上并没有完全遵照上述的规则，也即它的缓存并不能及时得到清理。想必下面的操作大家都有尝试过：</p>
<ul>
<li>手动退出小程序，再次进入；</li>
<li>将微信从后台退出再打开并重新进入小程序；</li>
<li>修改 Nginx 关于 Cache-Control 的配置；</li>
<li>用 debugx5.qq.com 手动清除安卓微信浏览器缓存；</li>
<li>iOS 利用微信自带清楚缓存功能。</li>
</ul>
<p>无法及时刷新缓存会导致发布了最新的页面，而小程序里仍然是以前的页面，从而会带来许多问题，如前后端的数据不一致，新的特性无法及时起作用，修改的问题没有得到解决等等。这里需要说明一下：web-view 在过一段时间（时间不定，一天或者几小时，无明显规律）是可以进行缓存刷新的，而本 Chat 要解决的是及时刷新的问题。</p>
<h3 id="解决问题"><a href="#解决问题" class="headerlink" title="解决问题"></a>解决问题</h3><h4 id="解决思路"><a href="#解决思路" class="headerlink" title="解决思路"></a>解决思路</h4><p>浏览器访问资源是通过 URL 地址，如果内嵌 H5 的地址不发生变化，那么 web-view 访问资源会从缓存里取，而缓存里并没有最新的数据，这就导致了服务端的最新资源根本无法到达浏览器，这也就解释了为什么修改 Nginx 的 Cache-Control 配置也无法生效的原因。所以，要想彻底解决及时刷新，必须让 web-view 去访问新的地址。我们假定小程序访问的 URL 地址为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;www.yourdomain.com&#x2F;101&#x2F;#&#x2F;index</span><br></pre></td></tr></table></figure>

<p>其中 101 就是构建的一个版本号，每次递增，保证次次不同即可。</p>
<h4 id="小程序获取最新版本号"><a href="#小程序获取最新版本号" class="headerlink" title="小程序获取最新版本号"></a>小程序获取最新版本号</h4><p>在小程序中，我们利用 app 的 onShow 钩子函数 来完成最新的 URL 获取，同时还要保证只有获取了版本号之后才能加载其他的页面，因此这里要用到同步接口调用 。请参考下面代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这里加入同步请求到服务器获取最新路径</span></span><br><span class="line">onShow: <span class="function"><span class="keyword">function</span> (<span class="params">options</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.getFEVersion()</span><br><span class="line">&#125;,</span><br><span class="line">getFEVersion: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//下面是利用Promise进行同步调用的写法</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">      wx.request(&#123;</span><br><span class="line">        <span class="comment">//下面是本机调试的一个地址，上线时请改成自己服务端的地址</span></span><br><span class="line">        url: <span class="string">'http://192.168.0.168:8090/getFEVersion'</span>,</span><br><span class="line">        data: &#123;&#125;,</span><br><span class="line">        method: <span class="string">'POST'</span>,</span><br><span class="line">        header: &#123;</span><br><span class="line">          <span class="string">'content-type'</span>: <span class="string">'application/json'</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">          <span class="keyword">if</span> (res.data.success) &#123;</span><br><span class="line">            <span class="keyword">const</span> app = getApp();</span><br><span class="line">            <span class="comment">//res.data.version 是从服务端返回的最新fe的版本号，即上面的数字101</span></span><br><span class="line">            app.globalData.feUrl = <span class="string">'https://www.yourdomain.com/'</span> + res.data.version + <span class="string">'/#/index'</span></span><br><span class="line">          &#125;</span><br><span class="line">          resolve();</span><br><span class="line">        &#125;,</span><br><span class="line">        fail: <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">          <span class="built_in">console</span>.log(error);</span><br><span class="line">          reject();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

<h4 id="Nginx-配置"><a href="#Nginx-配置" class="headerlink" title="Nginx 配置"></a>Nginx 配置</h4><p>Nginx 正则规则，<code>~</code> 表示区分大小写的正则匹配，<code>\d</code> 是数字的匹配的正则表达式，正好可以匹配 101 这样的数字表达式。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">server&#123;</span><br><span class="line">       <span class="comment">##其他配置</span></span><br><span class="line">       <span class="comment">##......</span></span><br><span class="line">       <span class="comment">##其他配置</span></span><br><span class="line"></span><br><span class="line">       location ~ /\d &#123;</span><br><span class="line">          root /mnt/projects/FE/;</span><br><span class="line">       &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>在服务器上存放项目的路径为 /mnt/projects/FE/101，下图是 Vue 项目构建好的样子。</p>
<p><img src="https://gsws-imgs.oss-cn-beijing.aliyuncs.com/article/20191229102807.png" alt="img"></p>
<h4 id="服务端接口"><a href="#服务端接口" class="headerlink" title="服务端接口"></a>服务端接口</h4><p>下面是服务端接口的参考代码，我们可以将最新的版本号存入数据库：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"getFEVersion"</span>, method = RequestMethod.POST)</span><br><span class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">getFEVersion</span><span class="params">(HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">    ResponseVo responseVo = <span class="keyword">new</span> ResponseVo();</span><br><span class="line">    <span class="comment">//从数据库中获得最新的版本号</span></span><br><span class="line">    responseVo.setSuccess(<span class="string">"101"</span>);</span><br><span class="line">    <span class="keyword">return</span> responseVo;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>到此，我们将小程序发布上线，重启 Nginx 使得配置生效，后续每次构建前端工程，都生成一个新的版本号，如 102、103 等等，将该版本号填入数据库中，后端接口都会及时返回最新版本号，使得小程序总是以最新的路径加载，从而做到 web-view 都能及时的加载最新的 H5 页面。</p>
<h3 id="注解"><a href="#注解" class="headerlink" title="注解"></a>注解</h3><p>[1]：在 app 的 onShow 钩子函数是小程序启动，或从后台进入前台显示时触发，而且它是所有其他页面 onShow 钩子函数中第一个被执行，因此在这里进行最新版本获取。</p>
<p>[2]：由于需要获得最新版本才能进行其他业务，因此使用同步接口，以此来保证各个生命周期执行的顺序性。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/10/10/%E7%9A%84%E7%BC%93%E5%AD%98%E9%97%AE%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dali">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DaliBlogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/10/10/%E7%9A%84%E7%BC%93%E5%AD%98%E9%97%AE%E9%A2%98/" itemprop="url">的缓存问题</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-10-10T11:19:31+08:00">
                2022-10-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/09/21/js%E4%B9%8B30s%E4%BB%A3%E7%A0%81/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dali">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DaliBlogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/09/21/js%E4%B9%8B30s%E4%BB%A3%E7%A0%81/" itemprop="url">js之30s代码</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-09-21T11:26:17+08:00">
                2022-09-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="快速获取数组中的最大和最小值"><a href="#快速获取数组中的最大和最小值" class="headerlink" title="快速获取数组中的最大和最小值"></a>快速获取数组中的最大和最小值</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const nums &#x3D; [2, 4, 6, 8, 1, 3, 5, 7];</span><br><span class="line"></span><br><span class="line">Math.max(...nums); &#x2F;&#x2F; 8</span><br><span class="line">Math.min(...nums); &#x2F;&#x2F; 1</span><br></pre></td></tr></table></figure>

<h3 id="console拓展用法"><a href="#console拓展用法" class="headerlink" title="console拓展用法"></a>console拓展用法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;来计算一段代码执行</span><br><span class="line">了多少次。</span><br><span class="line">console.count()</span><br><span class="line">Array.from(&#123; length: 4 &#125;).forEach(</span><br><span class="line">  () &#x3D;&gt; console.count(&#39;items&#39;)  &#x2F;&#x2F; Call the counter labelled &#39;items&#39;</span><br><span class="line">);</span><br><span class="line">&#x2F;*</span><br><span class="line">  items: 1</span><br><span class="line">  items: 2</span><br><span class="line">  items: 3</span><br><span class="line">  items: 4</span><br><span class="line">*&#x2F;</span><br><span class="line">console.countReset(&#39;items&#39;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;仅在断言失败时（即，当第一个参数为 时）将某些内容记录为错误false，否则完全跳过日志。</span><br><span class="line">console.assert()</span><br><span class="line">const value &#x3D; 10;</span><br><span class="line">console.assert(value &#x3D;&#x3D;&#x3D; 10, &#39;Value is not 10!&#39;); &#x2F;&#x2F; Nothing is logged</span><br><span class="line">console.assert(value &#x3D;&#x3D;&#x3D; 20, &#39;Value is not 20!&#39;); &#x2F;&#x2F; Logs &quot;Value is not 20!&quot;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;</span><br></pre></td></tr></table></figure>

<h3 id="使用-JavaScript-漂亮地打印-JSON-对象"><a href="#使用-JavaScript-漂亮地打印-JSON-对象" class="headerlink" title="使用 JavaScript 漂亮地打印 JSON 对象"></a>使用 JavaScript 漂亮地打印 JSON 对象</h3><p>正如您在此示例中所看到的， 的第三个参数<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify" target="_blank" rel="noopener"><code>JSON.stringify()</code></a>是缩进对象每个级别的空格数。此外，您可以使用第二个参数来指定替换函数。如果您想为某些类型的值或特定的键值对提供自定义格式，这可以派上用场。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">const obj &#x3D; &#123;</span><br><span class="line">  id: 1182,</span><br><span class="line">  username: &#39;johnsmith&#39;,</span><br><span class="line">  active: true,</span><br><span class="line">  emails: [&#39;johnsmith@mysite.com&#39;, &#39;contact@johnsmi.th&#39;],</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">console.log(JSON.stringify(obj, null, 4))</span><br><span class="line"></span><br><span class="line">进阶版</span><br><span class="line">const obj &#x3D; &#123;</span><br><span class="line">  id: 1182,</span><br><span class="line">  username: &#39;johnsmith&#39;,</span><br><span class="line">  active: true,</span><br><span class="line">  emails: [&#39;johnsmith@mysite.com&#39;, &#39;contact@johnsmi.th&#39;],</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const replacer &#x3D; (key, value) &#x3D;&gt; &#123;</span><br><span class="line">  if (key &#x3D;&#x3D;&#x3D; &#39;id&#39;) return value.toString(16);</span><br><span class="line">  if (key &#x3D;&#x3D;&#x3D; &#39;username&#39;) return &#96;@$&#123;value&#125;&#96;;</span><br><span class="line">  if (key &#x3D;&#x3D;&#x3D; &#39;emails&#39;) return &#96;$&#123;value[0]&#125; +$&#123;value.length - 1&#125; more&#96;;</span><br><span class="line">  return value;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">console.log(JSON.stringify(obj, replacer, 2))</span><br></pre></td></tr></table></figure>



<h3 id="如何获取基础-URL？"><a href="#如何获取基础-URL？" class="headerlink" title="如何获取基础 URL？"></a><strong>如何获取基础 URL？</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const getBaseURL &#x3D; url &#x3D;&gt; url.replace(&#x2F;[?#].*$&#x2F;, &#39;&#39;);</span><br><span class="line"></span><br><span class="line">getBaseURL(&#39;http:&#x2F;&#x2F;url.com&#x2F;page?name&#x3D;Adam&amp;surname&#x3D;Smith&#39;);</span><br></pre></td></tr></table></figure>

<h3 id="解析-cookie-‘foo-bar-equation-E-3Dmc-5E2’"><a href="#解析-cookie-‘foo-bar-equation-E-3Dmc-5E2’" class="headerlink" title="解析 cookie(‘foo=bar; equation=E%3Dmc%5E2’)"></a>解析 cookie(‘foo=bar; equation=E%3Dmc%5E2’)</h3><ul>
<li>用于<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/split" target="_blank" rel="noopener"><code>String.prototype.split()</code></a>将键值对彼此分开。</li>
<li>使用<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map" target="_blank" rel="noopener"><code>Array.prototype.map()</code></a>and<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/split" target="_blank" rel="noopener"><code>String.prototype.split()</code></a>将每对中的键与值分开。</li>
<li>使用<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce" target="_blank" rel="noopener"><code>Array.prototype.reduce()</code></a>and<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/decodeURIComponent" target="_blank" rel="noopener"><code>decodeURIComponent()</code></a>创建一个包含所有键值对的对象。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const parseCookie &#x3D; str &#x3D;&gt;</span><br><span class="line">  str</span><br><span class="line">    .split(&#39;;&#39;)</span><br><span class="line">    .map(v &#x3D;&gt; v.split(&#39;&#x3D;&#39;))</span><br><span class="line">    .reduce((acc, v) &#x3D;&gt; &#123;</span><br><span class="line">      acc[decodeURIComponent(v[0].trim())] &#x3D; decodeURIComponent(v[1].trim());</span><br><span class="line">      return acc;</span><br><span class="line">    &#125;, &#123;&#125;);</span><br><span class="line">parseCookie(&#39;foo&#x3D;bar; equation&#x3D;E%3Dmc%5E2&#39;);</span><br></pre></td></tr></table></figure>

<h3 id="如何判断网址是否为绝对网址-绝对路径？"><a href="#如何判断网址是否为绝对网址-绝对路径？" class="headerlink" title="如何判断网址是否为绝对网址/绝对路径？"></a><strong>如何判断网址是否为绝对网址/绝对路径？</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const isAbsoluteURL &#x3D; str &#x3D;&gt; &#x2F;^[a-z][a-z0-9+.-]*:&#x2F;.test(str);</span><br><span class="line"></span><br><span class="line">isAbsoluteURL(&#39;https:&#x2F;&#x2F;google.com&#39;); &#x2F;&#x2F; true</span><br><span class="line">isAbsoluteURL(&#39;ftp:&#x2F;&#x2F;www.myserver.net&#39;); &#x2F;&#x2F; true</span><br><span class="line">isAbsoluteURL(&#39;&#x2F;foo&#x2F;bar&#39;); &#x2F;&#x2F; false</span><br></pre></td></tr></table></figure>

<h3 id="如何获取URL参数作为对象？"><a href="#如何获取URL参数作为对象？" class="headerlink" title="如何获取URL参数作为对象？"></a><strong>如何获取URL参数作为对象？</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">const getURLParameters &#x3D; url &#x3D;&gt;</span><br><span class="line">  (url.match(&#x2F;([^?&#x3D;&amp;]+)(&#x3D;([^&amp;]*))&#x2F;g) || []).reduce(</span><br><span class="line">    (a, v) &#x3D;&gt; (</span><br><span class="line">      (a[v.slice(0, v.indexOf(&#39;&#x3D;&#39;))] &#x3D; v.slice(v.indexOf(&#39;&#x3D;&#39;) + 1)), a</span><br><span class="line">    ),</span><br><span class="line">    &#123;&#125;</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">getURLParameters(&#39;google.com&#39;); &#x2F;&#x2F; &#123;&#125;</span><br><span class="line">getURLParameters(&#39;http:&#x2F;&#x2F;url.com&#x2F;page?name&#x3D;Adam&amp;surname&#x3D;Smith&#39;);</span><br></pre></td></tr></table></figure>

<h3 id="如何平滑滚动元素进入视图？"><a href="#如何平滑滚动元素进入视图？" class="headerlink" title="如何平滑滚动元素进入视图？"></a><strong>如何平滑滚动元素进入视图？</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const smoothScroll &#x3D; element &#x3D;&gt;</span><br><span class="line">  document.querySelector(element).scrollIntoView(&#123;</span><br><span class="line">    behavior: &#39;smooth&#39;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">smoothScroll(&#39;#fooBar&#39;); &#x2F;&#x2F; scrolls smoothly to the element with the id fooBar</span><br><span class="line">smoothScroll(&#39;.fooBar&#39;); &#x2F;&#x2F; scrolls smoothly to the first element with a class of fooBar</span><br></pre></td></tr></table></figure>

<h3 id="如何生成UUID-通用唯一识别码-？"><a href="#如何生成UUID-通用唯一识别码-？" class="headerlink" title="如何生成UUID(通用唯一识别码)？"></a><strong>如何生成UUID(</strong>通用唯一识别码<strong>)？</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const UUIDGeneratorBrowser &#x3D; () &#x3D;&gt;</span><br><span class="line">  ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(&#x2F;[018]&#x2F;g, c &#x3D;&gt;</span><br><span class="line">    (</span><br><span class="line">      c ^</span><br><span class="line">      (crypto.getRandomValues(new Uint8Array(1))[0] &amp; (15 &gt;&gt; (c &#x2F; 4)))</span><br><span class="line">    ).toString(16)</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">UUIDGeneratorBrowser();</span><br></pre></td></tr></table></figure>

<h3 id="如何获取选中的文本？"><a href="#如何获取选中的文本？" class="headerlink" title="如何获取选中的文本？"></a><strong>如何获取选中的文本？</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const getSelectedText &#x3D; () &#x3D;&gt; window.getSelection().toString();</span><br><span class="line"></span><br><span class="line">getSelectedText();</span><br></pre></td></tr></table></figure>

<h3 id="如何将文本复制到剪贴板？"><a href="#如何将文本复制到剪贴板？" class="headerlink" title="如何将文本复制到剪贴板？"></a><strong>如何将文本复制到剪贴板？</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const copyToClipboard &#x3D; str &#x3D;&gt; &#123;</span><br><span class="line">  if (navigator &amp;&amp; navigator.clipboard &amp;&amp; navigator.clipboard.writeText)</span><br><span class="line">    return navigator.clipboard.writeText(str);</span><br><span class="line">  return Promise.reject(&#39;The Clipboard API is not available.&#39;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="如何切换全屏模式？"><a href="#如何切换全屏模式？" class="headerlink" title="如何切换全屏模式？"></a><strong>如何切换全屏模式？</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const fullscreen &#x3D; (mode &#x3D; true, el &#x3D; &#39;body&#39;) &#x3D;&gt;</span><br><span class="line">  mode</span><br><span class="line">    ? document.querySelector(el).requestFullscreen()</span><br><span class="line">    : document.exitFullscreen();</span><br><span class="line"></span><br><span class="line">fullscreen(); &#x2F;&#x2F; Opens &#96;body&#96; in fullscreen mode</span><br><span class="line">fullscreen(false); &#x2F;&#x2F; Exits fullscreen mode</span><br></pre></td></tr></table></figure>

<h3 id="如何给-HTML-元素添加样式？"><a href="#如何给-HTML-元素添加样式？" class="headerlink" title="如何给 HTML 元素添加样式？"></a><strong>如何给 HTML 元素添加样式？</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const addStyles &#x3D; (el, styles) &#x3D;&gt; Object.assign(el.style, styles);</span><br><span class="line"></span><br><span class="line">addStyles(document.getElementById(&#39;my-element&#39;), &#123;</span><br><span class="line">  background: &#39;red&#39;,</span><br><span class="line">  color: &#39;#ffff00&#39;,</span><br><span class="line">  fontSize: &#39;3rem&#39;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="如何检测Caps-Lock是否开启-大写锁定-？"><a href="#如何检测Caps-Lock是否开启-大写锁定-？" class="headerlink" title="如何检测Caps Lock是否开启(大写锁定)？"></a><strong>如何检测Caps Lock是否开启(大写锁定)？</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;form&gt;</span><br><span class="line">  &lt;label for&#x3D;&quot;username&quot;&gt;Username:&lt;&#x2F;label&gt;</span><br><span class="line">  &lt;input id&#x3D;&quot;username&quot; name&#x3D;&quot;username&quot;&gt;</span><br><span class="line"></span><br><span class="line">  &lt;label for&#x3D;&quot;password&quot;&gt;Password:&lt;&#x2F;label&gt;</span><br><span class="line">  &lt;input id&#x3D;&quot;password&quot; name&#x3D;&quot;password&quot; type&#x3D;&quot;password&quot;&gt;</span><br><span class="line">  &lt;span id&#x3D;&quot;password-message&quot; style&#x3D;&quot;display: none&quot;&gt;Caps Lock is on&lt;&#x2F;span&gt;</span><br><span class="line">&lt;&#x2F;form&gt;</span><br><span class="line">const el &#x3D; document.getElementById(&#39;password&#39;);</span><br><span class="line">const msg &#x3D; document.getElementById(&#39;password-message&#39;);</span><br><span class="line"></span><br><span class="line">el.addEventListener(&#39;keyup&#39;, e &#x3D;&gt; &#123;</span><br><span class="line">  msg.style &#x3D; e.getModifierState(&#39;CapsLock&#39;)</span><br><span class="line">    ? &#39;display: block&#39;</span><br><span class="line">    : &#39;display: none&#39;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="如何查看日期是否有效？"><a href="#如何查看日期是否有效？" class="headerlink" title="如何查看日期是否有效？"></a><strong>如何查看日期是否有效？</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const isDateValid &#x3D; (...val) &#x3D;&gt; !Number.isNaN(new Date(...val).valueOf());</span><br><span class="line"></span><br><span class="line">isDateValid(&#39;December 17, 1995 03:24:00&#39;); &#x2F;&#x2F; true</span><br><span class="line">isDateValid(&#39;1995-12-17T03:24:00&#39;); &#x2F;&#x2F; true</span><br><span class="line">isDateValid(&#39;1995-12-17 T03:24:00&#39;); &#x2F;&#x2F; false</span><br><span class="line">isDateValid(&#39;Duck&#39;); &#x2F;&#x2F; false</span><br><span class="line">isDateValid(1995, 11, 17); &#x2F;&#x2F; true</span><br><span class="line">isDateValid(1995, 11, 17, &#39;Duck&#39;); &#x2F;&#x2F; false</span><br><span class="line">isDateValid(&#123;&#125;); &#x2F;&#x2F; false</span><br></pre></td></tr></table></figure>

<h3 id="确保一个函数只被调用一次。"><a href="#确保一个函数只被调用一次。" class="headerlink" title="确保一个函数只被调用一次。"></a>确保一个函数只被调用一次。</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">const once &#x3D; fn &#x3D;&gt; &#123;</span><br><span class="line">  let called &#x3D; false;</span><br><span class="line">  return function(...args) &#123;</span><br><span class="line">    if (called) return;</span><br><span class="line">    called &#x3D; true;</span><br><span class="line">    return fn.apply(this, args);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line">const startApp &#x3D; function(event) &#123;</span><br><span class="line">  console.log(this, event); &#x2F;&#x2F; document.body, MouseEvent</span><br><span class="line">&#125;;</span><br><span class="line">document.body.addEventListener(&#39;click&#39;, once(startApp));</span><br><span class="line">&#x2F;&#x2F; only runs &#96;startApp&#96; once upon click</span><br></pre></td></tr></table></figure>



<h3 id="实现sleep方法的两种方式"><a href="#实现sleep方法的两种方式" class="headerlink" title="实现sleep方法的两种方式"></a>实现sleep方法的两种方式</h3><p>不建议版本一：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">const sleepSync &#x3D; (ms) &#x3D;&gt; &#123;</span><br><span class="line">  const end &#x3D; new Date().getTime() + ms;</span><br><span class="line">  while (new Date().getTime() &lt; end) &#123; &#x2F;* do nothing *&#x2F; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const printNums &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">  console.log(1);</span><br><span class="line">  sleepSync(500);</span><br><span class="line">  console.log(2);</span><br><span class="line">  console.log(3);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">printNums(); &#x2F;&#x2F; Logs: 1, 2, 3 (2 and 3 log after 500ms)</span><br></pre></td></tr></table></figure>

<p>强烈建议版本二：promise</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const sleep &#x3D; (ms) &#x3D;&gt;</span><br><span class="line">  new Promise(resolve &#x3D;&gt; setTimeout(resolve, ms));</span><br><span class="line"></span><br><span class="line">const printNums &#x3D; async() &#x3D;&gt; &#123;</span><br><span class="line">  console.log(1);</span><br><span class="line">  await sleep(500);</span><br><span class="line">  console.log(2);</span><br><span class="line">  console.log(3);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">printNums(); &#x2F;&#x2F; Logs: 1, 2, 3 (2 and 3 log after 500ms)</span><br></pre></td></tr></table></figure>



<h3 id="浅拷贝，克隆数组的几种方式"><a href="#浅拷贝，克隆数组的几种方式" class="headerlink" title="浅拷贝，克隆数组的几种方式"></a>浅拷贝，克隆数组的几种方式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">扩展运算符</span><br><span class="line">ES6 引入了扩展运算符 ( ...)，它提供了可能是创建数组的浅层克隆的最简单和最常用的方法。</span><br><span class="line">let x &#x3D; [1, 2, 3, 4];</span><br><span class="line">let y &#x3D; [...x];</span><br><span class="line"></span><br><span class="line">数组.from()</span><br><span class="line">Array.from()有一个非常强大的 API，可以用于许多不同的事情，包括创建一个数组的副本。</span><br><span class="line">let x &#x3D; [1, 2, 3, 4];</span><br><span class="line">let y &#x3D; Array.from(x);</span><br><span class="line"></span><br><span class="line">Array.prototype.slice()</span><br><span class="line">与扩展运算符类似，Array.prototype.slice()可用于创建数组的浅拷贝。</span><br><span class="line">let x &#x3D; [1, 2, 3, 4];</span><br><span class="line">let y &#x3D; x.slice();</span><br><span class="line"></span><br><span class="line">Array.prototype.map()</span><br><span class="line">研究一个更非正统的选项，Array.prototype.map()可用于将数组的每个元素映射到自身以创建一个新数组。</span><br><span class="line">let x &#x3D; [1, 2, 3, 4];</span><br><span class="line">let y &#x3D; x.map(i &#x3D;&gt; i);</span><br><span class="line"></span><br><span class="line">Array.prototype.filter()</span><br><span class="line">类似地，Array.prototype.filter()可用于返回true每个元素，从而生成一个包含所有原始数组元素的新数组。</span><br><span class="line">let x &#x3D; [1, 2, 3, 4];</span><br><span class="line">let y &#x3D; x.filter(() &#x3D;&gt; true);</span><br><span class="line"></span><br><span class="line">对象.assign()</span><br><span class="line">最后，Object.assign()可以以与创建对象克隆完全相同的方式使用，但用于数组。</span><br><span class="line">let x &#x3D; [1, 2, 3, 4];</span><br><span class="line">let y &#x3D; Object.assign([], x);</span><br></pre></td></tr></table></figure>



<h3 id="如何比较-JavaScript-中的两个对象？"><a href="#如何比较-JavaScript-中的两个对象？" class="headerlink" title="如何比较 JavaScript 中的两个对象？"></a>如何比较 JavaScript 中的两个对象？</h3><p><strong>即使两个不同的对象可以具有相同的属性和相等的值，但在使用松散或严格相等运算符 (<code>==</code>或<code>===</code>) 进行比较时，它们不会被视为相等。这是因为 JavaScript 中的数组和对象是通过引用进行比较的。这与按值比较的原始值不同。</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const a &#x3D; &#123; name: &#39;John&#39;, age: 26 &#125;;</span><br><span class="line">const b &#x3D; &#123; name: &#39;John&#39;, age: 26 &#125;;</span><br><span class="line"></span><br><span class="line">a &#x3D;&#x3D;&#x3D; b; &#x2F;&#x2F; false</span><br></pre></td></tr></table></figure>



<h4 id="平等比较-JSON-stringify"><a href="#平等比较-JSON-stringify" class="headerlink" title="平等比较 JSON.stringify()"></a>平等比较 JSON.stringify()</h4><p>经常作为解决这个问题的方法出现。虽然它在某些情况下很有用，但比较序列化的字符串可能有其自身的缺陷。其中最常见的与导致相同序列化字符串的相似但不相等的值有关。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const equals &#x3D; (a, b) &#x3D;&gt; JSON.stringify(a) &#x3D;&#x3D;&#x3D; JSON.stringify(b);</span><br><span class="line"></span><br><span class="line">const a &#x3D; &#123; name: &#39;John&#39;, age: 26 &#125;;</span><br><span class="line">const b &#x3D; &#123; name: &#39;John&#39;, age: 26 &#125;;</span><br><span class="line"></span><br><span class="line">equals(a, b); &#x2F;&#x2F; true</span><br><span class="line"></span><br><span class="line">const c &#x3D; &#123; name: &#39;John&#39; &#125;;</span><br><span class="line">const d &#x3D; &#123; name: &#39;John&#39;, age: undefined &#125;;</span><br><span class="line"></span><br><span class="line">equals(c, d); &#x2F;&#x2F; true, should be false</span><br></pre></td></tr></table></figure>

<h4 id="深度平等比较"><a href="#深度平等比较" class="headerlink" title="深度平等比较"></a>深度平等比较</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">const equals &#x3D; (a, b) &#x3D;&gt; &#123;</span><br><span class="line">  if (a &#x3D;&#x3D;&#x3D; b) return true;</span><br><span class="line">  if (a instanceof Date &amp;&amp; b instanceof Date)</span><br><span class="line">    return a.getTime() &#x3D;&#x3D;&#x3D; b.getTime();</span><br><span class="line">  if (!a || !b || (typeof a !&#x3D;&#x3D; &#39;object&#39; &amp;&amp; typeof b !&#x3D;&#x3D; &#39;object&#39;))</span><br><span class="line">    return a &#x3D;&#x3D;&#x3D; b;</span><br><span class="line">  if (a.prototype !&#x3D;&#x3D; b.prototype) return false;</span><br><span class="line">  const keys &#x3D; Object.keys(a);</span><br><span class="line">  if (keys.length !&#x3D;&#x3D; Object.keys(b).length) return false;</span><br><span class="line">  return keys.every(k &#x3D;&gt; equals(a[k], b[k]));</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const a &#x3D; &#123; name: &#39;John&#39;, age: 26 &#125;;</span><br><span class="line">const b &#x3D; &#123; name: &#39;John&#39;, age: 26 &#125;;</span><br><span class="line"></span><br><span class="line">equals(a, b); &#x2F;&#x2F; true</span><br><span class="line"></span><br><span class="line">const c &#x3D; &#123; name: &#39;John&#39; &#125;;</span><br><span class="line">const d &#x3D; &#123; name: &#39;John&#39;, age: undefined &#125;;</span><br><span class="line"></span><br><span class="line">equals(c, d); &#x2F;&#x2F; false</span><br></pre></td></tr></table></figure>



<h3 id="如何检查-JavaScript-数组是否包含特定值？"><a href="#如何检查-JavaScript-数组是否包含特定值？" class="headerlink" title="如何检查 JavaScript 数组是否包含特定值？"></a>如何检查 JavaScript 数组是否包含特定值？</h3><h4 id="纯数组"><a href="#纯数组" class="headerlink" title="纯数组"></a>纯数组</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const array &#x3D; [1, 2, 3, 4, 5];</span><br><span class="line"></span><br><span class="line">array.includes(3); &#x2F;&#x2F; true</span><br><span class="line">array.includes(6); &#x2F;&#x2F; false</span><br><span class="line">array.includes(3, 3); &#x2F;&#x2F; false</span><br></pre></td></tr></table></figure>

<h4 id="数组对象"><a href="#数组对象" class="headerlink" title="数组对象"></a>数组对象</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const array &#x3D; [&#123; a: 1 &#125;, &#123; a: 2 &#125;, &#123; a: 3 &#125;];</span><br><span class="line"></span><br><span class="line">const equals &#x3D; (a, b) &#x3D;&gt; Object.keys(a).every(key &#x3D;&gt; a[key] &#x3D;&#x3D;&#x3D; b[key]);</span><br><span class="line"></span><br><span class="line">array.some(item &#x3D;&gt; equals(item, &#123; a: 2 &#125;)); &#x2F;&#x2F; true</span><br><span class="line">array.some(item &#x3D;&gt; equals(item, &#123; a: 4 &#125;)); &#x2F;&#x2F; false</span><br></pre></td></tr></table></figure>

<h3 id="如何使用async-await-promise避免异步数组循环中出现的问题"><a href="#如何使用async-await-promise避免异步数组循环中出现的问题" class="headerlink" title="如何使用async/await /promise避免异步数组循环中出现的问题"></a>如何使用async/await /promise避免异步数组循环中出现的问题</h3><h4 id="依次执行"><a href="#依次执行" class="headerlink" title="依次执行"></a>依次执行</h4><p><code>async</code>在对数组元素执行异步操作时，与<code>for</code>（或）循环结合<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of" target="_blank" rel="noopener"><code>for...of</code></a>可能是最直接的选择。<code>await</code>在循环内使用<code>for</code>将导致代码停止并等待异步操作完成后再继续。这意味着所有的 Promise 都将按顺序运行。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">const asyncUppercase &#x3D; item &#x3D;&gt;</span><br><span class="line">  new Promise(resolve &#x3D;&gt;</span><br><span class="line">    setTimeout(</span><br><span class="line">      () &#x3D;&gt; resolve(item.toUpperCase()),</span><br><span class="line">      Math.floor(Math.random() * 1000)</span><br><span class="line">    )</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">const uppercaseItems &#x3D; async () &#x3D;&gt; &#123;</span><br><span class="line">  const items &#x3D; [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;];</span><br><span class="line">  for (item of items) &#123;</span><br><span class="line">    const uppercaseItem &#x3D; await asyncUppercase(item);</span><br><span class="line">    console.log(uppercaseItem);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  console.log(&#39;Items processed&#39;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">uppercaseItems();</span><br><span class="line">&#x2F;&#x2F; LOGS: &#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;Items processed&#39;</span><br></pre></td></tr></table></figure>

<h4 id="并行"><a href="#并行" class="headerlink" title="并行"></a>并行</h4><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all" target="_blank" rel="noopener"><code>Promise.all()</code></a>为数组上的异步循环提供了另一种选择。与前一个的主要区别<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all" target="_blank" rel="noopener"><code>Promise.all()</code></a>在于并行执行所有异步操作。这意味着承诺将无序执行，这在某些情况下可能是一个问题。大多数情况下，这是我首选的解决方案，因为希望 Promise 按顺序执行是非常罕见的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">const asyncUppercase &#x3D; item &#x3D;&gt;</span><br><span class="line">  new Promise(resolve &#x3D;&gt;</span><br><span class="line">    setTimeout(</span><br><span class="line">      () &#x3D;&gt; resolve(item.toUpperCase()),</span><br><span class="line">      Math.floor(Math.random() * 1000)</span><br><span class="line">    )</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">const uppercaseItems &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">  const items &#x3D; [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;];</span><br><span class="line">  return Promise.all(</span><br><span class="line">    items.map(async item &#x3D;&gt; &#123;</span><br><span class="line">      const uppercaseItem &#x3D; await asyncUppercase(item);</span><br><span class="line">      console.log(uppercaseItem);</span><br><span class="line">    &#125;)</span><br><span class="line">  ).then(() &#x3D;&gt; &#123;</span><br><span class="line">    console.log(&#39;Items processed&#39;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">&#x2F;&#x2F; LOGS: &#39;A&#39;, &#39;C&#39;, &#39;B&#39;, &#39;Items processed&#39;</span><br></pre></td></tr></table></figure>

<h4 id="forEach不适用"><a href="#forEach不适用" class="headerlink" title="forEach不适用"></a>forEach不适用</h4><p>不幸的是，数组方法（例如）<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach" target="_blank" rel="noopener"><code>Array.prototype.forEach()</code></a>不适用于<code>async</code>/ <code>await</code>。唯一可行的解决方案是使用<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all" target="_blank" rel="noopener"><code>Promise.all()</code></a>前面示例中所示的方法。使用<code>async</code>回调<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach" target="_blank" rel="noopener"><code>Array.prototype.forEach()</code></a>将导致其余代码执行并且不等待异步操作。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">const asyncUppercase &#x3D; item &#x3D;&gt;</span><br><span class="line">  new Promise(resolve &#x3D;&gt;</span><br><span class="line">    setTimeout(</span><br><span class="line">      () &#x3D;&gt; resolve(item.toUpperCase()),</span><br><span class="line">      Math.floor(Math.random() * 1000)</span><br><span class="line">    )</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">const uppercaseItems &#x3D; async () &#x3D;&gt; &#123;</span><br><span class="line">  const items &#x3D; [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;];</span><br><span class="line">  await items.forEach(async item &#x3D;&gt; &#123;</span><br><span class="line">    const uppercaseItem &#x3D; await asyncUppercase(item);</span><br><span class="line">    console.log(uppercaseItem);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  console.log(&#39;Items processed&#39;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">uppercaseItems();</span><br><span class="line">&#x2F;&#x2F; LOGS: &#39;&#39;Items processed&#39;, &#39;B&#39;, &#39;A&#39;, &#39;C&#39;</span><br></pre></td></tr></table></figure>

<h3 id="使用类-class，定义一个树形结构，并封装一些方法"><a href="#使用类-class，定义一个树形结构，并封装一些方法" class="headerlink" title="使用类/class，定义一个树形结构，并封装一些方法"></a>使用类/class，定义一个树形结构，并封装一些方法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">class TreeNode &#123;</span><br><span class="line">  constructor(key, value &#x3D; key, parent &#x3D; null) &#123;</span><br><span class="line">    this.key &#x3D; key;</span><br><span class="line">    this.value &#x3D; value;</span><br><span class="line">    this.parent &#x3D; parent;</span><br><span class="line">    this.children &#x3D; [];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  get isLeaf() &#123;</span><br><span class="line">    return this.children.length &#x3D;&#x3D;&#x3D; 0;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  get hasChildren() &#123;</span><br><span class="line">    return !this.isLeaf;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Tree &#123;</span><br><span class="line">  constructor(key, value &#x3D; key) &#123;</span><br><span class="line">    this.root &#x3D; new TreeNode(key, value);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  *preOrderTraversal(node &#x3D; this.root) &#123;</span><br><span class="line">    yield node;</span><br><span class="line">    if (node.children.length) &#123;</span><br><span class="line">      for (let child of node.children) &#123;</span><br><span class="line">        yield* this.preOrderTraversal(child);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  *postOrderTraversal(node &#x3D; this.root) &#123;</span><br><span class="line">    if (node.children.length) &#123;</span><br><span class="line">      for (let child of node.children) &#123;</span><br><span class="line">        yield* this.postOrderTraversal(child);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    yield node;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  insert(parentNodeKey, key, value &#x3D; key) &#123;</span><br><span class="line">    for (let node of this.preOrderTraversal()) &#123;</span><br><span class="line">      if (node.key &#x3D;&#x3D;&#x3D; parentNodeKey) &#123;</span><br><span class="line">        node.children.push(new TreeNode(key, value, node));</span><br><span class="line">        return true;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return false;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  remove(key) &#123;</span><br><span class="line">    for (let node of this.preOrderTraversal()) &#123;</span><br><span class="line">      const filtered &#x3D; node.children.filter(c &#x3D;&gt; c.key !&#x3D;&#x3D; key);</span><br><span class="line">      if (filtered.length !&#x3D;&#x3D; node.children.length) &#123;</span><br><span class="line">        node.children &#x3D; filtered;</span><br><span class="line">        return true;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return false;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  find(key) &#123;</span><br><span class="line">    for (let node of this.preOrderTraversal()) &#123;</span><br><span class="line">      if (node.key &#x3D;&#x3D;&#x3D; key) return node;</span><br><span class="line">    &#125;</span><br><span class="line">    return undefined;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>用 a<code>class</code>为初始化适当的、和属性创建一个。</li>
<li>定义一个<code>isLeaf</code>  getter，用于<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/length" target="_blank" rel="noopener"><code>Array.prototype.length</code></a>检查是否<code>children</code>为空。</li>
<li>定义一个<code>hasChildren</code>  getter，也就是getter的反面<code>isLeaf</code>。</li>
<li>用 a<code>class</code>为树创建一个初始化树的。</li>
<li>定义一个<code>preOrderTraversal()</code>按顺序遍历树的生成器方法，使用<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/yield*" target="_blank" rel="noopener"><code>yield*</code></a>语法将遍历委托给自身。</li>
<li>定义一个<code>postOrderTraversal()</code>以后序遍历树的生成器方法，使用<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/yield*" target="_blank" rel="noopener"><code>yield*</code></a>语法将遍历委托给自身。</li>
<li>定义一个<code>insert()</code>方法，该方法使用该<code>preOrderTraversal()</code>方法并向树<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/push" target="_blank" rel="noopener"><code>Array.prototype.push()</code></a>中添加一个新方法。<code>TreeNode</code></li>
<li>定义一个<code>remove()</code>方法，该方法使用该<code>preOrderTraversal()</code>方法并从树<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter" target="_blank" rel="noopener"><code>Array.prototype.filter()</code></a>中删除一个。<code>TreeNode</code></li>
<li>定义一个<code>find()</code>方法，该方法使用该<code>preOrderTraversal()</code>方法检索树中的给定节点。</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/08/22/vue%E4%B9%8B%E4%BD%BF%E7%94%A8vue-cli4-0%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dali">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DaliBlogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/08/22/vue%E4%B9%8B%E4%BD%BF%E7%94%A8vue-cli4-0%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA/" itemprop="url">vue之使用vue-cli4.0项目搭建</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-08-22T15:50:13+08:00">
                2022-08-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-使用命令创建项目"><a href="#1-使用命令创建项目" class="headerlink" title="1.使用命令创建项目"></a>1.使用命令创建项目</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue create mydemo</span><br></pre></td></tr></table></figure>

<h3 id="2-下载常用插件"><a href="#2-下载常用插件" class="headerlink" title="2.下载常用插件"></a>2.下载常用插件</h3><h4 id="a-element-ui"><a href="#a-element-ui" class="headerlink" title="a.element-ui"></a>a.element-ui</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">npm install element-ui  </span><br><span class="line"></span><br><span class="line">main.js</span><br><span class="line">&#x2F;&#x2F;全局引入</span><br><span class="line">import ElementUI from &#39;element-ui&#39;;</span><br><span class="line">import &#39;element-ui&#x2F;lib&#x2F;theme-chalk&#x2F;index.css&#39;;</span><br><span class="line"></span><br><span class="line">Vue.use(ElementUI);</span><br></pre></td></tr></table></figure>

<h4 id="b-axios"><a href="#b-axios" class="headerlink" title="b.axios"></a>b.axios</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm install axios</span><br><span class="line"></span><br><span class="line">使用api封装的方法（处理统一报错拦截，统一参数拼接，登录过期跳转）</span><br><span class="line">在src目录下新建plugin文件夹，再新建axios文件夹，再新建index.js</span><br><span class="line">index.js</span><br></pre></td></tr></table></figure>

<h4 id="c-dayjs"><a href="#c-dayjs" class="headerlink" title="c.dayjs"></a>c.dayjs</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">npm install dayjs</span><br><span class="line"></span><br><span class="line">main.js</span><br><span class="line">var dayjs &#x3D; require(&#39;dayjs&#39;);</span><br><span class="line">Vue.prototype.$dayjs &#x3D; dayjs</span><br><span class="line"></span><br><span class="line">norm.vue</span><br><span class="line">test()&#123;</span><br><span class="line">	console.log(this.$dayjs(new Date()).format(&quot;YYYY-MM-DD&quot;))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="d-vue-echarts"><a href="#d-vue-echarts" class="headerlink" title="d. vue-echarts"></a>d. vue-echarts</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm install echarts vue-echarts</span><br><span class="line"></span><br><span class="line">main.js</span><br><span class="line">import ECharts from &#39;vue-echarts&#39;</span><br><span class="line">Vue.component(&#39;v-chart&#39;, ECharts)</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/18/">18</a><a class="extend next" rel="next" href="/page/2/">&lt;i class&#x3D;&quot;fa fa-angle-right&quot;&gt;&lt;&#x2F;i&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/header.jpg"
                alt="Dali" />
            
              <p class="site-author-name" itemprop="name">Dali</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">175</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">76</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">163</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Dali</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
